{"version":3,"sources":["../src/registry/schema.ts"],"names":["registryItemTypeSchema","z","registryItemFileSchema","registryItemTailwindSchema","registryItemCssVarsSchema","cssValueSchema","registryItemCssSchema","registryItemEnvVarsSchema","registryItemSchema","registrySchema","registryIndexSchema","stylesSchema","iconsSchema","registryBaseColorSchema","registryResolvedItemsTreeSchema","registryConfigItemSchema","s","registryConfigSchema","key","rawConfigSchema","configSchema","workspaceConfigSchema","searchResultItemSchema","searchResultsSchema","registriesIndexSchema"],"mappings":"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","file":"chunk-2IEF2V43.js","sourcesContent":["import { z } from \"zod\"\r\n\r\n// Note: if you edit the schema here, you must also edit the schema in the\r\n// apps/v4/public/schema/registry-item.json file.\r\n\r\nexport const registryItemTypeSchema = z.enum([\r\n  \"registry:lib\",\r\n  \"registry:block\",\r\n  \"registry:component\",\r\n  \"registry:ui\",\r\n  \"registry:hook\",\r\n  \"registry:page\",\r\n  \"registry:file\",\r\n  \"registry:theme\",\r\n  \"registry:style\",\r\n  \"registry:item\",\r\n\r\n  // Internal use only\r\n  \"registry:example\",\r\n  \"registry:internal\",\r\n])\r\n\r\nexport const registryItemFileSchema = z.discriminatedUnion(\"type\", [\r\n  // Target is required for registry:file and registry:page\r\n  z.object({\r\n    path: z.string(),\r\n    content: z.string().optional(),\r\n    type: z.enum([\"registry:file\", \"registry:page\"]),\r\n    target: z.string(),\r\n  }),\r\n  z.object({\r\n    path: z.string(),\r\n    content: z.string().optional(),\r\n    type: registryItemTypeSchema.exclude([\"registry:file\", \"registry:page\"]),\r\n    target: z.string().optional(),\r\n  }),\r\n])\r\n\r\nexport const registryItemTailwindSchema = z.object({\r\n  config: z\r\n    .object({\r\n      content: z.array(z.string()).optional(),\r\n      theme: z.record(z.string(), z.any()).optional(),\r\n      plugins: z.array(z.string()).optional(),\r\n    })\r\n    .optional(),\r\n})\r\n\r\nexport const registryItemCssVarsSchema = z.object({\r\n  theme: z.record(z.string(), z.string()).optional(),\r\n  light: z.record(z.string(), z.string()).optional(),\r\n  dark: z.record(z.string(), z.string()).optional(),\r\n})\r\n\r\n// Recursive type for CSS properties that supports empty objects at any level.\r\nconst cssValueSchema: z.ZodType<any> = z.lazy(() =>\r\n  z.union([z.string(), z.record(z.string(), cssValueSchema)])\r\n)\r\n\r\nexport const registryItemCssSchema = z.record(z.string(), cssValueSchema)\r\n\r\nexport const registryItemEnvVarsSchema = z.record(z.string(), z.string())\r\n\r\nexport const registryItemSchema = z.object({\r\n  $schema: z.string().optional(),\r\n  extends: z.string().optional(),\r\n  name: z.string(),\r\n  type: registryItemTypeSchema,\r\n  title: z.string().optional(),\r\n  author: z.string().min(2).optional(),\r\n  description: z.string().optional(),\r\n  dependencies: z.array(z.string()).optional(),\r\n  devDependencies: z.array(z.string()).optional(),\r\n  registryDependencies: z.array(z.string()).optional(),\r\n  files: z.array(registryItemFileSchema).optional(),\r\n  tailwind: registryItemTailwindSchema.optional(),\r\n  cssVars: registryItemCssVarsSchema.optional(),\r\n  css: registryItemCssSchema.optional(),\r\n  envVars: registryItemEnvVarsSchema.optional(),\r\n  meta: z.record(z.string(), z.any()).optional(),\r\n  docs: z.string().optional(),\r\n  categories: z.array(z.string()).optional(),\r\n})\r\n\r\nexport type RegistryItem = z.infer<typeof registryItemSchema>\r\n\r\nexport const registrySchema = z.object({\r\n  name: z.string(),\r\n  homepage: z.string(),\r\n  items: z.array(registryItemSchema),\r\n})\r\n\r\nexport type Registry = z.infer<typeof registrySchema>\r\n\r\nexport const registryIndexSchema = z.array(registryItemSchema)\r\n\r\nexport const stylesSchema = z.array(\r\n  z.object({\r\n    name: z.string(),\r\n    label: z.string(),\r\n  })\r\n)\r\n\r\nexport const iconsSchema = z.record(\r\n  z.string(),\r\n  z.record(z.string(), z.string())\r\n)\r\n\r\nexport const registryBaseColorSchema = z.object({\r\n  inlineColors: z.object({\r\n    light: z.record(z.string(), z.string()),\r\n    dark: z.record(z.string(), z.string()),\r\n  }),\r\n  cssVars: registryItemCssVarsSchema,\r\n  cssVarsV4: registryItemCssVarsSchema.optional(),\r\n  inlineColorsTemplate: z.string(),\r\n  cssVarsTemplate: z.string(),\r\n})\r\n\r\nexport const registryResolvedItemsTreeSchema = registryItemSchema.pick({\r\n  dependencies: true,\r\n  devDependencies: true,\r\n  files: true,\r\n  tailwind: true,\r\n  cssVars: true,\r\n  css: true,\r\n  envVars: true,\r\n  docs: true,\r\n})\r\n\r\nexport const registryConfigItemSchema = z.union([\r\n  // Simple string format: \"https://example.com/{name}.json\"\r\n  z.string().refine((s) => s.includes(\"{name}\"), {\r\n    message: \"Registry URL must include {name} placeholder\",\r\n  }),\r\n  // Advanced object format with auth options\r\n  z.object({\r\n    url: z.string().refine((s) => s.includes(\"{name}\"), {\r\n      message: \"Registry URL must include {name} placeholder\",\r\n    }),\r\n    params: z.record(z.string(), z.string()).optional(),\r\n    headers: z.record(z.string(), z.string()).optional(),\r\n  }),\r\n])\r\n\r\nexport const registryConfigSchema = z.record(\r\n  z.string().refine((key) => key.startsWith(\"@\"), {\r\n    message: \"Registry names must start with @ (e.g., @v0, @acme)\",\r\n  }),\r\n  registryConfigItemSchema\r\n)\r\n\r\nexport const rawConfigSchema = z\r\n  .object({\r\n    $schema: z.string().optional(),\r\n    style: z.string(),\r\n    rsc: z.coerce.boolean().default(false),\r\n    tsx: z.coerce.boolean().default(true),\r\n    tailwind: z.object({\r\n      config: z.string().optional(),\r\n      css: z.string(),\r\n      baseColor: z.string(),\r\n      cssVariables: z.boolean().default(true),\r\n      prefix: z.string().default(\"\").optional(),\r\n    }),\r\n    iconLibrary: z.string().optional(),\r\n    aliases: z.object({\r\n      components: z.string(),\r\n      utils: z.string(),\r\n      ui: z.string().optional(),\r\n      lib: z.string().optional(),\r\n      hooks: z.string().optional(),\r\n    }),\r\n    registries: registryConfigSchema.optional(),\r\n  })\r\n  .strict()\r\n\r\nexport const configSchema = rawConfigSchema.extend({\r\n  resolvedPaths: z.object({\r\n    cwd: z.string(),\r\n    tailwindConfig: z.string(),\r\n    tailwindCss: z.string(),\r\n    utils: z.string(),\r\n    components: z.string(),\r\n    lib: z.string(),\r\n    hooks: z.string(),\r\n    ui: z.string(),\r\n  }),\r\n})\r\n\r\n// TODO: type the key.\r\n// Okay for now since I don't want a breaking change.\r\nexport const workspaceConfigSchema = z.record(configSchema)\r\n\r\nexport const searchResultItemSchema = z.object({\r\n  name: z.string(),\r\n  type: z.string().optional(),\r\n  description: z.string().optional(),\r\n  registry: z.string(),\r\n  addCommandArgument: z.string(),\r\n})\r\n\r\nexport const searchResultsSchema = z.object({\r\n  pagination: z.object({\r\n    total: z.number(),\r\n    offset: z.number(),\r\n    limit: z.number(),\r\n    hasMore: z.boolean(),\r\n  }),\r\n  items: z.array(searchResultItemSchema),\r\n})\r\n\r\nexport const registriesIndexSchema = z.record(\r\n  z.string().regex(/^@[a-zA-Z0-9][a-zA-Z0-9-_]*$/),\r\n  z.string()\r\n)\r\n"]}