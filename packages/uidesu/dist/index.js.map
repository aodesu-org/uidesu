{"version":3,"sources":["../package.json","../src/utils/highlighter.ts","../src/utils/logger.ts","../src/commands/build.ts","../src/utils/frameworks.ts","../src/utils/resolve-import.ts","../src/registry/constants.ts","../src/utils/get-config.ts","../src/utils/get-package-info.ts","../src/utils/get-project-info.ts","../src/utils/spinner.ts","../src/preflights/preflight-init.ts","../src/registry/fetcher.ts","../src/registry/api.ts","../src/utils/get-package-manager.ts","../src/templates/create-vite-project.ts","../src/utils/create-project.ts","../src/utils/env-loader.ts","../src/registry/errors.ts","../src/utils/handle-error.ts","../src/commands/init.ts","../src/index.ts"],"names":["package_default","highlighter","red","yellow","cyan","green","logger","args","z","build","Command","registryFile","opts","cwd","path","outputDir","registryPath","registryContent","fs","registry","registrySchema","index","item","error","err","FRAMEWORKS","resolveImport","importPath","config","createMatchPath","REGISTRY_URL","BUILTIN_REGISTRIES","explorer","cosmiconfig","getConfig","getRawConfig","resolveConfigPaths","tsConfig","loadConfig","configSchema","configResult","rawConfigSchema","registryName","configPath","getPackageInfo","shouldThrow","packageJsonPath","PROJECT_SHARED_IGNORE","getProjectInfo","configFiles","isSrcDir","isTsx","tailwindConfigFile","tailwindCssFile","tailwindVersion","aliasPrefix","packageJson","fg","isTypeScriptProject","getTailwindConfigFile","getTailwindCssFile","getTailwindVersion","getTsConfigAliasPrefix","isUsingAppDir","type","file","packageInfo","files","contents","alias","paths","getProjectConfig","defaultProjectInfo","existingConfig","projectInfo","spinner","text","options","ora","preflightInit","errors","projectSpinner","frameworkSpinner","fetchRegistry","getRegistryStyles","result","stylesSchema","getRegistryThemes","getPackageManager","targetDir","withFallback","packageManager","detect","userAgent","GITHUB_TEMPLATE_URL","createViteProject","projectPath","createSpinner","templatePath","os","response","tarPath","execa","extractedPath","lockFilePath","packageJsonContent","createProject","template","projectName","name","prompts","value","loadEnvFiles","envFiles","envFile","envPath","join","existsSync","RegistryErrorCode","RegistryError","message","handleError","key","code","filePath","initOptionsSchema","init","runInit","preflight","projectConfig","promptForMinimalConfig","promptForConfig","proceed","componentSpinner","targetPath","defaultConfig","styles","themes","style","theme","cssVariables","main","program"],"mappings":"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","file":"index.js","sourcesContent":["{\r\n  \"name\": \"uidesu\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"Add components to your apps.\",\r\n  \"publishConfig\": {\r\n    \"access\": \"public\"\r\n  },\r\n  \"license\": \"MIT\",\r\n  \"author\": {\r\n    \"name\": \"sergiocortes-dll\",\r\n    \"url\": \"https://x.com/sergiocortes-dll\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"https://github.com/aodesu-org/uidesu\",\r\n    \"directory\": \"packages/uidesu\"\r\n  },\r\n  \"files\": [\r\n    \"dist\"\r\n  ],\r\n  \"keywords\": [\r\n    \"components\",\r\n    \"ui\",\r\n    \"tailwind\",\r\n    \"radix-ui\",\r\n    \"uidesu\"\r\n  ],\r\n  \"type\": \"module\",\r\n  \"exports\": {\r\n    \".\": {\r\n      \"types\": \"./dist/index.d.ts\",\r\n      \"default\": \"./dist/index.js\"\r\n    },\r\n    \"./schema\": {\r\n      \"types\": \"./dist/schema/index.d.ts\",\r\n      \"default\": \"./dist/schema/index.js\"\r\n    },\r\n    \"./utils\": {\r\n      \"types\": \"./dist/utils/index.d.ts\",\r\n      \"default\": \"./dist/utils/index.js\"\r\n    },\r\n    \"./tailwind.css\": {\r\n      \"style\": \"./dist/tailwind.css\"\r\n    }\r\n  },\r\n  \"bin\": \"./dist/index.js\",\r\n  \"scripts\": {\r\n    \"dev\": \"tsup --watch\",\r\n    \"start:dev\": \"cross-env REGISTRY_URL=http://localhost:4000/r node dist/index.js\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@antfu/ni\": \"^25.0.0\",\r\n    \"@babel/core\": \"^7.28.0\",\r\n    \"@babel/parser\": \"^7.28.0\",\r\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\r\n    \"@babel/preset-typescript\": \"^7.27.1\",\r\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\r\n    \"commander\": \"^14.0.0\",\r\n    \"cosmiconfig\": \"^9.0.0\",\r\n    \"deepmerge\": \"^4.3.1\",\r\n    \"execa\": \"^9.6.0\",\r\n    \"fast-glob\": \"^3.3.3\",\r\n    \"fs-extra\": \"^11.3.1\",\r\n    \"https-proxy-agent\": \"^7.0.6\",\r\n    \"kleur\": \"^4.1.5\",\r\n    \"node-fetch\": \"^3.3.2\",\r\n    \"ora\": \"^8.2.0\",\r\n    \"postcss\": \"^8.5.6\",\r\n    \"prompts\": \"^2.4.2\",\r\n    \"recast\": \"^0.23.11\",\r\n    \"stringify-object\": \"^5.0.0\",\r\n    \"ts-morph\": \"^26.0.0\",\r\n    \"tsconfig-paths\": \"^4.2.0\",\r\n    \"zod\": \"^3.24.1\",\r\n    \"zod-to-json-schema\": \"3.24.6\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@types/babel__core\": \"^7.20.5\",\r\n    \"@types/fs-extra\": \"^11.0.4\",\r\n    \"@types/prompts\": \"^2.4.9\",\r\n    \"@types/stringify-object\": \"^4.0.5\",\r\n    \"rimraf\": \"^6.0.1\",\r\n    \"tsup\": \"^8.5.0\",\r\n    \"type-fest\": \"^4.41.0\",\r\n    \"typescript\": \"^5.9.2\"\r\n  }\r\n}\r\n","import { cyan, green, red, yellow } from \"kleur/colors\"\r\n\r\nexport const highlighter = {\r\n  error: red,\r\n  warn: yellow,\r\n  info: cyan,\r\n  success: green,\r\n}\r\n","import { highlighter } from \"@/src/utils/highlighter\"\r\n\r\nexport const logger = {\r\n  error(...args: unknown[]) {\r\n    console.log(highlighter.error(args.join(\" \")))\r\n  },\r\n  warn(...args: unknown[]) {\r\n    console.log(highlighter.warn(args.join(\" \")))\r\n  },\r\n  info(...args: unknown[]) {\r\n    console.log(highlighter.info(args.join(\" \")))\r\n  },\r\n  success(...args: unknown[]) {\r\n    console.log(highlighter.success(args.join(\" \")))\r\n  },\r\n  log(...args: unknown[]) {\r\n    console.log(args.join(\" \"))\r\n  },\r\n  break() {\r\n    console.log(\"\")\r\n  },\r\n}\r\n","import { Command } from \"commander\";\r\nimport { promises as fs } from \"fs\";\r\nimport path from \"path\";\r\nimport z from \"zod\";\r\nimport { registrySchema } from \"../registry/schema\";\r\nimport { logger } from \"../utils/logger\";\r\n\r\nexport const buildOptionsSchema = z.object({\r\n  cwd: z.string(),\r\n  registryFile: z.string(),\r\n  outputDir: z.string(),\r\n});\r\n\r\nexport const build = new Command()\r\n  .name(\"build\")\r\n  .description(\"build components for a aodesu registry\")\r\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\r\n  .option(\r\n    \"-o, --output <path>\",\r\n    \"destination directory for json files\",\r\n    \"./public/r\"\r\n  )\r\n  .option(\r\n    \"-c, --cwd <cwd>\",\r\n    \"the working directory. defaults to the current directory.\",\r\n    process.cwd()\r\n  )\r\n  .action(async (registryFile: string, opts) => {\r\n    try {\r\n      const cwd = path.resolve(opts.cwd);\r\n      const outputDir = path.resolve(cwd, opts.output);\r\n      const registryPath = path.resolve(cwd, registryFile);\r\n\r\n      // Read and parse registry\r\n      const registryContent = await fs.readFile(registryPath, \"utf-8\");\r\n      const registry = registrySchema.parse(JSON.parse(registryContent));\r\n\r\n      // Create output directory\r\n      await fs.mkdir(outputDir, { recursive: true });\r\n\r\n      // Generate index file with all items\r\n      const index = registry.items.map((item) => ({\r\n        name: item.name,\r\n        type: item.type,\r\n      }));\r\n\r\n      await fs.writeFile(\r\n        path.join(outputDir, \"index.json\"),\r\n        JSON.stringify(index, null, 2)\r\n      );\r\n\r\n      logger.info(`✓ Generated ${index.length} items`);\r\n      logger.info(`✓ Output directory: ${outputDir}`);\r\n    } catch (error) {\r\n      if (error instanceof z.ZodError) {\r\n        logger.error(\"Invalid registry.json format\");\r\n        error.errors.forEach((err) => {\r\n          logger.error(`  ${err.path.join(\".\")}: ${err.message}`);\r\n        });\r\n      } else if (error instanceof Error) {\r\n        logger.error(error.message);\r\n      } else {\r\n        logger.error(\"Unknown error occurred\");\r\n      }\r\n      process.exit(1);\r\n    }\r\n  });\r\n","export const FRAMEWORKS = {\r\n  \"next-app\": {\r\n    name: \"next-app\",\r\n    label: \"Next.js\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/next\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\r\n    },\r\n  },\r\n  \"next-pages\": {\r\n    name: \"next-pages\",\r\n    label: \"Next.js\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/next\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\r\n    },\r\n  },\r\n  vite: {\r\n    name: \"vite\",\r\n    label: \"Vite\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/vite\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/vite\",\r\n    },\r\n  },\r\n  manual: {\r\n    name: \"manual\",\r\n    label: \"Manual\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/manual\",\r\n      tailwind: \"https://tailwindcss.com/docs/installation\",\r\n    },\r\n  },\r\n}\r\n\r\nexport type Framework = (typeof FRAMEWORKS)[keyof typeof FRAMEWORKS]\r\n","import { createMatchPath, type ConfigLoaderSuccessResult } from \"tsconfig-paths\"\r\n\r\nexport async function resolveImport(\r\n  importPath: string,\r\n  config: Pick<ConfigLoaderSuccessResult, \"absoluteBaseUrl\" | \"paths\">\r\n) {\r\n  return createMatchPath(config.absoluteBaseUrl, config.paths)(\r\n    importPath,\r\n    undefined,\r\n    () => true,\r\n    [\".ts\", \".tsx\", \".jsx\", \".js\", \".css\"]\r\n  )\r\n}\r\n","import { registryConfigSchema } from \"@/src/schema\"\r\nimport { z } from \"zod\"\r\n\r\nexport const REGISTRY_URL =\r\n  process.env.REGISTRY_URL ?? \"https://ui.aodesu.com/r\"\r\n\r\n// Built-in registries that are always available and cannot be overridden\r\nexport const BUILTIN_REGISTRIES: z.infer<typeof registryConfigSchema> = {\r\n  \"@shadcn\": `${REGISTRY_URL}/styles/{style}/{name}.json`,\r\n}\r\n","import path from \"path\"\r\nimport { configSchema, rawConfigSchema } from \"@/src/schema\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport { resolveImport } from \"@/src/utils/resolve-import\"\r\nimport { cosmiconfig } from \"cosmiconfig\"\r\nimport { loadConfig } from \"tsconfig-paths\"\r\nimport { z } from \"zod\"\r\n\r\nimport { BUILTIN_REGISTRIES } from \"../registry/constants\"\r\n\r\nexport const explorer = cosmiconfig(\"uidesu\", {\r\n  searchPlaces: [\"uidesu.config.json\"],\r\n})\r\n\r\nexport type Config = z.infer<typeof configSchema>\r\n\r\nexport async function getConfig(cwd: string) {\r\n  const config = await getRawConfig(cwd)\r\n\r\n  if (!config) {\r\n    return null\r\n  }\r\n\r\n  return await resolveConfigPaths(cwd, config)\r\n}\r\n\r\nexport async function resolveConfigPaths(\r\n  cwd: string,\r\n  config: z.infer<typeof rawConfigSchema>\r\n) {\r\n  // Merge built-in registries with user registries\r\n  config.registries = {\r\n    ...BUILTIN_REGISTRIES,\r\n    ...(config.registries || {}),\r\n  }\r\n\r\n  // Read tsconfig.json.\r\n  const tsConfig = await loadConfig(cwd)\r\n\r\n  if (tsConfig.resultType === \"failed\") {\r\n    throw new Error(\r\n      `Failed to load ${config.tsx ? \"tsconfig\" : \"jsconfig\"}.json. ${\r\n        tsConfig.message ?? \"\"\r\n      }`.trim()\r\n    )\r\n  }\r\n\r\n  return configSchema.parse({\r\n    ...config,\r\n    resolvedPaths: {\r\n      cwd,\r\n      tailwindConfig: config.tailwind.config\r\n        ? path.resolve(cwd, config.tailwind.config)\r\n        : \"\",\r\n      tailwindCss: path.resolve(cwd, config.tailwind.css),\r\n      utils: await resolveImport(config.aliases[\"utils\"], tsConfig),\r\n      components: await resolveImport(config.aliases[\"components\"], tsConfig),\r\n      ui: config.aliases[\"ui\"]\r\n        ? await resolveImport(config.aliases[\"ui\"], tsConfig)\r\n        : path.resolve(\r\n            (await resolveImport(config.aliases[\"components\"], tsConfig)) ??\r\n              cwd,\r\n            \"ui\"\r\n          ),\r\n      lib: config.aliases[\"lib\"]\r\n        ? await resolveImport(config.aliases[\"lib\"], tsConfig)\r\n        : path.resolve(\r\n            (await resolveImport(config.aliases[\"utils\"], tsConfig)) ?? cwd,\r\n            \"..\"\r\n          ),\r\n    },\r\n  })\r\n}\r\n\r\nexport async function getRawConfig(\r\n  cwd: string\r\n): Promise<z.infer<typeof rawConfigSchema> | null> {\r\n  try {\r\n    const configResult = await explorer.search(cwd)\r\n\r\n    if (!configResult) return null\r\n\r\n    const config = rawConfigSchema.parse(configResult.config)\r\n\r\n    // Check if user is trying to override built-in registries\r\n    if (config.registries) {\r\n      for (const registryName of Object.keys(config.registries)) {\r\n        if (registryName in BUILTIN_REGISTRIES) {\r\n          throw new Error(\r\n            `\"${registryName}\" is a built-in registry and cannot be overridden.`\r\n          )\r\n        }\r\n      }\r\n    }\r\n\r\n    return config\r\n  } catch (error) {\r\n    const configPath = `${cwd}/uidesu.config.json`\r\n    if (error instanceof Error && error.message.includes(\"reserved registry\")) {\r\n      throw error\r\n    }\r\n    throw new Error(\r\n      `Invalid configuration found in ${highlighter.info(configPath)}.`\r\n    )\r\n  }\r\n}\r\n","import path from \"path\"\r\nimport fs from \"fs-extra\"\r\nimport { type PackageJson } from \"type-fest\"\r\n\r\nexport function getPackageInfo(\r\n  cwd: string = \"\",\r\n  shouldThrow: boolean = true\r\n): PackageJson | null {\r\n  const packageJsonPath = path.join(cwd, \"package.json\")\r\n\r\n  return fs.readJSONSync(packageJsonPath, {\r\n    throws: shouldThrow,\r\n  }) as PackageJson\r\n}\r\n","import path from \"path\"\r\nimport { rawConfigSchema } from \"@/src/schema\"\r\nimport { FRAMEWORKS, Framework } from \"@/src/utils/frameworks\"\r\nimport { Config, getConfig, resolveConfigPaths } from \"@/src/utils/get-config\"\r\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\r\nimport fg from \"fast-glob\"\r\nimport fs from \"fs-extra\"\r\nimport { loadConfig } from \"tsconfig-paths\"\r\nimport { z } from \"zod\"\r\n\r\nexport type TailwindVersion = \"v3\" | \"v4\" | null\r\n\r\nexport type ProjectInfo = {\r\n  framework: Framework\r\n  isSrcDir: boolean\r\n  isTsx: boolean\r\n  tailwindConfigFile: string | null\r\n  tailwindCssFile: string | null\r\n  tailwindVersion: TailwindVersion\r\n  frameworkVersion: string | null\r\n  aliasPrefix: string | null\r\n}\r\n\r\nconst PROJECT_SHARED_IGNORE = [\r\n  \"**/node_modules/**\",\r\n  \".next\",\r\n  \"public\",\r\n  \"dist\",\r\n  \"build\",\r\n]\r\n\r\nconst TS_CONFIG_SCHEMA = z.object({\r\n  compilerOptions: z.object({\r\n    paths: z.record(z.string().or(z.array(z.string()))),\r\n  }),\r\n})\r\n\r\nexport async function getProjectInfo(cwd: string): Promise<ProjectInfo | null> {\r\n  const [\r\n    configFiles,\r\n    isSrcDir,\r\n    isTsx,\r\n    tailwindConfigFile,\r\n    tailwindCssFile,\r\n    tailwindVersion,\r\n    aliasPrefix,\r\n    packageJson,\r\n  ] = await Promise.all([\r\n    fg.glob(\r\n      \"**/{next,vite,astro,app}.config.*|gatsby-config.*|composer.json|react-router.config.*\",\r\n      {\r\n        cwd,\r\n        deep: 3,\r\n        ignore: PROJECT_SHARED_IGNORE,\r\n      }\r\n    ),\r\n    fs.pathExists(path.resolve(cwd, \"src\")),\r\n    isTypeScriptProject(cwd),\r\n    getTailwindConfigFile(cwd),\r\n    getTailwindCssFile(cwd),\r\n    getTailwindVersion(cwd),\r\n    getTsConfigAliasPrefix(cwd),\r\n    getPackageInfo(cwd, false),\r\n  ])\r\n\r\n  const isUsingAppDir = await fs.pathExists(\r\n    path.resolve(cwd, `${isSrcDir ? \"src/\" : \"\"}app`)\r\n  )\r\n\r\n  const type: ProjectInfo = {\r\n    framework: FRAMEWORKS[\"manual\"],\r\n    isSrcDir,\r\n    isTsx,\r\n    tailwindConfigFile,\r\n    tailwindCssFile,\r\n    tailwindVersion,\r\n    frameworkVersion: null,\r\n    aliasPrefix,\r\n  }\r\n\r\n  // Next.js.\r\n  if (configFiles.find((file) => file.startsWith(\"next.config.\"))?.length) {\r\n    type.framework = isUsingAppDir\r\n      ? FRAMEWORKS[\"next-app\"]\r\n      : FRAMEWORKS[\"next-pages\"]\r\n    return type\r\n  }\r\n\r\n  // Vite.\r\n  // Some Remix templates also have a vite.config.* file.\r\n  // We'll assume that it got caught by the Remix check above.\r\n  if (configFiles.find((file) => file.startsWith(\"vite.config.\"))?.length) {\r\n    type.framework = FRAMEWORKS[\"vite\"]\r\n    return type\r\n  }\r\n\r\n  return type\r\n}\r\n\r\nexport async function getTailwindVersion(\r\n  cwd: string\r\n): Promise<ProjectInfo[\"tailwindVersion\"]> {\r\n  const [packageInfo, config] = await Promise.all([\r\n    getPackageInfo(cwd, false),\r\n    getConfig(cwd),\r\n  ])\r\n\r\n  // If the config file is empty, we can assume that it's a v4 project.\r\n  if (config?.tailwind?.config === \"\") {\r\n    return \"v4\"\r\n  }\r\n\r\n  if (\r\n    !packageInfo?.dependencies?.tailwindcss &&\r\n    !packageInfo?.devDependencies?.tailwindcss\r\n  ) {\r\n    return null\r\n  }\r\n\r\n  if (\r\n    /^(?:\\^|~)?3(?:\\.\\d+)*(?:-.*)?$/.test(\r\n      packageInfo?.dependencies?.tailwindcss ||\r\n        packageInfo?.devDependencies?.tailwindcss ||\r\n        \"\"\r\n    )\r\n  ) {\r\n    return \"v3\"\r\n  }\r\n\r\n  return \"v4\"\r\n}\r\n\r\nexport async function getTailwindCssFile(cwd: string) {\r\n  const [files, tailwindVersion] = await Promise.all([\r\n    fg.glob([\"**/*.css\", \"**/*.scss\"], {\r\n      cwd,\r\n      deep: 5,\r\n      ignore: PROJECT_SHARED_IGNORE,\r\n    }),\r\n    getTailwindVersion(cwd),\r\n  ])\r\n\r\n  if (!files.length) {\r\n    return null\r\n  }\r\n\r\n  const needle =\r\n    tailwindVersion === \"v4\" ? `@import \"tailwindcss\"` : \"@tailwind base\"\r\n  for (const file of files) {\r\n    const contents = await fs.readFile(path.resolve(cwd, file), \"utf8\")\r\n    if (\r\n      contents.includes(`@import \"tailwindcss\"`) ||\r\n      contents.includes(`@import 'tailwindcss'`) ||\r\n      contents.includes(`@tailwind base`)\r\n    ) {\r\n      return file\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nexport async function getTailwindConfigFile(cwd: string) {\r\n  const files = await fg.glob(\"tailwind.config.*\", {\r\n    cwd,\r\n    deep: 3,\r\n    ignore: PROJECT_SHARED_IGNORE,\r\n  })\r\n\r\n  if (!files.length) {\r\n    return null\r\n  }\r\n\r\n  return files[0]\r\n}\r\n\r\nexport async function getTsConfigAliasPrefix(cwd: string) {\r\n  const tsConfig = await loadConfig(cwd)\r\n\r\n  if (\r\n    tsConfig?.resultType === \"failed\" ||\r\n    !Object.entries(tsConfig?.paths).length\r\n  ) {\r\n    return null\r\n  }\r\n\r\n  // This assume that the first alias is the prefix.\r\n  for (const [alias, paths] of Object.entries(tsConfig.paths)) {\r\n    if (\r\n      paths.includes(\"./*\") ||\r\n      paths.includes(\"./src/*\") ||\r\n      paths.includes(\"./app/*\") ||\r\n      paths.includes(\"./resources/js/*\") // Laravel.\r\n    ) {\r\n      return alias.replace(/\\/\\*$/, \"\") ?? null\r\n    }\r\n  }\r\n\r\n  // Use the first alias as the prefix.\r\n  return Object.keys(tsConfig?.paths)?.[0].replace(/\\/\\*$/, \"\") ?? null\r\n}\r\n\r\nexport async function isTypeScriptProject(cwd: string) {\r\n  const files = await fg.glob(\"tsconfig.*\", {\r\n    cwd,\r\n    deep: 1,\r\n    ignore: PROJECT_SHARED_IGNORE,\r\n  })\r\n\r\n  return files.length > 0\r\n}\r\n\r\nexport async function getTsConfig(cwd: string) {\r\n  for (const fallback of [\r\n    \"tsconfig.json\",\r\n    \"tsconfig.web.json\",\r\n    \"tsconfig.app.json\",\r\n  ]) {\r\n    const filePath = path.resolve(cwd, fallback)\r\n    if (!(await fs.pathExists(filePath))) {\r\n      continue\r\n    }\r\n\r\n    // We can't use fs.readJSON because it doesn't support comments.\r\n    const contents = await fs.readFile(filePath, \"utf8\")\r\n    const cleanedContents = contents.replace(/\\/\\*\\s*\\*\\//g, \"\")\r\n    const result = TS_CONFIG_SCHEMA.safeParse(JSON.parse(cleanedContents))\r\n\r\n    if (result.error) {\r\n      continue\r\n    }\r\n\r\n    return result.data\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nexport async function getProjectConfig(\r\n  cwd: string,\r\n  defaultProjectInfo: ProjectInfo | null = null\r\n): Promise<Config | null> {\r\n  // Check for existing uidesu.config.json file.\r\n  const [existingConfig, projectInfo] = await Promise.all([\r\n    getConfig(cwd),\r\n    !defaultProjectInfo\r\n      ? getProjectInfo(cwd)\r\n      : Promise.resolve(defaultProjectInfo),\r\n  ])\r\n\r\n  if (existingConfig) {\r\n    return existingConfig\r\n  }\r\n\r\n  if (\r\n    !projectInfo ||\r\n    !projectInfo.tailwindCssFile ||\r\n    (projectInfo.tailwindVersion === \"v3\" && !projectInfo.tailwindConfigFile)\r\n  ) {\r\n    return null\r\n  }\r\n\r\n  const config: z.infer<typeof rawConfigSchema> = {\r\n    $schema: \"https://ui.aodesu.com/schema.json\",\r\n    tsx: projectInfo.isTsx,\r\n    style: \"aodesu\",\r\n    tailwind: {\r\n      config: projectInfo.tailwindConfigFile ?? \"\",\r\n      theme: \"classic\",\r\n      css: projectInfo.tailwindCssFile,\r\n      cssVariables: true,\r\n      prefix: \"\",\r\n    },\r\n    aliases: {\r\n      components: `${projectInfo.aliasPrefix}/components`,\r\n      ui: `${projectInfo.aliasPrefix}/components/ui`,\r\n      lib: `${projectInfo.aliasPrefix}/lib`,\r\n      utils: `${projectInfo.aliasPrefix}/lib/utils`,\r\n    },\r\n  }\r\n\r\n  return await resolveConfigPaths(cwd, config)\r\n}\r\n","import ora, { type Options } from \"ora\"\r\n\r\nexport function spinner(\r\n  text: Options[\"text\"],\r\n  options?: {\r\n    silent?: boolean\r\n  }\r\n) {\r\n  return ora({\r\n    text,\r\n    isSilent: options?.silent,\r\n  })\r\n}\r\n","import path from \"path\"\r\nimport { initOptionsSchema } from \"@/src/commands/init\"\r\nimport * as ERRORS from \"@/src/utils/errors\"\r\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport { logger } from \"@/src/utils/logger\"\r\nimport { spinner } from \"@/src/utils/spinner\"\r\nimport fs from \"fs-extra\"\r\nimport { z } from \"zod\"\r\n\r\nexport async function preflightInit(\r\n  options: z.infer<typeof initOptionsSchema>\r\n) {\r\n  const errors: Record<string, boolean> = {}\r\n\r\n  if (\r\n    !fs.existsSync(options.cwd) ||\r\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\r\n  ) {\r\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\r\n    return {\r\n      errors,\r\n      projectInfo: null,\r\n    }\r\n  }\r\n\r\n  const projectSpinner = spinner(\" Preflight checks.\").start()\r\n\r\n  if (fs.existsSync(path.resolve(options.cwd, \"uidesu.config.json\"))) {\r\n    projectSpinner?.fail()\r\n    logger.break()\r\n    logger.error(\r\n      `A ${highlighter.info(\r\n        \"uidesu.config.json\"\r\n      )} file already exists at ${highlighter.info(\r\n        options.cwd\r\n      )}.\\nTo start over, remove the ${highlighter.info(\r\n        \"uidesu.config.json\"\r\n      )} file and run ${highlighter.info(\"uidesu init\")} again.`\r\n    )\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  projectSpinner?.succeed()\r\n\r\n  const frameworkSpinner = spinner(\"Verifying framework.\").start()\r\n  const projectInfo = await getProjectInfo(options.cwd)\r\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\r\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true\r\n    frameworkSpinner?.fail()\r\n    logger.break()\r\n\r\n    if (projectInfo?.framework.links.installation) {\r\n      logger.error(\r\n        `We could not detect a supported framework at ${highlighter.info(\r\n          options.cwd\r\n        )}.\\n` +\r\n          `Visit ${highlighter.info(\r\n            projectInfo?.framework.links.installation\r\n          )} to manually configure your project.\\nOnce configured, you can use the cli to add components.`\r\n      )\r\n    }\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n  frameworkSpinner?.succeed(\r\n    ` Verifying framework.\\n   - Found ${highlighter.info(\r\n      projectInfo.framework.label\r\n    )}.`\r\n  )\r\n\r\n  return {\r\n    errors,\r\n    projectInfo,\r\n  }\r\n}\r\n","export async function fetchRegistry(\r\n  paths: string[],\r\n  options: { useCache?: boolean } = {}\r\n) {\r\n  options = {\r\n    useCache: true,\r\n    ...options,\r\n  }\r\n\r\n  try {\r\n    const results = await Promise.all(paths.map(async (path) => {}))\r\n\r\n    return results\r\n  } catch (error) {\r\n    throw error\r\n  }\r\n}\r\n","import { fetchRegistry } from \"@/src/registry/fetcher\"\r\nimport { stylesSchema } from \"@/src/schema\"\r\nimport { logger } from \"@/src/utils/logger\"\r\n\r\nexport async function getRegistryStyles() {\r\n  try {\r\n    const [result] = await fetchRegistry([\"styles/index.json\"])\r\n\r\n    return stylesSchema.parse(result)\r\n  } catch (error) {\r\n    logger.error(\"\\n\")\r\n  }\r\n}\r\n\r\nexport async function getRegistryThemes() {\r\n  try {\r\n    const [result] = await fetchRegistry([\"themes/index.json\"])\r\n\r\n    return stylesSchema.parse(result)\r\n  } catch (error) {\r\n    logger.error(\"\\n\")\r\n  }\r\n}\r\n","import { detect } from \"@antfu/ni\"\r\n\r\nexport async function getPackageManager(\r\n  targetDir: string,\r\n  { withFallback }: { withFallback?: boolean } = {\r\n    withFallback: false,\r\n  }\r\n): Promise<\"yarn\" | \"pnpm\" | \"bun\" | \"npm\" | \"deno\"> {\r\n  const packageManager = await detect({ programmatic: true, cwd: targetDir })\r\n\r\n  if (packageManager === \"yarn@berry\") return \"yarn\"\r\n  if (packageManager === \"pnpm@6\") return \"pnpm\"\r\n  if (packageManager === \"bun\") return \"bun\"\r\n  if (packageManager === \"deno\") return \"deno\"\r\n  if (!withFallback) {\r\n    return packageManager ?? \"npm\"\r\n  }\r\n\r\n  // Fallback to user agent if not detected.\r\n  const userAgent = process.env.npm_config_user_agent || \"\"\r\n\r\n  if (userAgent.startsWith(\"yarn\")) {\r\n    return \"yarn\"\r\n  }\r\n\r\n  if (userAgent.startsWith(\"pnpm\")) {\r\n    return \"pnpm\"\r\n  }\r\n\r\n  if (userAgent.startsWith(\"bun\")) {\r\n    return \"bun\"\r\n  }\r\n\r\n  return \"npm\"\r\n}\r\n\r\nexport async function getPackageRunner(cwd: string) {\r\n  const packageManager = await getPackageManager(cwd)\r\n\r\n  if (packageManager === \"pnpm\") return \"pnpm dlx\"\r\n\r\n  if (packageManager === \"bun\") return \"bunx\"\r\n\r\n  return \"npx\"\r\n}\r\n","import os from \"os\"\r\nimport path from \"path\"\r\nimport { execa } from \"execa\"\r\nimport fs from \"fs-extra\"\r\n\r\nimport { spinner } from \"../utils/spinner\"\r\n\r\nconst GITHUB_TEMPLATE_URL =\r\n  \"https://codeload.github.com/shadcn-ui/ui/tar.gz/main\"\r\n\r\nexport default async function createViteProject(\r\n  projectPath: string,\r\n  options: {\r\n    packageManager: string\r\n  }\r\n) {\r\n  const createSpinner = spinner(\r\n    `Creating a new Vite project. This may take a few minutes.`\r\n  ).start()\r\n\r\n  try {\r\n    // Get the template.\r\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\r\n    await fs.ensureDir(templatePath)\r\n    const response = await fetch(GITHUB_TEMPLATE_URL)\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to download template: ${response.statusText}`)\r\n    }\r\n\r\n    // Write the tar file.\r\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\r\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\r\n    await execa(\"tar\", [\r\n      \"-xzf\",\r\n      tarPath,\r\n      \"-C\",\r\n      templatePath,\r\n      \"--strip-components=2\",\r\n      \"ui-main/templates/vite-app\",\r\n    ])\r\n    const extractedPath = path.resolve(templatePath, \"vite-app\")\r\n    await fs.move(extractedPath, projectPath)\r\n    await fs.remove(templatePath)\r\n\r\n    // Remove pnpm-lock.yaml if using a different package manager.\r\n    if (options.packageManager !== \"pnpm\") {\r\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\r\n      if (fs.existsSync(lockFilePath)) {\r\n        await fs.remove(lockFilePath)\r\n      }\r\n    }\r\n\r\n    // Run install.\r\n    await execa(options.packageManager, [\"install\"], {\r\n      cwd: projectPath,\r\n    })\r\n\r\n    // Write project name to the package.json.\r\n    const packageJsonPath = path.join(projectPath, \"package.json\")\r\n    if (fs.existsSync(packageJsonPath)) {\r\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\r\n      const packageJson = JSON.parse(packageJsonContent)\r\n      packageJson.name = projectPath.split(\"/\").pop()\r\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\r\n    }\r\n\r\n    // Try git init.\r\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\r\n      cwd: projectPath,\r\n    })\r\n\r\n    createSpinner?.succeed(\"Creating a new Vite project.\")\r\n  } catch (error) {\r\n    createSpinner?.fail(\"Something went wrong creating a new Vite project.\")\r\n  }\r\n}\r\n","import path from \"path\"\r\nimport { initOptionsSchema } from \"@/src/commands/init\"\r\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport fs from \"fs-extra\"\r\nimport prompts from \"prompts\"\r\nimport { z } from \"zod\"\r\n\r\nimport createViteProject from \"../templates/create-vite-project\"\r\nimport { logger } from \"./logger\"\r\n\r\nexport const TEMPLATES = {\r\n  next: \"next\",\r\n  \"next-monorepo\": \"next-monorepo\",\r\n  vite: \"vite\",\r\n  start: \"start\",\r\n} as const\r\n\r\nexport async function createProject(\r\n  options: Pick<z.infer<typeof initOptionsSchema>, \"cwd\" | \"srcDir\" | \"name\">\r\n) {\r\n  options = {\r\n    srcDir: false,\r\n    ...options,\r\n  }\r\n\r\n  let template: keyof typeof TEMPLATES = \"vite\"\r\n  let projectName: string = \"my-app\"\r\n\r\n  const { type, name } = await prompts([\r\n    {\r\n      type: \"select\",\r\n      name: \"type\",\r\n      message: `The path ${highlighter.info(\r\n        options.cwd\r\n      )} does not contain a package.json file.\\n   Would you like to start a new vite project?`,\r\n      choices: [\r\n        { title: \"Yes, create a new vite project\", value: \"vite\" },\r\n        { title: \"No, exit and create a project manually\", value: \"exit\" },\r\n      ],\r\n      initial: 0,\r\n    },\r\n    {\r\n      type: options.name ? null : \"text\",\r\n      name: \"name\",\r\n      message: \"What is your project named?\",\r\n      initial: projectName,\r\n      format: (value: string) => value.trim(),\r\n      validate: (value: string) =>\r\n        value.length > 128 ? \"Name should be less than 128 characters.\" : true,\r\n    },\r\n  ])\r\n\r\n  template = type ?? template\r\n  projectName = name ?? projectName\r\n\r\n  const packageManager = await getPackageManager(options.cwd, {\r\n    withFallback: true,\r\n  })\r\n  const projectPath = `${options.cwd}/${projectName}`\r\n\r\n  // Check if path is writable.\r\n  try {\r\n    await fs.access(options.cwd, fs.constants.W_OK)\r\n  } catch (error) {\r\n    logger.break()\r\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\r\n    logger.error(\r\n      `It is likely you don't have permissions for this folder or the paths ${highlighter.info(\r\n        options.cwd\r\n      )} does not exist.`\r\n    )\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\r\n    logger.break()\r\n    logger.error(\r\n      `A project with the name ${highlighter.info(projectName)} already exists.`\r\n    )\r\n    logger.error(`Please choose a different name and try again.`)\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  await createViteProject(projectPath, {\r\n    packageManager,\r\n  })\r\n\r\n  return {\r\n    projectPath,\r\n    projectName,\r\n    template,\r\n  }\r\n}\r\n","import { existsSync } from \"fs\";\r\nimport { join } from \"path\";\r\nimport { logger } from \"./logger\";\r\n\r\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\r\n  try {\r\n    const { config } = await import(\"@dotenvx/dotenvx\");\r\n    const envFiles = [\r\n      \".env.local\",\r\n      \".env.development.local\",\r\n      \".env.development\",\r\n      \".env\",\r\n    ]\r\n\r\n    for (const envFile of envFiles) {\r\n      const envPath = join(cwd, envFile);\r\n      if (existsSync(envPath)) {\r\n        config({\r\n          path: envPath,\r\n          overload: false,\r\n          quiet: true\r\n        });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    logger.warn(\"Failed to load env files:\", error);\r\n  }\r\n}\r\n","// Error codes for programmatic error handling\r\nexport const RegistryErrorCode = {\r\n  // Network errors\r\n  NETWORK_ERROR: \"NETWORK_ERROR\",\r\n  NOT_FOUND: \"NOT_FOUND\",\r\n  UNAUTHORIZED: \"UNAUTHORIZED\",\r\n  FORBIDDEN: \"FORBIDDEN\",\r\n  FETCH_ERROR: \"FETCH_ERROR\",\r\n\r\n  // Configuration errors\r\n  NOT_CONFIGURED: \"NOT_CONFIGURED\",\r\n  INVALID_CONFIG: \"INVALID_CONFIG\",\r\n  MISSING_ENV_VARS: \"MISSING_ENV_VARS\",\r\n\r\n  // File system errors\r\n  LOCAL_FILE_ERROR: \"LOCAL_FILE_ERROR\",\r\n\r\n  // Parsing errors\r\n  PARSE_ERROR: \"PARSE_ERROR\",\r\n  VALIDATION_ERROR: \"VALIDATION_ERROR\",\r\n\r\n  // Generic errors\r\n  UNKNOWN_ERROR: \"UNKNOWN_ERROR\",\r\n} as const\r\n\r\nexport type RegistryErrorCode =\r\n  (typeof RegistryErrorCode)[keyof typeof RegistryErrorCode]\r\n\r\nexport class RegistryError extends Error {\r\n  public readonly code: RegistryErrorCode\r\n  public readonly statusCode?: number\r\n  public readonly context?: Record<string, unknown>\r\n  public readonly suggestion?: string\r\n  public readonly timestamp: Date\r\n  public readonly cause?: unknown\r\n\r\n  constructor(\r\n    message: string,\r\n    options: {\r\n      code?: RegistryErrorCode\r\n      statusCode?: number\r\n      cause?: unknown\r\n      context?: Record<string, unknown>\r\n      suggestion?: string\r\n    } = {}\r\n  ) {\r\n    super(message)\r\n    this.name = \"RegistryError\"\r\n    this.code = options.code || RegistryErrorCode.UNKNOWN_ERROR\r\n    this.statusCode = options.statusCode\r\n    this.cause = options.cause\r\n    this.context = options.context\r\n    this.suggestion = options.suggestion\r\n    this.timestamp = new Date()\r\n\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(this, this.constructor)\r\n    }\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n      message: this.message,\r\n      code: this.code,\r\n      statusCode: this.statusCode,\r\n      context: this.context,\r\n      suggestion: this.suggestion,\r\n      timestamp: this.timestamp,\r\n      stack: this.stack,\r\n    }\r\n  }\r\n}\r\n","import { RegistryError } from \"@/src/registry/errors\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport { logger } from \"@/src/utils/logger\"\r\nimport { z } from \"zod\"\r\n\r\nexport function handleError(error: unknown) {\r\n  logger.break()\r\n  logger.error(\r\n    `Something went wrong. Please check the error below for more details.`\r\n  )\r\n  logger.error(`If the problem persists, please open an issue on GitHub.`)\r\n  logger.error(\"\")\r\n  if (typeof error === \"string\") {\r\n    logger.error(error)\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  if (error instanceof RegistryError) {\r\n    if (error.message) {\r\n      logger.error(error.cause ? \"Error:\" : \"Message:\")\r\n      logger.error(error.message)\r\n    }\r\n\r\n    if (error.cause) {\r\n      logger.error(\"\\nMessage:\")\r\n      logger.error(error.cause)\r\n    }\r\n\r\n    if (error.suggestion) {\r\n      logger.error(\"\\nSuggestion:\")\r\n      logger.error(error.suggestion)\r\n    }\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  if (error instanceof z.ZodError) {\r\n    logger.error(\"Validation failed:\")\r\n    for (const [key, value] of Object.entries(error.flatten().fieldErrors)) {\r\n      logger.error(`- ${highlighter.info(key)}: ${value}`)\r\n    }\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  if (error instanceof Error) {\r\n    logger.error(error.message)\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  logger.break()\r\n  process.exit(1)\r\n}\r\n","import { promises as fs } from \"fs\"\r\nimport path from \"path\"\r\nimport { preflightInit } from \"@/src/preflights/preflight-init\"\r\nimport { getRegistryStyles, getRegistryThemes } from \"@/src/registry/api\"\r\nimport { rawConfigSchema } from \"@/src/schema\"\r\nimport { createProject } from \"@/src/utils/create-project\"\r\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\r\nimport * as ERRORS from \"@/src/utils/errors\"\r\nimport { Config, getConfig, resolveConfigPaths } from \"@/src/utils/get-config\"\r\nimport { getProjectConfig, getProjectInfo } from \"@/src/utils/get-project-info\"\r\nimport { handleError } from \"@/src/utils/handle-error\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport { logger } from \"@/src/utils/logger\"\r\nimport { Command } from \"commander\"\r\nimport deepmerge from \"deepmerge\"\r\nimport prompts from \"prompts\"\r\nimport { z } from \"zod\"\r\n\r\nimport { BUILTIN_REGISTRIES } from \"../registry/constants\"\r\nimport { spinner } from \"../utils/spinner\"\r\n\r\nprocess.on(\"exit\", (code) => {\r\n  const filePath = path.resolve(process.cwd(), \"uidesu.config.json\")\r\n\r\n  if (code === 0) {\r\n    logger.info(`✓ uidesu initialized successfully!`)\r\n  }\r\n  logger.info(`Configuration file created at:\\n${filePath}`)\r\n})\r\n\r\nexport const initOptionsSchema = z.object({\r\n  cwd: z.string(),\r\n  name: z.string().optional(),\r\n  yes: z.boolean(),\r\n  srcDir: z.boolean().optional(),\r\n})\r\n\r\nexport const init = new Command()\r\n  .name(\"init\")\r\n  .description(\"initialize a uidesu in your project.\")\r\n  .option(\"-y, --yes\", \"skip prompts and use default values\", false)\r\n  .option(\r\n    \"-c, --cwd <cwd>\",\r\n    \"the working directory. defaults to the current directory.\",\r\n    process.cwd()\r\n  )\r\n  .option(\r\n    \"--src-dir\",\r\n    \"use the src directory when creating a new project.\",\r\n    false\r\n  )\r\n  .action(async (opts) => {\r\n    try {\r\n      const options = initOptionsSchema.parse({\r\n        cwd: path.resolve(opts.cwd),\r\n        ...opts,\r\n      })\r\n\r\n      await loadEnvFiles(options.cwd)\r\n\r\n      await runInit(options)\r\n\r\n      logger.log(\r\n        `${highlighter.success(\r\n          \"Success!\"\r\n        )} Project initialization completed.\\nYou may now add components.`\r\n      )\r\n    } catch (error) {\r\n      logger.break()\r\n      handleError(error)\r\n    }\r\n  })\r\n\r\nexport async function runInit(\r\n  options: z.infer<typeof initOptionsSchema> & {\r\n    skipPreflight?: boolean\r\n  }\r\n) {\r\n  let projectInfo\r\n  let newProjectTemplate\r\n  const preflight = await preflightInit(options)\r\n  if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\r\n    const { projectPath, template } = await createProject(options)\r\n    if (!projectPath) {\r\n      process.exit(1)\r\n    }\r\n    options.cwd = projectPath\r\n    newProjectTemplate = template\r\n    // Re-get project info for the newly created project.\r\n    projectInfo = await getProjectInfo(options.cwd)\r\n  } else {\r\n    projectInfo = preflight.projectInfo\r\n  }\r\n\r\n  const projectConfig = await getProjectConfig(options.cwd, projectInfo)\r\n\r\n  console.log(projectConfig)\r\n\r\n  let config = projectConfig\r\n    ? await promptForMinimalConfig(projectConfig, options)\r\n    : await promptForConfig(await getConfig(options.cwd))\r\n\r\n  if (!options.yes) {\r\n    const { proceed } = await prompts({\r\n      type: \"confirm\",\r\n      name: \"proceed\",\r\n      message: `Write configuration to ${highlighter.info(\r\n        \"uidesu.config.json\"\r\n      )}. Proceed?`,\r\n      initial: true,\r\n    })\r\n\r\n    if (!proceed) {\r\n      process.exit(0)\r\n    }\r\n  }\r\n\r\n  const fullConfigForRegistry = await resolveConfigPaths(options.cwd, config)\r\n  /* const { config: configWithRegistries } = await ensureRegistriesInConfig(\r\n    components,\r\n    fullConfigForRegistry,\r\n    {\r\n      silent: true,\r\n    }\r\n  ) */\r\n\r\n  const componentSpinner = spinner(\" Writing components.json\").start()\r\n  const targetPath = path.resolve(options.cwd, \"uidesu.config.json\")\r\n\r\n  const mergeConfig = (base: typeof config, override: object) => {\r\n    const { registries, ...merged } = deepmerge(base, override)\r\n    return { ...merged, registries } as typeof config\r\n  }\r\n\r\n  // Make sure to filter out built-in registries.\r\n  // TODO: fix this in ensureRegistriesInConfig.\r\n  config.registries = Object.fromEntries(\r\n    Object.entries(config.registries || {}).filter(\r\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\r\n    )\r\n  )\r\n\r\n  // Write uidesu.config.json\r\n  await fs.writeFile(targetPath, `${JSON.stringify(config, null, 2)}\\n`, \"utf8\")\r\n  componentSpinner.succeed()\r\n}\r\n\r\nasync function promptForConfig(defaultConfig: Config | null = null) {\r\n  const [styles, themes] = await Promise.all([\r\n    getRegistryStyles(),\r\n    getRegistryThemes(),\r\n  ])\r\n\r\n  logger.info(\"\")\r\n  const options = await prompts([\r\n    {\r\n      type: \"toggle\",\r\n      name: \"typescript\",\r\n      message: `Would you like to use ${highlighter.info(\r\n        \"TypeScript\"\r\n      )} (recommended)?`,\r\n      initial: defaultConfig?.tsx ?? true,\r\n      active: \"yes\",\r\n      inactive: \"no\",\r\n    },\r\n  ])\r\n\r\n  return rawConfigSchema.parse({\r\n    $schema: \"https://ui.aodesu.com/schema.json\",\r\n    tsx: options.typescript,\r\n  })\r\n}\r\n\r\nasync function promptForMinimalConfig(\r\n  defaultConfig: Config,\r\n  opts: z.infer<typeof initOptionsSchema>\r\n) {\r\n  let style = defaultConfig.style\r\n  let theme = defaultConfig.tailwind.theme\r\n  let cssVariables = defaultConfig.tailwind.cssVariables\r\n\r\n  return rawConfigSchema.parse({\r\n    $schema: defaultConfig?.$schema,\r\n    style,\r\n    tailwind: {\r\n      ...defaultConfig?.tailwind,\r\n      theme,\r\n      cssVariables,\r\n    },\r\n    tsx: defaultConfig?.tsx,\r\n    aliases: defaultConfig?.aliases,\r\n  })\r\n}\r\n","#!/usr/bin/env node\r\nimport { Command } from \"commander\";\r\nimport packageJson from \"../package.json\";\r\n// import { add } from \"./commands/add\";\r\nimport { build } from \"./commands/build\";\r\nimport { init } from \"./commands/init\";\r\n\r\nprocess.on(\"SIGNINT\", () => process.exit(0));\r\nprocess.on(\"SIGTERM\", () => process.exit(0));\r\n\r\nasync function main() {\r\n  const program = new Command()\r\n    .name(\"uidesu\")\r\n    .description(\"add items from registry to your project\")\r\n    .version(\r\n      packageJson.version || \"1.0.0\",\r\n      \"-v, --version\",\r\n      \"display the version number\"\r\n    )\r\n\r\n  program\r\n    .addCommand(init)\r\n    //.addCommand(add)\r\n    .addCommand(build)\r\n\r\n  program.parse()\r\n}\r\n\r\nmain()\r\n\r\n// export * from './registry/api';\r\n"]}