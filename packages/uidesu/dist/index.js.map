{"version":3,"sources":["../package.json","../src/utils/highlighter.ts","../src/utils/logger.ts","../src/commands/build.ts","../src/utils/frameworks.ts","../src/utils/get-project-info.ts","../src/utils/spinner.ts","../src/preflights/preflight-init.ts","../src/utils/get-package-manager.ts","../src/templates/create-vite-project.ts","../src/utils/create-project.ts","../src/utils/env-loader.ts","../src/commands/init.ts","../src/index.ts"],"names":["package_default","highlighter","red","yellow","cyan","green","logger","args","z","build","Command","registryFile","opts","cwd","path","outputDir","registryPath","registryContent","fs","registry","registrySchema","index","item","error","err","FRAMEWORKS","PROJECT_SHARED_IGNORE","getProjectInfo","configFiles","isSrcDir","aliasPrefix","fg","getTsConfigAliasPrefix","isUsingAppDir","type","file","tsConfig","loadConfig","alias","paths","spinner","text","options","ora","preflightInit","errors","projectSpinner","frameworkSpinner","projectInfo","getPackageManager","targetDir","withFallback","packageManager","detect","userAgent","GITHUB_TEMPLATE_URL","createViteProject","projectPath","createSpinner","templatePath","os","response","tarPath","execa","extractedPath","lockFilePath","packageJsonPath","packageJsonContent","packageJson","createProject","template","projectName","name","prompts","value","loadEnvFiles","config","envFiles","envFile","envPath","join","existsSync","code","filePath","initOptionsSchema","init","runInit","preflight","main","program"],"mappings":"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","file":"index.js","sourcesContent":["{\r\n  \"name\": \"uidesu\",\r\n  \"version\": \"1.0.0\",\r\n  \"description\": \"Add components to your apps.\",\r\n  \"publishConfig\": {\r\n    \"access\": \"public\"\r\n  },\r\n  \"license\": \"MIT\",\r\n  \"author\": {\r\n    \"name\": \"sergiocortes-dll\",\r\n    \"url\": \"https://x.com/sergiocortes-dll\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"https://github.com/aodesu-org/uidesu\",\r\n    \"directory\": \"packages/uidesu\"\r\n  },\r\n  \"files\": [\r\n    \"dist\"\r\n  ],\r\n  \"keywords\": [\r\n    \"components\",\r\n    \"ui\",\r\n    \"tailwind\",\r\n    \"radix-ui\",\r\n    \"uidesu\"\r\n  ],\r\n  \"type\": \"module\",\r\n  \"exports\": {\r\n    \".\": {\r\n      \"types\": \"./dist/index.d.ts\",\r\n      \"default\": \"./dist/index.js\"\r\n    },\r\n    \"./schema\": {\r\n      \"types\": \"./dist/schema/index.d.ts\",\r\n      \"default\": \"./dist/schema/index.js\"\r\n    },\r\n    \"./utils\": {\r\n      \"types\": \"./dist/utils/index.d.ts\",\r\n      \"default\": \"./dist/utils/index.js\"\r\n    },\r\n    \"./tailwind.css\": {\r\n      \"style\": \"./dist/tailwind.css\"\r\n    }\r\n  },\r\n  \"bin\": \"./dist/index.js\",\r\n  \"scripts\": {\r\n    \"dev\": \"tsup --watch\",\r\n    \"start:dev\": \"cross-env REGISTRY_URL=http://localhost:4000/r node dist/index.js\"\r\n  },\r\n  \"dependencies\": {\r\n    \"@antfu/ni\": \"^25.0.0\",\r\n    \"@babel/core\": \"^7.28.0\",\r\n    \"@babel/parser\": \"^7.28.0\",\r\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\r\n    \"@babel/preset-typescript\": \"^7.27.1\",\r\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\r\n    \"commander\": \"^14.0.0\",\r\n    \"cosmiconfig\": \"^9.0.0\",\r\n    \"deepmerge\": \"^4.3.1\",\r\n    \"execa\": \"^9.6.0\",\r\n    \"fast-glob\": \"^3.3.3\",\r\n    \"fs-extra\": \"^11.3.1\",\r\n    \"https-proxy-agent\": \"^7.0.6\",\r\n    \"kleur\": \"^4.1.5\",\r\n    \"node-fetch\": \"^3.3.2\",\r\n    \"ora\": \"^8.2.0\",\r\n    \"postcss\": \"^8.5.6\",\r\n    \"prompts\": \"^2.4.2\",\r\n    \"recast\": \"^0.23.11\",\r\n    \"stringify-object\": \"^5.0.0\",\r\n    \"ts-morph\": \"^26.0.0\",\r\n    \"tsconfig-paths\": \"^4.2.0\",\r\n    \"zod\": \"^3.24.1\",\r\n    \"zod-to-json-schema\": \"3.24.6\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@types/babel__core\": \"^7.20.5\",\r\n    \"@types/fs-extra\": \"^11.0.4\",\r\n    \"@types/prompts\": \"^2.4.9\",\r\n    \"@types/stringify-object\": \"^4.0.5\",\r\n    \"rimraf\": \"^6.0.1\",\r\n    \"tsup\": \"^8.5.0\",\r\n    \"type-fest\": \"^4.41.0\",\r\n    \"typescript\": \"^5.9.2\"\r\n  }\r\n}\r\n","import { cyan, green, red, yellow } from \"kleur/colors\"\r\n\r\nexport const highlighter = {\r\n  error: red,\r\n  warn: yellow,\r\n  info: cyan,\r\n  success: green,\r\n}\r\n","import { highlighter } from \"@/src/utils/highlighter\"\r\n\r\nexport const logger = {\r\n  error(...args: unknown[]) {\r\n    console.log(highlighter.error(args.join(\" \")))\r\n  },\r\n  warn(...args: unknown[]) {\r\n    console.log(highlighter.warn(args.join(\" \")))\r\n  },\r\n  info(...args: unknown[]) {\r\n    console.log(highlighter.info(args.join(\" \")))\r\n  },\r\n  success(...args: unknown[]) {\r\n    console.log(highlighter.success(args.join(\" \")))\r\n  },\r\n  log(...args: unknown[]) {\r\n    console.log(args.join(\" \"))\r\n  },\r\n  break() {\r\n    console.log(\"\")\r\n  },\r\n}\r\n","import { Command } from \"commander\";\r\nimport { promises as fs } from \"fs\";\r\nimport path from \"path\";\r\nimport z from \"zod\";\r\nimport { registrySchema } from \"../registry/schema\";\r\nimport { logger } from \"../utils/logger\";\r\n\r\nexport const buildOptionsSchema = z.object({\r\n  cwd: z.string(),\r\n  registryFile: z.string(),\r\n  outputDir: z.string(),\r\n});\r\n\r\nexport const build = new Command()\r\n  .name(\"build\")\r\n  .description(\"build components for a aodesu registry\")\r\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\r\n  .option(\r\n    \"-o, --output <path>\",\r\n    \"destination directory for json files\",\r\n    \"./public/r\"\r\n  )\r\n  .option(\r\n    \"-c, --cwd <cwd>\",\r\n    \"the working directory. defaults to the current directory.\",\r\n    process.cwd()\r\n  )\r\n  .action(async (registryFile: string, opts) => {\r\n    try {\r\n      const cwd = path.resolve(opts.cwd);\r\n      const outputDir = path.resolve(cwd, opts.output);\r\n      const registryPath = path.resolve(cwd, registryFile);\r\n\r\n      // Read and parse registry\r\n      const registryContent = await fs.readFile(registryPath, \"utf-8\");\r\n      const registry = registrySchema.parse(JSON.parse(registryContent));\r\n\r\n      // Create output directory\r\n      await fs.mkdir(outputDir, { recursive: true });\r\n\r\n      // Generate index file with all items\r\n      const index = registry.items.map((item) => ({\r\n        name: item.name,\r\n        type: item.type,\r\n      }));\r\n\r\n      await fs.writeFile(\r\n        path.join(outputDir, \"index.json\"),\r\n        JSON.stringify(index, null, 2)\r\n      );\r\n\r\n      logger.info(`✓ Generated ${index.length} items`);\r\n      logger.info(`✓ Output directory: ${outputDir}`);\r\n    } catch (error) {\r\n      if (error instanceof z.ZodError) {\r\n        logger.error(\"Invalid registry.json format\");\r\n        error.errors.forEach((err) => {\r\n          logger.error(`  ${err.path.join(\".\")}: ${err.message}`);\r\n        });\r\n      } else if (error instanceof Error) {\r\n        logger.error(error.message);\r\n      } else {\r\n        logger.error(\"Unknown error occurred\");\r\n      }\r\n      process.exit(1);\r\n    }\r\n  });\r\n","export const FRAMEWORKS = {\r\n  \"next-app\": {\r\n    name: \"next-app\",\r\n    label: \"Next.js\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/next\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\r\n    },\r\n  },\r\n  \"next-pages\": {\r\n    name: \"next-pages\",\r\n    label: \"Next.js\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/next\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\r\n    },\r\n  },\r\n  vite: {\r\n    name: \"vite\",\r\n    label: \"Vite\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/vite\",\r\n      tailwind: \"https://tailwindcss.com/docs/guides/vite\",\r\n    },\r\n  },\r\n  manual: {\r\n    name: \"manual\",\r\n    label: \"Manual\",\r\n    links: {\r\n      installation: \"https://ui.uidesu.com/docs/installation/manual\",\r\n      tailwind: \"https://tailwindcss.com/docs/installation\",\r\n    },\r\n  },\r\n}\r\n\r\nexport type Framework = (typeof FRAMEWORKS)[keyof typeof FRAMEWORKS]\r\n","import path from \"path\"\r\nimport { FRAMEWORKS, Framework } from \"@/src/utils/frameworks\"\r\nimport fg from \"fast-glob\"\r\nimport fs from \"fs-extra\"\r\nimport { loadConfig } from \"tsconfig-paths\"\r\n\r\nexport type ProjectInfo = {\r\n  framework: Framework\r\n  isSrcDir: boolean\r\n  aliasPrefix: string | null\r\n}\r\n\r\nconst PROJECT_SHARED_IGNORE = [\r\n  \"**/node_modules/**\",\r\n  \".next\",\r\n  \"public\",\r\n  \"dist\",\r\n  \"build\",\r\n]\r\n\r\nexport async function getProjectInfo(cwd: string): Promise<ProjectInfo | null> {\r\n  const [configFiles, isSrcDir, aliasPrefix] = await Promise.all([\r\n    fg.glob(\r\n      \"**/{next,vite,astro,app}.config.*|gatsby-config.*|composer.json|react-router.config.*\",\r\n      {\r\n        cwd,\r\n        deep: 3,\r\n        ignore: PROJECT_SHARED_IGNORE,\r\n      }\r\n    ),\r\n    fs.pathExists(path.resolve(cwd, \"src\")),\r\n    getTsConfigAliasPrefix(cwd),\r\n  ])\r\n\r\n  const isUsingAppDir = await fs.pathExists(\r\n    path.resolve(cwd, `${isSrcDir ? \"src/\" : \"\"}app`)\r\n  )\r\n\r\n  const type: ProjectInfo = {\r\n    framework: FRAMEWORKS[\"manual\"],\r\n    isSrcDir,\r\n    aliasPrefix,\r\n  }\r\n\r\n  // Next.js.\r\n  if (configFiles.find((file) => file.startsWith(\"next.config.\"))?.length) {\r\n    type.framework = isUsingAppDir\r\n      ? FRAMEWORKS[\"next-app\"]\r\n      : FRAMEWORKS[\"next-pages\"]\r\n    return type\r\n  }\r\n\r\n  // Vite.\r\n  // Some Remix templates also have a vite.config.* file.\r\n  // We'll assume that it got caught by the Remix check above.\r\n  if (configFiles.find((file) => file.startsWith(\"vite.config.\"))?.length) {\r\n    type.framework = FRAMEWORKS[\"vite\"]\r\n    return type\r\n  }\r\n\r\n  return type\r\n}\r\n\r\nexport async function getTsConfigAliasPrefix(cwd: string) {\r\n  const tsConfig = await loadConfig(cwd)\r\n\r\n  if (\r\n    tsConfig?.resultType === \"failed\" ||\r\n    !Object.entries(tsConfig?.paths).length\r\n  ) {\r\n    return null\r\n  }\r\n\r\n  // This assume that the first alias is the prefix.\r\n  for (const [alias, paths] of Object.entries(tsConfig.paths)) {\r\n    if (\r\n      paths.includes(\"./*\") ||\r\n      paths.includes(\"./src/*\") ||\r\n      paths.includes(\"./app/*\") ||\r\n      paths.includes(\"./resources/js/*\") // Laravel.\r\n    ) {\r\n      return alias.replace(/\\/\\*$/, \"\") ?? null\r\n    }\r\n  }\r\n\r\n  // Use the first alias as the prefix.\r\n  return Object.keys(tsConfig?.paths)?.[0].replace(/\\/\\*$/, \"\") ?? null\r\n}\r\n","import ora, { type Options } from \"ora\"\r\n\r\nexport function spinner(\r\n  text: Options[\"text\"],\r\n  options?: {\r\n    silent?: boolean\r\n  }\r\n) {\r\n  return ora({\r\n    text,\r\n    isSilent: options?.silent,\r\n  })\r\n}\r\n","import path from \"path\"\r\nimport { initOptionsSchema } from \"@/src/commands/init\"\r\nimport * as ERRORS from \"@/src/utils/errors\"\r\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport { logger } from \"@/src/utils/logger\"\r\nimport { spinner } from \"@/src/utils/spinner\"\r\nimport fs from \"fs-extra\"\r\nimport { z } from \"zod\"\r\n\r\nexport async function preflightInit(\r\n  options: z.infer<typeof initOptionsSchema>\r\n) {\r\n  const errors: Record<string, boolean> = {}\r\n\r\n  if (\r\n    !fs.existsSync(options.cwd) ||\r\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\r\n  ) {\r\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\r\n    return {\r\n      errors,\r\n      ProjectInfo: null,\r\n    }\r\n  }\r\n\r\n  const projectSpinner = spinner(\"Preflight checks.\").start()\r\n\r\n  if (fs.existsSync(path.resolve(options.cwd, \"uidesu.config.json\"))) {\r\n    projectSpinner?.fail()\r\n    logger.break()\r\n    logger.error(\r\n      `A ${highlighter.info(\r\n        \"uidesu.config.json\"\r\n      )} file already exists at ${highlighter.info(\r\n        options.cwd\r\n      )}.\\nTo start over, remove the ${highlighter.info(\r\n        \"uidesu.config.json\"\r\n      )} file and run ${highlighter.info(\"uidesu init\")} again.`\r\n    )\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  projectSpinner?.succeed()\r\n\r\n  const frameworkSpinner = spinner(\"Verifying framework.\").start()\r\n  const projectInfo = await getProjectInfo(options.cwd)\r\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\r\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true\r\n    frameworkSpinner?.fail()\r\n    logger.break()\r\n\r\n    if (projectInfo?.framework.links.installation) {\r\n      logger.error(\r\n        `We could not detect a supported framework at ${highlighter.info(\r\n          options.cwd\r\n        )}.\\n` +\r\n          `Visit ${highlighter.info(\r\n            projectInfo?.framework.links.installation\r\n          )} to manually configure your project.\\nOnce configured, you can use the cli to add components.`\r\n      )\r\n    }\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n  frameworkSpinner?.succeed(\r\n    `Verifying framework. Found ${highlighter.info(\r\n      projectInfo.framework.label\r\n    )}.`\r\n  )\r\n\r\n  return {\r\n    errors,\r\n    projectInfo,\r\n  }\r\n}\r\n","import { detect } from \"@antfu/ni\"\r\n\r\nexport async function getPackageManager(\r\n  targetDir: string,\r\n  { withFallback }: { withFallback?: boolean } = {\r\n    withFallback: false,\r\n  }\r\n): Promise<\"yarn\" | \"pnpm\" | \"bun\" | \"npm\" | \"deno\"> {\r\n  const packageManager = await detect({ programmatic: true, cwd: targetDir })\r\n\r\n  if (packageManager === \"yarn@berry\") return \"yarn\"\r\n  if (packageManager === \"pnpm@6\") return \"pnpm\"\r\n  if (packageManager === \"bun\") return \"bun\"\r\n  if (packageManager === \"deno\") return \"deno\"\r\n  if (!withFallback) {\r\n    return packageManager ?? \"npm\"\r\n  }\r\n\r\n  // Fallback to user agent if not detected.\r\n  const userAgent = process.env.npm_config_user_agent || \"\"\r\n\r\n  if (userAgent.startsWith(\"yarn\")) {\r\n    return \"yarn\"\r\n  }\r\n\r\n  if (userAgent.startsWith(\"pnpm\")) {\r\n    return \"pnpm\"\r\n  }\r\n\r\n  if (userAgent.startsWith(\"bun\")) {\r\n    return \"bun\"\r\n  }\r\n\r\n  return \"npm\"\r\n}\r\n\r\nexport async function getPackageRunner(cwd: string) {\r\n  const packageManager = await getPackageManager(cwd)\r\n\r\n  if (packageManager === \"pnpm\") return \"pnpm dlx\"\r\n\r\n  if (packageManager === \"bun\") return \"bunx\"\r\n\r\n  return \"npx\"\r\n}\r\n","import os from \"os\"\r\nimport path from \"path\"\r\nimport { execa } from \"execa\"\r\nimport fs from \"fs-extra\"\r\n\r\nimport { spinner } from \"../utils/spinner\"\r\n\r\nconst GITHUB_TEMPLATE_URL =\r\n  \"https://codeload.github.com/shadcn-ui/ui/tar.gz/main\"\r\n\r\nexport default async function createViteProject(\r\n  projectPath: string,\r\n  options: {\r\n    packageManager: string\r\n  }\r\n) {\r\n  const createSpinner = spinner(\r\n    `Creating a new Vite project. This may take a few minutes.`\r\n  ).start()\r\n\r\n  try {\r\n    // Get the template.\r\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\r\n    await fs.ensureDir(templatePath)\r\n    const response = await fetch(GITHUB_TEMPLATE_URL)\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to download template: ${response.statusText}`)\r\n    }\r\n\r\n    // Write the tar file.\r\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\r\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\r\n    await execa(\"tar\", [\r\n      \"-xzf\",\r\n      tarPath,\r\n      \"-C\",\r\n      templatePath,\r\n      \"--strip-components=2\",\r\n      \"ui-main/templates/vite-app\",\r\n    ])\r\n    const extractedPath = path.resolve(templatePath, \"vite-app\")\r\n    await fs.move(extractedPath, projectPath)\r\n    await fs.remove(templatePath)\r\n\r\n    // Remove pnpm-lock.yaml if using a different package manager.\r\n    if (options.packageManager !== \"pnpm\") {\r\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\r\n      if (fs.existsSync(lockFilePath)) {\r\n        await fs.remove(lockFilePath)\r\n      }\r\n    }\r\n\r\n    // Run install.\r\n    await execa(options.packageManager, [\"install\"], {\r\n      cwd: projectPath,\r\n    })\r\n\r\n    // Write project name to the package.json.\r\n    const packageJsonPath = path.join(projectPath, \"package.json\")\r\n    if (fs.existsSync(packageJsonPath)) {\r\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\r\n      const packageJson = JSON.parse(packageJsonContent)\r\n      packageJson.name = projectPath.split(\"/\").pop()\r\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\r\n    }\r\n\r\n    // Try git init.\r\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\r\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\r\n      cwd: projectPath,\r\n    })\r\n\r\n    createSpinner?.succeed(\"Creating a new Vite project.\")\r\n  } catch (error) {\r\n    createSpinner?.fail(\"Something went wrong creating a new Vite project.\")\r\n  }\r\n}\r\n","import path from \"path\"\r\nimport { initOptionsSchema } from \"@/src/commands/init\"\r\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\r\nimport { highlighter } from \"@/src/utils/highlighter\"\r\nimport fs from \"fs-extra\"\r\nimport prompts from \"prompts\"\r\nimport { z } from \"zod\"\r\n\r\nimport createViteProject from \"../templates/create-vite-project\"\r\nimport { logger } from \"./logger\"\r\n\r\nexport const TEMPLATES = {\r\n  next: \"next\",\r\n  \"next-monorepo\": \"next-monorepo\",\r\n  vite: \"vite\",\r\n  start: \"start\",\r\n} as const\r\n\r\nexport async function createProject(\r\n  options: Pick<z.infer<typeof initOptionsSchema>, \"cwd\" | \"srcDir\" | \"name\">\r\n) {\r\n  options = {\r\n    srcDir: false,\r\n    ...options,\r\n  }\r\n\r\n  let template: keyof typeof TEMPLATES = \"vite\"\r\n  let projectName: string = \"my-app\"\r\n\r\n  const { type, name } = await prompts([\r\n    {\r\n      type: \"select\",\r\n      name: \"type\",\r\n      message: `The path ${highlighter.info(\r\n        options.cwd\r\n      )} does not contain a package.json file.\\n   Would you like to start a new vite project?`,\r\n      choices: [\r\n        { title: \"Yes, create a new vite project\", value: \"vite\" },\r\n        { title: \"No, exit and create a project manually\", value: \"exit\" },\r\n      ],\r\n      initial: 0,\r\n    },\r\n    {\r\n      type: options.name ? null : \"text\",\r\n      name: \"name\",\r\n      message: \"What is your project named?\",\r\n      initial: projectName,\r\n      format: (value: string) => value.trim(),\r\n      validate: (value: string) =>\r\n        value.length > 128 ? \"Name should be less than 128 characters.\" : true,\r\n    },\r\n  ])\r\n\r\n  template = type ?? template\r\n  projectName = name ?? projectName\r\n\r\n  const packageManager = await getPackageManager(options.cwd, {\r\n    withFallback: true,\r\n  })\r\n  const projectPath = `${options.cwd}/${projectName}`\r\n\r\n  // Check if path is writable.\r\n  try {\r\n    await fs.access(options.cwd, fs.constants.W_OK)\r\n  } catch (error) {\r\n    logger.break()\r\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\r\n    logger.error(\r\n      `It is likely you don't have permissions for this folder or the paths ${highlighter.info(\r\n        options.cwd\r\n      )} does not exist.`\r\n    )\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\r\n    logger.break()\r\n    logger.error(\r\n      `A project with the name ${highlighter.info(projectName)} already exists.`\r\n    )\r\n    logger.error(`Please choose a different name and try again.`)\r\n    logger.break()\r\n    process.exit(1)\r\n  }\r\n\r\n  await createViteProject(projectPath, {\r\n    packageManager,\r\n  })\r\n\r\n  return {\r\n    projectPath,\r\n    projectName,\r\n    template,\r\n  }\r\n}\r\n","import { existsSync } from \"fs\";\r\nimport { join } from \"path\";\r\nimport { logger } from \"./logger\";\r\n\r\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\r\n  try {\r\n    const { config } = await import(\"@dotenvx/dotenvx\");\r\n    const envFiles = [\r\n      \".env.local\",\r\n      \".env.development.local\",\r\n      \".env.development\",\r\n      \".env\",\r\n    ]\r\n\r\n    for (const envFile of envFiles) {\r\n      const envPath = join(cwd, envFile);\r\n      if (existsSync(envPath)) {\r\n        config({\r\n          path: envPath,\r\n          overload: false,\r\n          quiet: true\r\n        });\r\n      }\r\n    }\r\n  } catch (error) {\r\n    logger.warn(\"Failed to load env files:\", error);\r\n  }\r\n}\r\n","import path from \"path\"\r\nimport { preflightInit } from \"@/src/preflights/preflight-init\"\r\nimport { createProject } from \"@/src/utils/create-project\"\r\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\r\nimport * as ERRORS from \"@/src/utils/errors\"\r\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\r\nimport { logger } from \"@/src/utils/logger\"\r\nimport { Command } from \"commander\"\r\nimport { z } from \"zod\"\r\n\r\nprocess.on(\"exit\", (code) => {\r\n  const filePath = path.resolve(process.cwd(), \"uidesu.config.json\")\r\n\r\n  if (code === 0) {\r\n    logger.info(`✓ uidesu initialized successfully!`)\r\n  }\r\n  logger.info(`Configuration file created at:\\n${filePath}`)\r\n})\r\n\r\nexport const initOptionsSchema = z.object({\r\n  cwd: z.string(),\r\n  name: z.string().optional(),\r\n  yes: z.boolean(),\r\n  srcDir: z.boolean().optional(),\r\n})\r\n\r\nexport const init = new Command()\r\n  .name(\"init\")\r\n  .description(\"initialize a uidesu in your project.\")\r\n  .option(\"-y, --yes\", \"skip prompts and use default values\", false)\r\n  .option(\r\n    \"-c, --cwd <cwd>\",\r\n    \"the working directory. defaults to the current directory.\",\r\n    process.cwd()\r\n  )\r\n  .option(\r\n    \"--src-dir\",\r\n    \"use the src directory when creating a new project.\",\r\n    false\r\n  )\r\n  .action(async (opts) => {\r\n    try {\r\n      const options = initOptionsSchema.parse({\r\n        cwd: path.resolve(opts.cwd),\r\n        ...opts,\r\n      })\r\n\r\n      await loadEnvFiles(options.cwd)\r\n\r\n      await runInit(options)\r\n\r\n      logger.success(`Initialized uidesu in directory: ${opts.cwd}`)\r\n      logger.break()\r\n    } catch (error) {\r\n      logger.break()\r\n    }\r\n  })\r\n\r\nexport async function runInit(\r\n  options: z.infer<typeof initOptionsSchema> & {\r\n    skipPreflight?: boolean\r\n  }\r\n) {\r\n  let projectInfo\r\n  let newProjectTemplate\r\n  const preflight = await preflightInit(options)\r\n  logger.info(\"Preflight checks completed.\\n\")\r\n  if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\r\n    const { projectPath, template } = await createProject(options)\r\n    if (!projectPath) {\r\n      process.exit(1)\r\n    }\r\n    options.cwd = projectPath\r\n    newProjectTemplate = template\r\n    // Re-get project info for the newly created project.\r\n    projectInfo = await getProjectInfo(options.cwd)\r\n  } else {\r\n    projectInfo = await getProjectInfo(options.cwd)\r\n  }\r\n}\r\n","#!/usr/bin/env node\r\nimport { Command } from \"commander\";\r\nimport packageJson from \"../package.json\";\r\n// import { add } from \"./commands/add\";\r\nimport { build } from \"./commands/build\";\r\nimport { init } from \"./commands/init\";\r\n\r\nprocess.on(\"SIGNINT\", () => process.exit(0));\r\nprocess.on(\"SIGTERM\", () => process.exit(0));\r\n\r\nasync function main() {\r\n  const program = new Command()\r\n    .name(\"uidesu\")\r\n    .description(\"add items from registry to your project\")\r\n    .version(\r\n      packageJson.version || \"1.0.0\",\r\n      \"-v, --version\",\r\n      \"display the version number\"\r\n    )\r\n\r\n  program\r\n    .addCommand(init)\r\n    //.addCommand(add)\r\n    .addCommand(build)\r\n\r\n  program.parse()\r\n}\r\n\r\nmain()\r\n\r\n// export * from './registry/api';\r\n"]}