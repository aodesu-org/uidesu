{"version":3,"sources":["../package.json","../src/registry/errors.ts","../src/utils/highlighter.ts","../src/utils/logger.ts","../src/utils/handle-error.ts","../src/registry/constants.ts","../src/registry/env.ts","../src/registry/parser.ts","../src/utils/frameworks.ts","../src/utils/resolve-import.ts","../src/utils/get-config.ts","../src/utils/get-package-info.ts","../src/utils/get-project-info.ts","../src/utils/compare.ts","../src/utils/env-helpers.ts","../src/utils/spinner.ts","../src/utils/transformers/transform-css-vars.ts","../src/utils/icon-libraries.ts","../src/utils/transformers/transform-icons.ts","../src/utils/transformers/transform-import.ts","../src/utils/transformers/transform-jsx.ts","../src/utils/transformers/transform-rsc.ts","../src/utils/transformers/transform-tw-prefix.ts","../src/utils/transformers/index.ts","../src/utils/transformers/transform-next.ts","../src/utils/updaters/update-files.ts","../src/registry/utils.ts","../src/registry/config.ts","../src/registry/context.ts","../src/registry/validator.ts","../src/registry/builder.ts","../src/registry/fetcher.ts","../src/utils/updaters/update-tailwind-config.ts","../src/registry/resolver.ts","../src/registry/api.ts","../src/utils/is-safe-target.ts","../src/utils/updaters/update-css.ts","../src/utils/updaters/update-css-vars.ts","../src/utils/get-package-manager.ts","../src/utils/updaters/update-dependencies.ts","../src/utils/updaters/update-env-vars.ts","../src/utils/add-components.ts","../src/utils/env-loader.ts","../src/registry/namespaces.ts","../src/utils/registries.ts","../src/commands/add.ts","../src/preflights/preflight-build.ts","../src/commands/build.ts","../src/preflights/preflight-init.ts","../src/utils/create-project.ts","../src/utils/file-helper.ts","../src/commands/init.ts","../src/index.ts"],"names":["package_default","RegistryErrorCode","RegistryError","message","options","RegistryNotFoundError","url","cause","RegistryUnauthorizedError","RegistryForbiddenError","RegistryFetchError","statusCode","responseBody","baseMessage","suggestion","RegistryNotConfiguredError","registryName","RegistryLocalFileError","filePath","RegistryParseError","item","parseError","z","e","RegistryMissingEnvironmentVariablesError","missingVars","v","RegistriesIndexParseError","invalidNamespaces","i","arr","highlighter","red","yellow","cyan","green","logger","args","handleError","error","key","value","REGISTRY_URL","FALLBACK_STYLE","BASE_COLORS","BUILTIN_REGISTRIES","expandEnvVars","_match","extractEnvVars","vars","regex","match","REGISTRY_PATTERN","parseRegistryAndItemFromString","name","FRAMEWORKS","resolveImport","importPath","config","createMatchPath","explorer","cosmiconfig","getConfig","cwd","getRawConfig","resolveConfigPaths","tsConfig","loadConfig","configSchema","path","configResult","rawConfigSchema","componentPath","getWorkspaceConfig","resolvedAliases","isAliasKey","resolvedPath","packageRoot","findPackageRoot","result","workspaceConfigSchema","commonRoot","findCommonRoot","relativePath","matchingPackageRoot","fg","pkgPath","pkgDir","parts1","parts2","commonParts","getTargetStyleFromConfig","fallback","getProjectInfo","createConfig","partial","defaultConfig","getPackageInfo","shouldThrow","packageJsonPath","fs","PROJECT_SHARED_IGNORE","configFiles","isSrcDir","isTsx","tailwindConfigFile","tailwindCssFile","tailwindVersion","aliasPrefix","packageJson","isTypeScriptProject","getTailwindConfigFile","getTailwindCssFile","getTailwindVersion","getTsConfigAliasPrefix","isUsingAppDir","type","file","getFrameworkVersion","framework","version","versionMatch","rangeMatch","packageInfo","files","contents","alias","paths","getProjectConfig","defaultProjectInfo","existingConfig","projectInfo","getProjectTailwindVersionFromConfig","isContentSame","existingContent","newContent","ignoreImports","normalizedExisting","normalizedNew","importRegex","normalizeImports","content","prefix","suffix","parts","lastPart","existingNormalized","newNormalized","isEnvFile","fileName","findExistingEnvFile","targetDir","variants","variant","existsSync","parseEnvContent","lines","env","line","trimmed","equalIndex","getNewEnvKeys","existingEnv","newEnv","newKeys","mergeEnvContent","spinner","text","ora","transformCssVars","sourceFile","baseColor","SyntaxKind","node","raw","mapped","applyColorMapping","splitClassName","className","rest","alpha","split","PREFIXES","input","mapping","classNames","lightMode","darkMode","modifier","needle","ICON_LIBRARIES","SOURCE_LIBRARY","transformIcons","registryIcons","getRegistryIcons","sourceLibrary","targetLibrary","targetedIcons","importDeclaration","specifier","iconName","targetedIcon","iconImportDeclaration","icon","_useSemicolon","transformImport","isRemote","utilsAlias","utilsImport","updated","updateImportAliases","namedImport","moduleSpecifier","PARSE_OPTIONS","transformJsx","output","ast","code","parse","transformFromAstSync","transformTypescript","directiveRegex","transformRsc","first","transformTwPrefixes","defaultClassNames","applyPrefix","callExpression","arg","project","Project","createTempSourceFile","filename","dir","tmpdir","transform","opts","transformers","tempFile","ScriptKind","transformer","transformNext","func","variable","exportDecl","namedExport","updateFiles","filesCreatedSpinner","getRegistryBaseColor","filesCreated","filesUpdated","filesSkipped","envVarsAdded","envFile","index","resolveFilePath","f","basename","alternativeEnvFile","existingFile","statSync","_isNext16Middleware","existingFileContent","overwrite","prompts","mergedContent","allFiles","updatedFiles","resolveImports","target","resolvePageTarget","resolveFileTargetDirectory","resolveNestedFilePath","normalizedPaths","p","normalizedNeedle","needleDir","needleSegments","testPath","normalizedFilePath","normalizedTargetDir","fileSegments","targetSegments","lastTargetSegment","commonDirIndex","segment","filePaths","filepath","importDeclarations","probableImportFilePath","resolvedImportFilePath","resolveModuleByProbablePath","newImport","toAliasedImport","extensions","relativeFiles","fileSet","extInPath","hasExt","absBase","relBase","tryExts","candidates","absCand","relCand","absIdx","relIdx","a","b","aExt","bExt","ord","aStrong","bStrong","abs","matches","root","aliasKey","rootDir","rel","ext","keepExt","noExt","aliasBase","isRootMiddleware","isNextJs","majorVersion","isUrl","isLocalFile","isUniversalRegistryItem","registryItem","deduplicateFilesByTarget","filesArrays","canDeduplicateFiles","registryItemFileSchema","targetMap","resolveStyleFromConfig","configWithDefaults","baseConfig","deepmerge","context","setRegistryHeaders","headers","getRegistryHeadersFromContext","clearRegistryContext","extractEnvVarsFromRegistryConfig","validateRegistryConfig","missing","NAME_PLACEHOLDER","STYLE_PLACEHOLDER","ENV_VAR_PATTER","QUERY_PARAM_SEPARATOR","QUERY_PARAM_DELIMITER","buildUrlAndHeadersForRegistryItem","registry","registryConfig","buildUrlFromRegistryConfig","buildHeadersFromRegistryConfig","baseUrl","appendQueryParams","expandedValue","shouldIncludeHeader","params","urlParams","queryString","separator","originalValue","trimmedExpanded","templateWithoutVars","resolveRegistryUrl","pathOrUrl","agent","HttpsProxyAgent","registryCache","fetchRegistry","fetchPromise","response","fetch","messageFromServer","json","parsed","fetchRegistryLocal","expandedPath","homedir","registryItemSchema","updateTailwindConfig","tailwindConfig","tailwindFileRelativePath","tailwindSpinner","transformTailwindConfig","_createSourceFile","configObject","property","quoteChar","_getQuoteChar","addTailwindConfigProperty","plugin","addTailwindConfigPlugin","addTailwindConfigTheme","existingProperty","newProperty","initializer","newValue","initializerText","element","theme","nestSpreadProperties","themeInitializer","themeObjectString","themeObject","parseObjectLiteral","dst","src","resultString","objectToString","unnestSpreadProperties","existingPlugins","QuoteKind","obj","properties","prop","spreadAssignment","spreadText","nestSpreadElements","elements","j","propAssignment","unsetSpreadElements","spreadTest","objectLiteralString","statement","parseObjectLiteralExpression","parseArrayLiteralExpression","parseValue","buildTailwindThemeColorsFromCssVars","cssVars","colorName","subType","resolveRegistryItemsFromRegistries","items","registryHeaders","resolvedItems","resolved","fetchRegistryItems","resolveRegistryTree","names","payload","allDependencyItems","allDependencyRegistryNames","uniqueNames","results","resultMap","sourceName","itemWithSource","resolvedDependencies","namespacedDeps","dep","registryNames","resolveDependenciesRecursively","uniqueRegistryNames","nonNamespacedItems","namespacedDepItems","depResults","getUidesuRegistryIndex","registryUrls","itemDependencies","resolveRegistryDependencies","uniqueUrls","registryPayload","registryGetTheme","sourceMap","source","topologicalSortRegistryItems","tailwind","css","docs","envVars","deduplicatedFiles","registryResolvedItemsTreeSchema","dependencies","visited","resolvedDeps","nested","style","urls","computeItemHash","identifier","hash","createHash","extractItemIdentifierFromDependency","dependency","pathname","itemMap","hashToItem","inDegree","adjacencyList","depToHashes","itemSource","itemHash","depHash","exactMatches","nameMatches","queue","sorted","degree","currentHash","dependentHash","newDegree","sortedHashes","getRegistryItems","useCache","registryIndexSchema","getRegistryStyles","stylesSchema","iconsSchema","getRegistryBaseColors","registryBaseColorSchema","getRegistriesIndex","data","registriesIndexSchema","isSafeTarget","targetPath","decodedPath","prevPath","normalizedTarget","normalizedRoot","hasPathTraversal","cleanPath","cleanTarget","cleanDecoded","pattern","updateCss","cssFilepath","cssFilepathRelative","cssSpinner","transformCss","plugins","updateCssPlugin","postcss","lastNode","selector","atRuleMatch","importRule","importNodes","lastImport","quotedParams","normalizeParams","pluginRule","pluginNodes","lastPlugin","newAtRule","themeInline","keyframesRule","step","stepProps","processRule","utilityAtRule","existingDecl","decl","atRule","processAtRule","childSelector","childProps","nestedMatch","nestedName","nestedParams","tempRule","rule","clone","parent","atRuleName","atRuleParams","nestedSelector","updateCssVars","cssVarsSpinner","updateCssVarsPlugin","cleanupDefaultNextStylesPlugin","addCustomImport","addCustomVariant","updateCssVarsPluginV4","updateThemePlugin","updateTailwindConfigPlugin","updateTailwindConfigAnimationPlugin","updateTailwindConfigKeyframesPlugin","updateBaseLayerPlugin","requiredRules","baseLayer","apply","applyRule","AtRule","addOrUpdateVars","removeConflictVars","rootRule","propsToRemove","bodyRule","darkRootRule","ruleNode","newDecl","themeNode","upsertThemeNode","isLocalHSLValue","variables","themeVarNodes","radiusVariables","cssVarNode","isColorValue","propValue","variantNode","customVariantNode","importNode","quote","getQuoteType","lastPluginNode","pluginName","pluginNode","existingKeyFrameNodes","keyframeValueSchema","keyframeName","keyframeValue","parsedKeyframeValue","keyframeNode","values","existingAnimationNodes","parsedAnimationValue","animationNode","chunks","chunk","getPackageManager","withFallback","packageManager","detect","userAgent","updateDependencies","devDependencies","dependenciesSpinner","getUpdateDependenciesPackageManager","flag","shouldPromptForNpmFlag","confirmation","installWithPackageManager","hasReact19","hasReactDayPicker8","installWithNpm","installWithDeno","installWithExpo","execa","updateEnvVars","envSpinner","projectRoot","envFilePath","existingEnvFile","envFileExists","envFileName","newEnvContent","envFileUpdated","envFileCreated","addComponents","components","workspaceConfig","addWorkspaceComponents","addProjectComponents","registrySpinner","tree","validateFilesTarget","overwriteCssVars","shouldOverwriteCssVars","component","loadEnvFiles","envFiles","envPath","join","resolveRegistryNamespaces","discoveredNamespaces","visitedItems","itemsToProcess","currentItem","depRegistry","ensureRegistriesInConfig","missingRegistries","registryIndex","foundRegistries","existingRegistries","newConfigWithRegistries","resolvedPaths","configWithoutResolvedPaths","configSpinner","updatedConfig","addOptionsSchema","add","Command","initialConfig","hasNewRegistries","newRegistries","itemType","confirm","preFlightBuild","errors","resolvePaths","buildOptionsSchema","build","Oe","registrySchema","buildSpinner","preFlightInit","projectSpinner","frameworkSpinner","tailwindSpinnerMessage","tsConfigSpinner","MONOREPO_TEMPLATE_URL","TEMPLATES","createProject","template","projectName","nextVersion","isRemoteComponent","meta","projectPath","createViteProject","createNextProject","createMonorepoProject","createSpinner","installSpinner","templatePath","os","tarPath","extractedPath","packageJsonContent","FILE_BACKUP_SUFFIX","createFileBackup","fsExtra","backupPath","restoreFileBackup","deleteFileBackup","initOptionsSchema","val","init","shadowConfig","componentsJsonPath","runInit","newProjectTemplate","preflight","projectConfig","promptForMinimalConfig","cssVariables","styles","baseColors","color","main","program"],"mappings":"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","file":"index.js","sourcesContent":["{\n  \"name\": \"uidesu\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Add components to your apps.\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"sergiocortes-dll\",\n    \"url\": \"https://twitter.com/sergiocortes-dll\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/aodesu/ui-cli.git\",\n    \"directory\": \"packages/aodesu\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"keywords\": [\n    \"components\",\n    \"ui\",\n    \"tailwind\",\n    \"radix-ui\",\n    \"uidesu\"\n  ],\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./schema\": {\n      \"types\": \"./dist/schema/index.d.ts\",\n      \"default\": \"./dist/schema/index.js\"\n    }\n  },\n  \"bin\": \"./dist/index.js\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"start:dev\": \"cross-env REGISTRY_URL=https://localhost:4000/r node dist/index.js\"\n  },\n  \"dependencies\": {\n    \"@antfu/ni\": \"^25.0.0\",\n    \"@babel/core\": \"^7.28.0\",\n    \"@babel/parser\": \"^7.28.0\",\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\n    \"@babel/preset-typescript\": \"^7.27.1\",\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\n    \"commander\": \"^14.0.0\",\n    \"cosmiconfig\": \"^9.0.0\",\n    \"deepmerge\": \"^4.3.1\",\n    \"execa\": \"^9.6.0\",\n    \"fast-glob\": \"^3.3.3\",\n    \"fs-extra\": \"^11.3.1\",\n    \"https-proxy-agent\": \"^7.0.6\",\n    \"kleur\": \"^4.1.5\",\n    \"node-fetch\": \"^3.3.2\",\n    \"ora\": \"^8.2.0\",\n    \"postcss\": \"^8.5.6\",\n    \"prompts\": \"^2.4.2\",\n    \"recast\": \"^0.23.11\",\n    \"stringify-object\": \"^5.0.0\",\n    \"ts-morph\": \"^26.0.0\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"zod\": \"^3.24.1\",\n    \"zod-to-json-schema\": \"3.24.6\"\n  },\n  \"devDependencies\": {\n    \"@types/babel__core\": \"^7.20.5\",\n    \"@types/fs-extra\": \"^11.0.4\",\n    \"@types/prompts\": \"^2.4.9\",\n    \"@types/stringify-object\": \"^4.0.5\",\n    \"rimraf\": \"^6.0.1\",\n    \"tsup\": \"^8.5.0\",\n    \"type-fest\": \"^4.41.0\",\n    \"typescript\": \"^5.9.2\"\n  }\n}\n","import { z } from \"zod\"\n\n// Error codes for programmatic error handling\nexport const RegistryErrorCode = {\n  // Network errors\n  NETWORK_ERROR: \"NETWORK_ERROR\",\n  NOT_FOUND: \"NOT_FOUND\",\n  UNAUTHORIZED: \"UNAUTHORIZED\",\n  FORBIDDEN: \"FORBIDDEN\",\n  FETCH_ERROR: \"FETCH_ERROR\",\n\n  // Configuration errors\n  NOT_CONFIGURED: \"NOT_CONFIGURED\",\n  INVALID_CONFIG: \"INVALID_CONFIG\",\n  MISSING_ENV_VARS: \"MISSING_ENV_VARS\",\n\n  // File system errors\n  LOCAL_FILE_ERROR: \"LOCAL_FILE_ERROR\",\n\n  // Parsing errors\n  PARSE_ERROR: \"PARSE_ERROR\",\n  VALIDATION_ERROR: \"VALIDATION_ERROR\",\n\n  // Generic errors\n  UNKNOWN_ERROR: \"UNKNOWN_ERROR\",\n} as const\n\nexport type RegistryErrorCode =\n  (typeof RegistryErrorCode)[keyof typeof RegistryErrorCode]\n\nexport class RegistryError extends Error {\n  public readonly code: RegistryErrorCode\n  public readonly statusCode?: number\n  public readonly context?: Record<string, unknown>\n  public readonly suggestion?: string\n  public readonly timestamp: Date\n  public readonly cause?: unknown\n\n  constructor(\n    message: string,\n    options: {\n      code?: RegistryErrorCode\n      statusCode?: number\n      cause?: unknown\n      context?: Record<string, unknown>\n      suggestion?: string\n    } = {}\n  ) {\n    super(message)\n    this.name = \"RegistryError\"\n    this.code = options.code || RegistryErrorCode.UNKNOWN_ERROR\n    this.statusCode = options.statusCode\n    this.cause = options.cause\n    this.context = options.context\n    this.suggestion = options.suggestion\n    this.timestamp = new Date()\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor)\n    }\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      statusCode: this.statusCode,\n      context: this.context,\n      suggestion: this.suggestion,\n      timestamp: this.timestamp,\n      stack: this.stack,\n    }\n  }\n}\n\nexport class RegistryNotFoundError extends RegistryError {\n  constructor(public readonly url: string, cause?: unknown) {\n    const message = `The item at ${url} was not found. It may not exist at the registry.`\n\n    super(message, {\n      code: RegistryErrorCode.NOT_FOUND,\n      statusCode: 404,\n      cause,\n      context: { url },\n      suggestion:\n        \"Check if the item name is correct and the registry URL is accessible.\",\n    })\n    this.name = \"RegistryNotFoundError\"\n  }\n}\n\nexport class RegistryUnauthorizedError extends RegistryError {\n  constructor(public readonly url: string, cause?: unknown) {\n    const message = `You are not authorized to access the item at ${url}. If this is a remote registry, you may need to authenticate.`\n\n    super(message, {\n      code: RegistryErrorCode.UNAUTHORIZED,\n      statusCode: 401,\n      cause,\n      context: { url },\n      suggestion:\n        \"Check your authentication credentials and environment variables.\",\n    })\n    this.name = \"RegistryUnauthorizedError\"\n  }\n}\n\nexport class RegistryForbiddenError extends RegistryError {\n  constructor(public readonly url: string, cause?: unknown) {\n    const message = `You are not authorized to access the item at ${url}. If this is a remote registry, you may need to authenticate.`\n\n    super(message, {\n      code: RegistryErrorCode.FORBIDDEN,\n      statusCode: 403,\n      cause,\n      context: { url },\n      suggestion:\n        \"Check your authentication credentials and environment variables.\",\n    })\n    this.name = \"RegistryForbiddenError\"\n  }\n}\n\nexport class RegistryFetchError extends RegistryError {\n  constructor(\n    public readonly url: string,\n    statusCode?: number,\n    public readonly responseBody?: string,\n    cause?: unknown\n  ) {\n    // Use the error detail from the server if available\n    const baseMessage = statusCode\n      ? `Failed to fetch from registry (${statusCode}): ${url}`\n      : `Failed to fetch from registry: ${url}`\n\n    const message =\n      typeof cause === \"string\" && cause\n        ? `${baseMessage} - ${cause}`\n        : baseMessage\n\n    let suggestion = \"Check your network connection and try again.\"\n    if (statusCode === 404) {\n      suggestion =\n        \"The requested resource was not found. Check the URL or item name.\"\n    } else if (statusCode === 500) {\n      suggestion = \"The registry server encountered an error. Try again later.\"\n    } else if (statusCode && statusCode >= 400 && statusCode < 500) {\n      suggestion = \"There was a client error. Check your request parameters.\"\n    }\n\n    super(message, {\n      code: RegistryErrorCode.FETCH_ERROR,\n      statusCode,\n      cause,\n      context: { url, responseBody },\n      suggestion,\n    })\n    this.name = \"RegistryFetchError\"\n  }\n}\n\nexport class RegistryNotConfiguredError extends RegistryError {\n  constructor(public readonly registryName: string | null) {\n    const message = registryName\n      ? `Unknown registry \"${registryName}\". Make sure it is defined in components.json as follows:\n{\n  \"registries\": {\n    \"${registryName}\": \"[URL_TO_REGISTRY]\"\n  }\n}`\n      : `Unknown registry. Make sure it is defined in components.json under \"registries\".`\n\n    super(message, {\n      code: RegistryErrorCode.NOT_CONFIGURED,\n      context: { registryName },\n      suggestion:\n        \"Add the registry configuration to your components.json file. Consult the registry documentation for the correct format.\",\n    })\n    this.name = \"RegistryNotConfiguredError\"\n  }\n}\n\nexport class RegistryLocalFileError extends RegistryError {\n  constructor(public readonly filePath: string, cause?: unknown) {\n    super(`Failed to read local registry file: ${filePath}`, {\n      code: RegistryErrorCode.LOCAL_FILE_ERROR,\n      cause,\n      context: { filePath },\n      suggestion: \"Check if the file exists and you have read permissions.\",\n    })\n    this.name = \"RegistryLocalFileError\"\n  }\n}\n\nexport class RegistryParseError extends RegistryError {\n  public readonly parseError: unknown\n\n  constructor(public readonly item: string, parseError: unknown) {\n    let message = `Failed to parse registry item: ${item}`\n\n    if (parseError instanceof z.ZodError) {\n      message = `Failed to parse registry item: ${item}\\n${parseError.errors\n        .map((e) => `  - ${e.path.join(\".\")}: ${e.message}`)\n        .join(\"\\n\")}`\n    }\n\n    super(message, {\n      code: RegistryErrorCode.PARSE_ERROR,\n      cause: parseError,\n      context: { item },\n      suggestion:\n        \"The registry item may be corrupted or have an invalid format. Please make sure it returns a valid JSON object. See https://ui.aodesu.com/schema/registry-item.json.\",\n    })\n\n    this.parseError = parseError\n    this.name = \"RegistryParseError\"\n  }\n}\n\nexport class RegistryMissingEnvironmentVariablesError extends RegistryError {\n  constructor(\n    public readonly registryName: string,\n    public readonly missingVars: string[]\n  ) {\n    const message =\n      `Registry \"${registryName}\" requires the following environment variables:\\n\\n` +\n      missingVars.map((v) => `   ${v}`).join(\"\\n\")\n\n    super(message, {\n      code: RegistryErrorCode.MISSING_ENV_VARS,\n      context: { registryName, missingVars },\n      suggestion:\n        \"Set the required environment variables to your .env or .env.local file.\",\n    })\n    this.name = \"RegistryMissingEnvironmentVariablesError\"\n  }\n}\n\nexport class RegistryInvalidNamespaceError extends RegistryError {\n  constructor(public readonly name: string) {\n    const message = `Invalid registry namespace: \"${name}\". Registry names must start with @ (e.g., @aodesu, @v0).`\n\n    super(message, {\n      code: RegistryErrorCode.VALIDATION_ERROR,\n      context: { name },\n      suggestion:\n        \"Use a valid registry name starting with @ or provide a direct URL to the registry.\",\n    })\n    this.name = \"RegistryInvalidNamespaceError\"\n  }\n}\n\nexport class ConfigMissingError extends RegistryError {\n  constructor(public readonly cwd: string) {\n    const message = `No components.json found in ${cwd} or parent directories.`\n\n    super(message, {\n      code: RegistryErrorCode.NOT_CONFIGURED,\n      context: { cwd },\n      suggestion:\n        \"Run 'npx aodesu@latest init' to create a components.json file, or check that you're in the correct directory.\",\n    })\n    this.name = \"ConfigMissingError\"\n  }\n}\n\nexport class ConfigParseError extends RegistryError {\n  constructor(public readonly cwd: string, parseError: unknown) {\n    let message = `Invalid components.json configuration in ${cwd}.`\n\n    if (parseError instanceof z.ZodError) {\n      message = `Invalid components.json configuration in ${cwd}:\\n${parseError.errors\n        .map((e) => `  - ${e.path.join(\".\")}: ${e.message}`)\n        .join(\"\\n\")}`\n    }\n\n    super(message, {\n      code: RegistryErrorCode.INVALID_CONFIG,\n      cause: parseError,\n      context: { cwd },\n      suggestion:\n        \"Check your components.json file for syntax errors or invalid configuration. Run 'npx aodesu@latest init' to regenerate a valid configuration.\",\n    })\n    this.name = \"ConfigParseError\"\n  }\n}\n\nexport class RegistriesIndexParseError extends RegistryError {\n  public readonly parseError: unknown\n\n  constructor(parseError: unknown) {\n    let message = \"Failed to parse registries index\"\n\n    if (parseError instanceof z.ZodError) {\n      const invalidNamespaces = parseError.errors\n        .filter((e) => e.path.length > 0)\n        .map((e) => `\"${e.path[0]}\"`)\n        .filter((v, i, arr) => arr.indexOf(v) === i) // remove duplicates\n\n      if (invalidNamespaces.length > 0) {\n        message = `Failed to parse registries index. Invalid registry namespace(s): ${invalidNamespaces.join(\n          \", \"\n        )}\\n${parseError.errors\n          .map((e) => `  - ${e.path.join(\".\")}: ${e.message}`)\n          .join(\"\\n\")}`\n      } else {\n        message = `Failed to parse registries index:\\n${parseError.errors\n          .map((e) => `  - ${e.path.join(\".\")}: ${e.message}`)\n          .join(\"\\n\")}`\n      }\n    }\n\n    super(message, {\n      code: RegistryErrorCode.PARSE_ERROR,\n      cause: parseError,\n      context: { parseError },\n      suggestion:\n        \"The registries index may be corrupted or have invalid registry namespace format. Registry names must start with @ (e.g., @aodesu, @example).\",\n    })\n\n    this.parseError = parseError\n    this.name = \"RegistriesIndexParseError\"\n  }\n}\n","import { cyan, green, red, yellow } from \"kleur/colors\";\n\nexport const highlighter = {\n  error: red,\n  warn: yellow,\n  info: cyan,\n  success: green,\n};\n","import { highlighter } from \"./highlighter\";\n\nexport const logger = {\n  error(...args: unknown[]) {\n    console.log(highlighter.error(args.join(\" \")))\n  },\n  warn(...args: unknown[]) {\n    console.log(highlighter.warn(args.join(\" \")))\n  },\n  info(...args: unknown[]) {\n    console.log(highlighter.info(args.join(\" \")))\n  },\n  success(...args: unknown[]) {\n    console.log(highlighter.success(args.join(\" \")))\n  },\n  log(...args: unknown[]) {\n    console.log(args.join(\" \"))\n  },\n  break() {\n    console.log(\"\")\n  },\n};\n","import z from \"zod\";\nimport { RegistryError } from \"../registry/errors\";\nimport { highlighter } from \"./highlighter\";\nimport { logger } from \"./logger\";\n\nexport function handleError(error: unknown) {\n  logger.break();\n  logger.error(\"Something went wrong. Please check the error below for more details.\");\n  logger.error(\"If the problem persist, please open an issue on GitHub.\");\n  logger.error(\"\");\n\n  if (typeof error === \"string\") {\n    logger.error(error);\n    logger.break();\n    process.exit(1);\n  }\n\n  if (error instanceof RegistryError) {\n    if (error.message) {\n      logger.error(error.cause ? \"Error\" : \"Message:\");\n      logger.error(error.message);\n    }\n\n    if (error.cause) {\n      logger.error(\"\\nMessage:\");\n      logger.error(error.cause);\n    }\n\n    if (error.suggestion) {\n      logger.error(\"\\nSuggestion:\");\n      logger.error(error.suggestion);\n    }\n    logger.break();\n    process.exit(1);\n  }\n\n  if (error instanceof z.ZodError) {\n    logger.error(\"Validation failed:\");\n    for (const [key, value] of Object.entries(error.flatten().fieldErrors)) {\n      logger.error(`- ${highlighter.info(key)}: ${value}`);\n    }\n    logger.break();\n    process.exit(1);\n  }\n\n  if (error instanceof Error) {\n    logger.error(error.message);\n    logger.break();\n    process.exit(1);\n  }\n\n  logger.break();\n  process.exit(1);\n}\n","import z from \"zod\";\nimport { registryConfigSchema } from \"./schema\";\n\nexport const REGISTRY_URL =\n  process.env.REGISTRY_URL ?? \"https://ui.aodesu.com/r\";\n\nexport const FALLBACK_STYLE = \"aodesu\";\n\nexport const BASE_COLORS = [\n  {\n    name: \"neutral\",\n    label: \"Neutral\"\n  }\n]\n\nexport const BUILTIN_REGISTRIES: z.infer<typeof registryConfigSchema> = {\n  \"@uidesu\": `${REGISTRY_URL}/styles/{style}/{name}.json`,\n}\n","export function expandEnvVars(value: string) {\n  return value.replace(/\\${(\\w+)}/g, (_match, key) => process.env[key] || \"\")\n}\n\nexport function extractEnvVars(value: string) {\n  const vars: string[] = []\n  const regex = /\\${(\\w+)}/g\n  let match: RegExpExecArray | null\n\n  while ((match = regex.exec(value)) !== null) {\n    vars.push(match[1])\n  }\n\n  return vars\n}\n","// Valid registry name pattern: @namespace where namespace is alphanumeric with hyphens/underscores\nconst REGISTRY_PATTERN = /^(@[a-zA-Z0-9](?:[a-zA-Z0-9-_]*[a-zA-Z0-9])?)\\/(.+)$/\n\nexport function parseRegistryAndItemFromString(name: string) {\n  if (!name.startsWith(\"@\")) {\n    return {\n      registry: null,\n      item: name,\n    }\n  }\n\n  const match = name.match(REGISTRY_PATTERN)\n  if (match) {\n    return {\n      registry: match[1],\n      item: match[2],\n    }\n  }\n\n  return {\n    registry: null,\n    item: name,\n  }\n}\n","export const FRAMEWORKS = {\n  \"next-app\": {\n    name: \"next-app\",\n    label: \"Next.js\",\n    links: {\n      installation: \"https://ui.aodesu.com/docs/installation/next\",\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\n    },\n  },\n  \"next-pages\": {\n    name: \"next-pages\",\n    label: \"Next.js\",\n    links: {\n      installation: \"https://ui.aodesu.com/docs/installation/next\",\n      tailwind: \"https://tailwindcss.com/docs/guides/nextjs\",\n    },\n  },\n  vite: {\n    name: \"vite\",\n    label: \"vite\",\n    links: {\n      installation: \"https://ui.aodesu.com/docs/installation/vite\",\n      tailwind: \"https://tailwindcss.com/docs/guides/vite\",\n    },\n  },\n  manual: {\n    name: \"manual\",\n    label: \"Manual\",\n    links: {\n      installation: \"https://ui.aodesu.com/docs/installation/manual\",\n      tailwind: \"https://tailwindcss.com/docs/installation\",\n    },\n  },\n} as const;\n\nexport type Framework = (typeof FRAMEWORKS)[keyof typeof FRAMEWORKS];\n","import { createMatchPath, type ConfigLoaderSuccessResult } from \"tsconfig-paths\";\n\nexport async function resolveImport(\n  importPath: string,\n  config: Pick<ConfigLoaderSuccessResult, \"absoluteBaseUrl\" | \"paths\">\n) {\n  return createMatchPath(config.absoluteBaseUrl, config.paths)(\n    importPath,\n    undefined,\n    () => true,\n    [\".ts\", \".tsx\", \".jsx\", \".js\", \".css\"]\n  )\n}\n","import { cosmiconfig } from \"cosmiconfig\";\nimport fg from \"fast-glob\";\nimport path from \"path\";\nimport { loadConfig } from \"tsconfig-paths\";\nimport z from \"zod\";\nimport { BUILTIN_REGISTRIES } from \"../registry/constants\";\nimport { configSchema, rawConfigSchema, workspaceConfigSchema } from \"../schema\";\nimport { getProjectInfo } from \"./get-project-info\";\nimport { highlighter } from \"./highlighter\";\nimport { resolveImport } from \"./resolve-import\";\n\n// TODO: Figure out if we want to support all cosmiconfig formats.\n// A simple components.json file would be nice.\nexport const explorer = cosmiconfig(\"components\", {\n  searchPlaces: [\"components.json\"]\n});\n\nexport type Config = z.infer<typeof configSchema>\n\nexport async function getConfig(cwd: string) {\n  const config = await getRawConfig(cwd);\n\n  if (!config) {\n    return null;\n  }\n\n  // Set default icon library if not provided.\n  if (!config.iconLibrary) {\n    config.iconLibrary = config.style === \"aodesu\" ? \"radix\" : \"lucide\";\n  }\n\n  return await resolveConfigPaths(cwd, config);\n}\n\nexport async function resolveConfigPaths(\n  cwd: string,\n  config: z.infer<typeof rawConfigSchema>\n) {\n  // Merge built-in registries with user registries\n  config.registries = {\n    ...BUILTIN_REGISTRIES,\n    ...(config.registries || {}),\n  };\n\n  // Read tsconfig.json\n  const tsConfig = await loadConfig(cwd);\n\n  if (tsConfig.resultType === \"failed\") {\n    throw new Error(\n      `Failed to load ${config.tsx ? \"tsconfig\" : \"jsconfig\"}.json ${\n        tsConfig.message ?? \"\"\n      }`.trim()\n    );\n  }\n\n  return configSchema.parse({\n    ...config,\n    resolvedPaths: {\n      cwd,\n      tailwindConfig: config.tailwind.config\n        ? path.resolve(cwd, config.tailwind.config)\n        : \"\",\n      tailwindCss: path.resolve(cwd, config.tailwind.css),\n      utils: await resolveImport(config.aliases[\"utils\"], tsConfig),\n      components: await resolveImport(config.aliases[\"components\"], tsConfig),\n      ui: config.aliases[\"ui\"]\n        ? await resolveImport(config.aliases[\"ui\"], tsConfig)\n        : path.resolve(\n          (await resolveImport(config.aliases[\"components\"], tsConfig)) ??\n          cwd,\n          \"ui\"\n        ),\n      // TODO: Make this configurable\n      // For now, we assume the lib and hooks directories are one level up from the components directory.\n      lib: config.aliases[\"lib\"]\n        ? await resolveImport(config.aliases[\"lib\"], tsConfig)\n        : path.resolve(\n          (await resolveImport(config.aliases[\"utils\"], tsConfig)) ?? cwd,\n          \"..\"\n        ),\n      hooks: config.aliases[\"hooks\"]\n        ? await resolveImport(config.aliases[\"hooks\"], tsConfig)\n        : path.resolve(\n          (await resolveImport(config.aliases[\"components\"], tsConfig)) ??\n            cwd,\n          \"..\",\n          \"hooks\"\n        ),\n    },\n  })\n};\n\nexport async function getRawConfig(\n  cwd: string\n): Promise<z.infer<typeof rawConfigSchema> | null> {\n  try {\n    const configResult = await explorer.search(cwd);\n\n    if (!configResult) {\n      return null;\n    }\n\n    const config = rawConfigSchema.parse(configResult.config);\n\n    // Check if user is trying to override built-in registries\n    if (config.registries) {\n      for (const registryName of Object.keys(config.registries)) {\n        if (registryName in BUILTIN_REGISTRIES) {\n          throw new Error(\n            `\"${registryName}\" is a built-in registry and cannot be overriden.`\n          )\n        }\n      }\n    }\n\n    return config;\n  } catch (error) {\n    const componentPath = `${cwd}/components.json`;\n    if (error instanceof Error && error.message.includes(\"reserved registry\")) {\n      throw error;\n    }\n    throw new Error(\n      `Invalid configuration found in ${highlighter.info(componentPath)}`\n    );\n  }\n}\n\nexport async function getWorkspaceConfig(config: Config) {\n  let resolvedAliases: any = {};\n\n  for (const key of Object.keys(config.aliases)) {\n    if (!isAliasKey(key, config)) {\n      continue;\n    }\n\n    const resolvedPath = config.resolvedPaths[key];\n    const packageRoot = await findPackageRoot(\n      config.resolvedPaths.cwd,\n      resolvedPath\n    );\n\n    if (!packageRoot) {\n      resolvedAliases[key] = config;\n      continue;\n    }\n\n    resolvedAliases[key] = await getConfig(packageRoot);\n  }\n\n  const result = workspaceConfigSchema.safeParse(resolvedAliases)\n  if (!result.success) {\n    return null;\n  }\n\n  return result.data;\n}\n\nexport async function findPackageRoot(cwd: string, resolvedPath: string) {\n  const commonRoot = findCommonRoot(cwd, resolvedPath);\n  const relativePath = path.relative(commonRoot, resolvedPath);\n\n  const packageRoots = await fg.glob(\"**/package.json\", {\n    cwd: commonRoot,\n    deep: 3,\n    ignore: [\"**/node_modules/**\", \"**/dist/**\", \"**/build/**\", \"**/public/**\"],\n  });\n\n  const matchingPackageRoot = packageRoots\n    .map((pkgPath) => path.dirname(pkgPath))\n    .find((pkgDir) => relativePath.startsWith(pkgDir));\n\n  return matchingPackageRoot ? path.join(commonRoot, matchingPackageRoot) : null;\n}\n\nfunction isAliasKey(\n  key: string,\n  config: Config\n): key is keyof Config[\"aliases\"] {\n  return Object.keys(config.resolvedPaths)\n    .filter((key) => key !== \"utils\")\n    .includes(key);\n}\n\nexport function findCommonRoot(cwd: string, resolvedPath: string) {\n  const parts1 = cwd.split(path.sep);\n  const parts2 = resolvedPath.split(path.sep);\n  const commonParts = [];\n\n  for (let i = 0; i < Math.min(parts1.length, parts2.length); i++) {\n    if (parts1[i] !== parts2[i]) {\n      break\n    }\n    commonParts.push(parts1[i])\n  }\n\n  return commonParts.join(path.sep);\n}\n\n// TODO: Cache this call.\nexport async function getTargetStyleFromConfig(cwd: string, fallback: string) {\n  const projectInfo = await getProjectInfo(cwd)\n  return projectInfo?.tailwindVersion === \"v4\" ? \"new-york-v4\" : fallback\n}\n\ntype DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P]\n}\n\nexport function createConfig(partial?: DeepPartial<Config>): Config {\n  const defaultConfig: Config = {\n    resolvedPaths: {\n      cwd: process.cwd(),\n      tailwindConfig: \"\",\n      tailwindCss: \"\",\n      utils: \"\",\n      components: \"\",\n      ui: \"\",\n      lib: \"\",\n      hooks: \"\",\n    },\n    style: \"\",\n    tailwind: {\n      config: \"\",\n      css: \"\",\n      baseColor: \"\",\n      cssVariables: false,\n    },\n    rsc: false,\n    tsx: true,\n    aliases: {\n      components: \"\",\n      utils: \"\",\n    },\n    registries: {\n      ...BUILTIN_REGISTRIES,\n    },\n  }\n\n  // Deep merge the partial config with defaults\n  if (partial) {\n    return {\n      ...defaultConfig,\n      ...partial,\n      resolvedPaths: {\n        ...defaultConfig.resolvedPaths,\n        ...(partial.resolvedPaths|| {}),\n      },\n      tailwind: {\n        ...defaultConfig.tailwind,\n        ...(partial.tailwind || {}),\n      },\n      aliases: {\n        ...defaultConfig.aliases,\n        ...(partial.aliases || {}),\n      },\n      registries: {\n        ...defaultConfig.registries,\n        ...(partial.registries || {}),\n      },\n    }\n  }\n\n  return defaultConfig;\n}\n","import fs from \"fs-extra\";\nimport path from \"path\";\nimport { type PackageJson } from \"type-fest\";\n\nexport function getPackageInfo(\n  cwd: string = \"\",\n  shouldThrow: boolean = true\n): PackageJson | null {\n  const packageJsonPath = path.join(cwd, \"package.json\");\n\n  return fs.readJSONSync(packageJsonPath, {\n    throws: shouldThrow,\n  }) as PackageJson;\n}\n","import { Framework, FRAMEWORKS } from \"@/src/utils/frameworks\";\nimport { Config, getConfig, resolveConfigPaths } from \"@/src/utils/get-config\";\nimport { getPackageInfo } from \"@/src/utils/get-package-info\";\nimport fg from \"fast-glob\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport { loadConfig } from \"tsconfig-paths\";\nimport { z } from \"zod\";\nimport { rawConfigSchema } from \"../schema\";\n\nexport type TailwindVersion = \"v3\" | \"v4\" | null;\n\nexport type ProjectInfo = {\n  framework: Framework;\n  isSrcDir: boolean;\n  isRSC: boolean;\n  isTsx: boolean;\n  tailwindConfigFile: string | null;\n  tailwindCssFile: string | null;\n  tailwindVersion: TailwindVersion;\n  frameworkVersion: string | null;\n  aliasPrefix: string | null;\n}\n\nconst PROJECT_SHARED_IGNORE = [\n  \"**/node_modules/**\",\n  \".next\",\n  \"public\",\n  \"dist\",\n  \"build\",\n];\n\nconst TS_CONFIG_SCHEMA = z.object({\n  compilerOptions: z.object({\n    paths: z.record(z.string().or(z.array(z.string()))),\n  }),\n});\n\nexport async function getProjectInfo(cwd: string): Promise<ProjectInfo | null> {\n  const [\n    configFiles,\n    isSrcDir,\n    isTsx,\n    tailwindConfigFile,\n    tailwindCssFile,\n    tailwindVersion,\n    aliasPrefix,\n    packageJson,\n  ] = await Promise.all([\n    fg.glob(\n      \"**/{vite,app,next}.config.*|gatsby-config.*|composer.json|react-router.config.*\",\n      {\n        cwd,\n        deep: 3,\n        ignore: PROJECT_SHARED_IGNORE,\n      }\n    ),\n    fs.pathExists(path.resolve(cwd, \"src\")),\n    isTypeScriptProject(cwd),\n    getTailwindConfigFile(cwd),\n    getTailwindCssFile(cwd),\n    getTailwindVersion(cwd),\n    getTsConfigAliasPrefix(cwd),\n    getPackageInfo(cwd, false),\n  ]);\n\n  const isUsingAppDir = await fs.pathExists(\n    path.resolve(cwd, `${isSrcDir ? \"src/\" : \"\"}app`)\n  );\n\n  const type: ProjectInfo = {\n    framework: FRAMEWORKS[\"manual\"],\n    isSrcDir,\n    isRSC: false,\n    isTsx,\n    tailwindConfigFile,\n    tailwindCssFile,\n    tailwindVersion,\n    frameworkVersion: null,\n    aliasPrefix,\n  }\n\n  // Next.js.\n  if (configFiles.find((file) => file.startsWith(\"next.config.\"))?.length) {\n    type.framework = isUsingAppDir\n      ? FRAMEWORKS[\"next-app\"]\n      : FRAMEWORKS[\"next-pages\"];\n    type.isRSC = isUsingAppDir;\n    type.frameworkVersion = await getFrameworkVersion(\n      type.framework,\n      packageJson\n    );\n    return type;\n  }\n\n  // Vite.\n  if (configFiles.find((file) => file.startsWith(\"vite.config.\"))?.length) {\n    type.framework = FRAMEWORKS[\"vite\"];\n    return type;\n  }\n\n  return type;\n};\n\nexport async function getFrameworkVersion(\n  framework: Framework,\n  packageJson: ReturnType<typeof getPackageInfo>\n) {\n  if (!packageJson) {\n    return null;\n  }\n\n  // Only detect Next.js version for now.\n  if (![\"next-app\", \"next-pages\"].includes(framework.name)) {\n    return null;\n  }\n\n  const version =\n    packageJson.dependencies?.next || packageJson.devDependencies?.next;\n\n  if (!version) {\n    return null;\n  }\n\n  // Extract full semver (major.minor.patch), handling ^, ~, etc.\n  const versionMatch = version.match(/^[\\^~]?(\\d+\\.\\d+\\.\\d+)/)\n  if (versionMatch) {\n    return versionMatch[1] // e.g., \"16.0.0\"\n  }\n\n  // For ranges like \">=15.0.0 <16.0.0\", extract the first version.\n  const rangeMatch = version.match(/(\\d+\\.\\d+\\.\\d+)/)\n  if (rangeMatch) {\n    return rangeMatch[1]\n  }\n\n  // For \"latest\", \"canary\", \"rc\", etc., return the tag as-is.\n  return version\n}\n\nexport async function getTailwindVersion(\n  cwd: string\n): Promise<ProjectInfo[\"tailwindVersion\"]> {\n  const [packageInfo, config] = await Promise.all([\n    getPackageInfo(cwd, false),\n    getConfig(cwd),\n  ]);\n\n  // If the config file is empty, we can assume that it's a v4 project\n  if (config?.tailwind?.config === \"\") {\n    return \"v4\";\n  }\n\n  if (\n    !packageInfo?.dependencies?.tailwindcss &&\n    !packageInfo?.devDependencies?.tailwindcss\n  ) {\n    return null;\n  }\n\n  if (\n    /^(?:\\^|~)?3(?:\\.\\d+)*(?:-.*)?$/.test(\n      packageInfo?.dependencies?.tailwindcss ||\n        packageInfo?.devDependencies?.tailwindcss ||\n        \"\"\n    )\n  ) {\n    return \"v3\"\n  }\n\n  return \"v4\"\n}\n\nexport async function getTailwindCssFile(cwd: string) {\n  const [files, tailwindVersion] = await Promise.all([\n    fg.glob([\"**/*.css\", \"**/*.scss\"], {\n      cwd,\n      deep: 5,\n      ignore: PROJECT_SHARED_IGNORE,\n    }),\n    getTailwindVersion(cwd),\n  ]);\n\n  if (!files.length) {\n    return null;\n  }\n\n  for (const file of files) {\n    const contents = await fs.readFile(path.resolve(cwd, file), \"utf8\");\n    if (\n      contents.includes(`@import \"tailwindcss\"`) ||\n      contents.includes(`@import 'tailwindcss'`) ||\n      contents.includes(`@tailwind base`)\n    ) {\n      return file;\n    }\n  }\n\n  return null;\n}\n\nexport async function getTailwindConfigFile(cwd: string) {\n  const files = await fg.glob(\"tailwind.config.*\", {\n    cwd,\n    deep: 3,\n    ignore: PROJECT_SHARED_IGNORE,\n  });\n\n  if (!files.length) {\n    return null;\n  }\n\n  return files[0];\n}\n\nexport async function getTsConfigAliasPrefix(cwd: string) {\n  const tsConfig = await loadConfig(cwd);\n\n  if (\n    tsConfig?.resultType === \"failed\" ||\n    !Object.entries(tsConfig?.paths).length\n  ) {\n    return null;\n  }\n\n  // This assume that the first alias is the prefix.\n  for (const [alias, paths] of Object.entries(tsConfig.paths)) {\n    if (\n      paths.includes(\"./*\") ||\n      paths.includes(\"./src/*\") ||\n      paths.includes(\"./app/*\") ||\n      paths.includes(\"./resources/js/*\") // Laravel.\n    ) {\n      return alias.replace(/\\/\\*$/, \"\") ?? null\n    }\n  }\n\n  // Use the first alias as the prefix.\n  return Object.keys(tsConfig?.paths)?.[0].replace(/\\/\\*$/, \"\") ?? null;\n}\n\nexport async function isTypeScriptProject(cwd: string) {\n  const files = await fg.glob(\"tsconfig.*\", {\n    cwd,\n    deep: 1,\n    ignore: PROJECT_SHARED_IGNORE,\n  });\n\n  return files.length > 0;\n}\n\nexport async function getProjectConfig(\n  cwd: string,\n  defaultProjectInfo: ProjectInfo | null = null\n): Promise<Config | null> {\n  // Check for existing component file.\n  const [existingConfig, projectInfo] = await Promise.all([\n    getConfig(cwd),\n    !defaultProjectInfo\n      ? getProjectInfo(cwd)\n      : Promise.resolve(defaultProjectInfo)\n  ]);\n\n  if (existingConfig) {\n    return existingConfig;\n  }\n\n  if(\n    !projectInfo ||\n    !projectInfo.tailwindCssFile ||\n    (projectInfo.tailwindVersion === \"v3\" && !projectInfo.tailwindConfigFile)\n  ) {\n    return null;\n  }\n\n  const config: z.infer<typeof rawConfigSchema> = {\n    $schema: \"https://ui.aodesu.com/schema.json\",\n    rsc: projectInfo.isRSC,\n    tsx: projectInfo.isTsx,\n    style: \"aodesu\",\n    tailwind: {\n      config: projectInfo.tailwindConfigFile ?? \"\",\n      baseColor: \"zinc\",\n      css: projectInfo.tailwindCssFile,\n      cssVariables: true,\n      prefix: \"\",\n    },\n    iconLibrary: \"lucide\",\n    aliases: {\n      components: `${projectInfo.aliasPrefix}/components`,\n      ui: `${projectInfo.aliasPrefix}/components/ui`,\n      hooks: `${projectInfo.aliasPrefix}/hooks`,\n      lib: `${projectInfo.aliasPrefix}/lib`,\n      utils: `${projectInfo.aliasPrefix}/lib/utils`,\n    },\n  }\n\n  return await resolveConfigPaths(cwd, config)\n}\n\nexport async function getProjectTailwindVersionFromConfig(config: {\n  resolvedPaths: Pick<Config[\"resolvedPaths\"], \"cwd\">\n}): Promise<TailwindVersion> {\n  if (!config.resolvedPaths?.cwd) {\n    return \"v3\";\n  }\n\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd);\n\n  if (!projectInfo?.tailwindVersion) {\n    return null;\n  }\n\n  return projectInfo.tailwindVersion;\n}\n","export function isContentSame(\n  existingContent: string,\n  newContent: string,\n  options: {\n    ignoreImports?: boolean\n  } = {}\n) {\n  const { ignoreImports = false } = options\n\n  // Normalize line endings and whitespace.\n  const normalizedExisting = existingContent.replace(/\\r\\n/g, \"\\n\").trim()\n  const normalizedNew = newContent.replace(/\\r\\n/g, \"\\n\").trim()\n\n  // First, try exact match after normalization.\n  if (normalizedExisting === normalizedNew) {\n    return true\n  }\n\n  // If not ignoring imports or exact match failed, return false\n  if (!ignoreImports) {\n    return false\n  }\n\n  // Compare with import statements normalized.\n  // This regex matches various import patterns including:\n  // - import defaultExport from \"module\"\n  // - import * as name from \"module\"\n  // - import { export1, export2 } from \"module\"\n  // - import { export1 as alias1 } from \"module\"\n  // - import defaultExport, { export1 } from \"module\"\n  // - import type { Type } from \"module\"\n  // - This Regex written by Claude Code.\n  const importRegex =\n    /^(import\\s+(?:type\\s+)?(?:\\*\\s+as\\s+\\w+|\\{[^}]*\\}|\\w+)?(?:\\s*,\\s*(?:\\{[^}]*\\}|\\w+))?\\s+from\\s+[\"'])([^\"']+)([\"'])/gm\n\n  // Function to normalize import paths - remove alias differences.\n  const normalizeImports = (content: string) => {\n    return content.replace(\n      importRegex,\n      (_match, prefix, importPath, suffix) => {\n        // Keep relative imports as-is.\n        if (importPath.startsWith(\".\")) {\n          return `${prefix}${importPath}${suffix}`\n        }\n\n        // For aliased imports, normalize to a common format.\n        // Extract the last meaningful part of the path.\n        const parts = importPath.split(\"/\")\n        const lastPart = parts[parts.length - 1]\n\n        // Normalize to a consistent format.\n        return `${prefix}@normalized/${lastPart}${suffix}`\n      }\n    )\n  }\n\n  const existingNormalized = normalizeImports(normalizedExisting)\n  const newNormalized = normalizeImports(normalizedNew)\n\n  return existingNormalized === newNormalized\n}\n","import { existsSync } from \"fs\"\nimport path from \"path\"\n\nexport function isEnvFile(filePath: string) {\n  const fileName = path.basename(filePath)\n  return /^\\.env(\\.|$)/.test(fileName)\n}\n\n/**\n * Finds a file variant in the project.\n * TODO: abstract this to a more generic function.\n */\nexport function findExistingEnvFile(targetDir: string) {\n  const variants = [\n    \".env.local\",\n    \".env\",\n    \".env.development.local\",\n    \".env.development\",\n  ]\n\n  for (const variant of variants) {\n    const filePath = path.join(targetDir, variant)\n    if (existsSync(filePath)) {\n      return filePath\n    }\n  }\n\n  return null\n}\n\n/**\n * Parse .env content into key-value pairs.\n */\nexport function parseEnvContent(content: string) {\n  const lines = content.split(\"\\n\")\n  const env: Record<string, string> = {}\n\n  for (const line of lines) {\n    const trimmed = line.trim()\n\n    if (!trimmed || trimmed.startsWith(\"#\")) {\n      continue\n    }\n\n    // Find the first = and split there\n    const equalIndex = trimmed.indexOf(\"=\")\n    if (equalIndex === -1) {\n      continue\n    }\n\n    const key = trimmed.substring(0, equalIndex).trim()\n    const value = trimmed.substring(equalIndex + 1).trim()\n\n    if (key) {\n      env[key] = value.replace(/^[\"']|[\"']$/g, \"\")\n    }\n  }\n\n  return env\n}\n\n/**\n * Get the list of new keys that would be added when merging env content.\n */\nexport function getNewEnvKeys(existingContent: string, newContent: string) {\n  const existingEnv = parseEnvContent(existingContent)\n  const newEnv = parseEnvContent(newContent)\n\n  const newKeys = []\n  for (const key of Object.keys(newEnv)) {\n    if (!(key in existingEnv)) {\n      newKeys.push(key)\n    }\n  }\n\n  return newKeys\n}\n\n/**\n * Merge env content by appending ONLY new keys that don't exist in the existing content.\n * Existing keys are preserved with their original values.\n */\nexport function mergeEnvContent(existingContent: string, newContent: string) {\n  const existingEnv = parseEnvContent(existingContent)\n  const newEnv = parseEnvContent(newContent)\n\n  let result = existingContent.trimEnd()\n  if (result && !result.endsWith(\"\\n\")) {\n    result += \"\\n\"\n  }\n\n  const newKeys: string[] = []\n  for (const [key, value] of Object.entries(newEnv)) {\n    if (!(key in existingEnv)) {\n      newKeys.push(`${key}=${value}`)\n    }\n  }\n\n  if (newKeys.length > 0) {\n    if (result) {\n      result += \"\\n\"\n    }\n    result += newKeys.join(\"\\n\")\n    return result + \"\\n\"\n  }\n\n  // Ensure existing content ends with newline.\n  if (result && !result.endsWith(\"\\n\")) {\n    return result + \"\\n\"\n  }\n\n  return result\n}\n","import ora, { type Options } from \"ora\";\n\nexport function spinner(\n  text: Options[\"text\"],\n  options?: {\n    silent?: boolean\n  }\n) {\n  return ora({\n    text,\n    isSilent: options?.silent,\n  });\n}\n","import { registryBaseColorSchema } from \"@/src/schema\"\nimport { Transformer } from \"@/src/utils/transformers\"\nimport { ScriptKind, SyntaxKind } from \"ts-morph\"\nimport { z } from \"zod\"\n\nexport const transformCssVars: Transformer = async ({\n  sourceFile,\n  config,\n  baseColor,\n}) => {\n  // No transform if using css variables.\n  if (config.tailwind?.cssVariables || !baseColor?.inlineColors) {\n    return sourceFile\n  }\n\n  // Find jsx attributes with the name className.\n  // const openingElements = sourceFile.getDescendantsOfKind(SyntaxKind.JsxElement)\n  // console.log(openingElements)\n  // const jsxAttributes = sourceFile\n  //   .getDescendantsOfKind(SyntaxKind.JsxAttribute)\n  //   .filter((node) => node.getName() === \"className\")\n\n  // for (const jsxAttribute of jsxAttributes) {\n  //   const value = jsxAttribute.getInitializer()?.getText()\n  //   if (value) {\n  //     const valueWithColorMapping = applyColorMapping(\n  //       value.replace(/\"/g, \"\"),\n  //       baseColor.inlineColors\n  //     )\n  //     jsxAttribute.setInitializer(`\"${valueWithColorMapping}\"`)\n  //   }\n  // }\n  sourceFile.getDescendantsOfKind(SyntaxKind.StringLiteral).forEach((node) => {\n    const raw = node.getLiteralText()\n    const mapped = applyColorMapping(raw, baseColor.inlineColors).trim()\n    if (mapped !== raw) {\n      node.setLiteralValue(mapped)\n    }\n  })\n\n  return sourceFile\n}\n\n// export default function transformer(file: FileInfo, api: API) {\n//   const j = api.jscodeshift.withParser(\"tsx\")\n\n//   // Replace bg-background with \"bg-white dark:bg-slate-950\"\n//   const $j = j(file.source)\n//   return $j\n//     .find(j.JSXAttribute, {\n//       name: {\n//         name: \"className\",\n//       },\n//     })\n//     .forEach((path) => {\n//       const { node } = path\n//       if (node?.value?.type) {\n//         if (node.value.type === \"StringLiteral\") {\n//           node.value.value = applyColorMapping(node.value.value)\n//           console.log(node.value.value)\n//         }\n\n//         if (\n//           node.value.type === \"JSXExpressionContainer\" &&\n//           node.value.expression.type === \"CallExpression\"\n//         ) {\n//           const callee = node.value.expression.callee\n//           if (callee.type === \"Identifier\" && callee.name === \"cn\") {\n//             node.value.expression.arguments.forEach((arg) => {\n//               if (arg.type === \"StringLiteral\") {\n//                 arg.value = applyColorMapping(arg.value)\n//               }\n\n//               if (\n//                 arg.type === \"LogicalExpression\" &&\n//                 arg.right.type === \"StringLiteral\"\n//               ) {\n//                 arg.right.value = applyColorMapping(arg.right.value)\n//               }\n//             })\n//           }\n//         }\n//       }\n//     })\n//     .toSource()\n// }\n\n// // export function splitClassName(input: string): (string | null)[] {\n// //   const parts = input.split(\":\")\n// //   const classNames = parts.map((part) => {\n// //     const match = part.match(/^\\[?(.+)\\]$/)\n// //     if (match) {\n// //       return match[1]\n// //     } else {\n// //       return null\n// //     }\n// //   })\n\n// //   return classNames\n// // }\n\n// Splits a className into variant-name-alpha.\n// eg. hover:bg-primary-100 -> [hover, bg-primary, 100]\nexport function splitClassName(className: string): (string | null)[] {\n  if (!className.includes(\"/\") && !className.includes(\":\")) {\n    return [null, className, null]\n  }\n\n  const parts: (string | null)[] = []\n  // First we split to find the alpha.\n  let [rest, alpha] = className.split(\"/\")\n\n  // Check if rest has a colon.\n  if (!rest.includes(\":\")) {\n    return [null, rest, alpha]\n  }\n\n  // Next we split the rest by the colon.\n  const split = rest.split(\":\")\n\n  // We take the last item from the split as the name.\n  const name = split.pop()\n\n  // We glue back the rest of the split.\n  const variant = split.join(\":\")\n\n  // Finally we push the variant, name and alpha.\n  parts.push(variant ?? null, name ?? null, alpha ?? null)\n\n  return parts\n}\n\nconst PREFIXES = [\"bg-\", \"text-\", \"border-\", \"ring-offset-\", \"ring-\"]\n\nexport function applyColorMapping(\n  input: string,\n  mapping: z.infer<typeof registryBaseColorSchema>[\"inlineColors\"]\n) {\n  // Handle border classes.\n  if (input.includes(\" border \")) {\n    input = input.replace(\" border \", \" border border-border \")\n  }\n\n  // Build color mappings.\n  const classNames = input.split(\" \")\n  const lightMode = new Set<string>()\n  const darkMode = new Set<string>()\n  for (let className of classNames) {\n    const [variant, value, modifier] = splitClassName(className)\n    const prefix = PREFIXES.find((prefix) => value?.startsWith(prefix))\n    if (!prefix) {\n      if (!lightMode.has(className)) {\n        lightMode.add(className)\n      }\n      continue\n    }\n\n    const needle = value?.replace(prefix, \"\")\n    if (needle && needle in mapping.light) {\n      lightMode.add(\n        [variant, `${prefix}${mapping.light[needle]}`]\n          .filter(Boolean)\n          .join(\":\") + (modifier ? `/${modifier}` : \"\")\n      )\n\n      darkMode.add(\n        [\"dark\", variant, `${prefix}${mapping.dark[needle]}`]\n          .filter(Boolean)\n          .join(\":\") + (modifier ? `/${modifier}` : \"\")\n      )\n      continue\n    }\n\n    if (!lightMode.has(className)) {\n      lightMode.add(className)\n    }\n  }\n\n  return [...Array.from(lightMode), ...Array.from(darkMode)].join(\" \").trim()\n}\n","export const ICON_LIBRARIES = {\n  lucide: {\n    name: \"lucide-react\",\n    package: \"lucide-react\",\n    import: \"lucide-react\",\n  },\n  radix: {\n    name: \"@radix-ui/react-icons\",\n    package: \"@radix-ui/react-icons\",\n    import: \"@radix-ui/react-icons\",\n  },\n}\n","import { getRegistryIcons } from \"@/src/registry/api\"\nimport { ICON_LIBRARIES } from \"@/src/utils/icon-libraries\"\nimport { Transformer } from \"@/src/utils/transformers\"\nimport { SourceFile, SyntaxKind } from \"ts-morph\"\n\n// Lucide is the default icon library in the registry.\nconst SOURCE_LIBRARY = \"lucide\"\n\nexport const transformIcons: Transformer = async ({ sourceFile, config }) => {\n  // No transform if we cannot read the icon library.\n  if (!config.iconLibrary || !(config.iconLibrary in ICON_LIBRARIES)) {\n    return sourceFile\n  }\n\n  const registryIcons = await getRegistryIcons()\n  const sourceLibrary = SOURCE_LIBRARY\n  const targetLibrary = config.iconLibrary\n\n  if (sourceLibrary === targetLibrary) {\n    return sourceFile\n  }\n\n  let targetedIcons: string[] = []\n  for (const importDeclaration of sourceFile.getImportDeclarations() ?? []) {\n    if (\n      importDeclaration.getModuleSpecifier()?.getText() !==\n      `\"${ICON_LIBRARIES[SOURCE_LIBRARY].import}\"`\n    ) {\n      continue\n    }\n\n    for (const specifier of importDeclaration.getNamedImports() ?? []) {\n      const iconName = specifier.getName()\n\n      const targetedIcon = registryIcons[iconName]?.[targetLibrary]\n\n      if (!targetedIcon || targetedIcons.includes(targetedIcon)) {\n        continue\n      }\n\n      targetedIcons.push(targetedIcon)\n\n      // Remove the named import.\n      specifier.remove()\n\n      // Replace with the targeted icon.\n      sourceFile\n        .getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement)\n        .filter((node) => node.getTagNameNode()?.getText() === iconName)\n        .forEach((node) => node.getTagNameNode()?.replaceWithText(targetedIcon))\n    }\n\n    // If the named import is empty, remove the import declaration.\n    if (importDeclaration.getNamedImports()?.length === 0) {\n      importDeclaration.remove()\n    }\n  }\n\n  if (targetedIcons.length > 0) {\n    const iconImportDeclaration = sourceFile.addImportDeclaration({\n      moduleSpecifier:\n        ICON_LIBRARIES[targetLibrary as keyof typeof ICON_LIBRARIES]?.import,\n      namedImports: targetedIcons.map((icon) => ({\n        name: icon,\n      })),\n    })\n\n    if (!_useSemicolon(sourceFile)) {\n      iconImportDeclaration.replaceWithText(\n        iconImportDeclaration.getText().replace(\";\", \"\")\n      )\n    }\n  }\n\n  return sourceFile\n}\n\nfunction _useSemicolon(sourceFile: SourceFile) {\n  return (\n    sourceFile.getImportDeclarations()?.[0]?.getText().endsWith(\";\") ?? false\n  )\n}\n","import { Config } from \"@/src/utils/get-config\"\nimport { Transformer } from \"@/src/utils/transformers\"\nimport { SyntaxKind } from \"ts-morph\"\n\nexport const transformImport: Transformer = async ({\n  sourceFile,\n  config,\n  isRemote,\n}) => {\n  const utilsAlias = config.aliases?.utils\n  const workspaceAlias =\n    typeof utilsAlias === \"string\" && utilsAlias.includes(\"/\")\n      ? utilsAlias.split(\"/\")[0]\n      : \"@\"\n  const utilsImport = `${workspaceAlias}/lib/utils`\n\n  if (![\".tsx\", \".ts\", \".jsx\", \".js\"].includes(sourceFile.getExtension())) {\n    return sourceFile\n  }\n\n  for (const specifier of sourceFile.getImportStringLiterals()) {\n    const updated = updateImportAliases(\n      specifier.getLiteralValue(),\n      config,\n      isRemote\n    )\n    specifier.setLiteralValue(updated)\n\n    // Replace `import { cn } from \"@/lib/utils\"`\n    if (utilsImport === updated || updated === \"@/lib/utils\") {\n      const importDeclaration = specifier.getFirstAncestorByKind(\n        SyntaxKind.ImportDeclaration\n      )\n      const isCnImport = importDeclaration\n        ?.getNamedImports()\n        .some((namedImport) => namedImport.getName() === \"cn\")\n\n      if (!isCnImport || !config.aliases.utils) {\n        continue\n      }\n\n      specifier.setLiteralValue(\n        utilsImport === updated\n          ? updated.replace(utilsImport, config.aliases.utils)\n          : config.aliases.utils\n      )\n    }\n  }\n\n  return sourceFile\n}\n\nfunction updateImportAliases(\n  moduleSpecifier: string,\n  config: Config,\n  isRemote: boolean = false\n) {\n  // Not a local import.\n  if (!moduleSpecifier.startsWith(\"@/\") && !isRemote) {\n    return moduleSpecifier\n  }\n\n  // This treats the remote as coming from a faux registry.\n  if (isRemote && moduleSpecifier.startsWith(\"@/\")) {\n    moduleSpecifier = moduleSpecifier.replace(/^@\\//, `@/registry/new-york/`)\n  }\n\n  // Not a registry import.\n  if (!moduleSpecifier.startsWith(\"@/registry/\")) {\n    // We fix the alias and return.\n    const alias = config.aliases.components.split(\"/\")[0]\n    return moduleSpecifier.replace(/^@\\//, `${alias}/`)\n  }\n\n  if (moduleSpecifier.match(/^@\\/registry\\/(.+)\\/ui/)) {\n    return moduleSpecifier.replace(\n      /^@\\/registry\\/(.+)\\/ui/,\n      config.aliases.ui ?? `${config.aliases.components}/ui`\n    )\n  }\n\n  if (\n    config.aliases.components &&\n    moduleSpecifier.match(/^@\\/registry\\/(.+)\\/components/)\n  ) {\n    return moduleSpecifier.replace(\n      /^@\\/registry\\/(.+)\\/components/,\n      config.aliases.components\n    )\n  }\n\n  if (config.aliases.lib && moduleSpecifier.match(/^@\\/registry\\/(.+)\\/lib/)) {\n    return moduleSpecifier.replace(\n      /^@\\/registry\\/(.+)\\/lib/,\n      config.aliases.lib\n    )\n  }\n\n  if (\n    config.aliases.hooks &&\n    moduleSpecifier.match(/^@\\/registry\\/(.+)\\/hooks/)\n  ) {\n    return moduleSpecifier.replace(\n      /^@\\/registry\\/(.+)\\/hooks/,\n      config.aliases.hooks\n    )\n  }\n\n  return moduleSpecifier.replace(\n    /^@\\/registry\\/[^/]+/,\n    config.aliases.components\n  )\n}\n","import { type Transformer } from \"@/src/utils/transformers\"\nimport { transformFromAstSync } from \"@babel/core\"\nimport { ParserOptions, parse } from \"@babel/parser\"\n// @ts-ignore\nimport transformTypescript from \"@babel/plugin-transform-typescript\"\nimport * as recast from \"recast\"\n\n// TODO.\n// I'm using recast for the AST here.\n// Figure out if ts-morph AST is compatible with Babel.\n\n// This is a copy of the babel options from recast/parser.\n// The goal here is to tolerate as much syntax as possible.\n// We want to be able to parse any valid tsx code.\n// See https://github.com/benjamn/recast/blob/master/parsers/_babel_options.ts.\nconst PARSE_OPTIONS: ParserOptions = {\n  sourceType: \"module\",\n  allowImportExportEverywhere: true,\n  allowReturnOutsideFunction: true,\n  startLine: 1,\n  tokens: true,\n  plugins: [\n    \"asyncGenerators\",\n    \"bigInt\",\n    \"classPrivateMethods\",\n    \"classPrivateProperties\",\n    \"classProperties\",\n    \"classStaticBlock\",\n    \"decimal\",\n    \"decorators-legacy\",\n    \"doExpressions\",\n    \"dynamicImport\",\n    \"exportDefaultFrom\",\n    \"exportNamespaceFrom\",\n    \"functionBind\",\n    \"functionSent\",\n    \"importAssertions\",\n    \"importMeta\",\n    \"nullishCoalescingOperator\",\n    \"numericSeparator\",\n    \"objectRestSpread\",\n    \"optionalCatchBinding\",\n    \"optionalChaining\",\n    [\n      \"pipelineOperator\",\n      {\n        proposal: \"minimal\",\n      },\n    ],\n    [\n      \"recordAndTuple\",\n      {\n        syntaxType: \"hash\",\n      },\n    ],\n    \"throwExpressions\",\n    \"topLevelAwait\",\n    \"v8intrinsic\",\n    \"typescript\",\n    \"jsx\",\n  ],\n}\n\nexport const transformJsx: Transformer<string> = async ({\n  sourceFile,\n  config,\n}) => {\n  const output = sourceFile.getFullText()\n\n  if (config.tsx) {\n    return output\n  }\n\n  const ast = recast.parse(output, {\n    parser: {\n      parse: (code: string) => {\n        return parse(code, PARSE_OPTIONS)\n      },\n    },\n  })\n\n  const result = transformFromAstSync(ast, output, {\n    cloneInputAst: false,\n    code: false,\n    ast: true,\n    plugins: [transformTypescript],\n    configFile: false,\n  })\n\n  if (!result || !result.ast) {\n    throw new Error(\"Failed to transform JSX\")\n  }\n\n  return recast.print(result.ast).code\n}\n","import { Transformer } from \"@/src/utils/transformers\"\nimport { SyntaxKind } from \"ts-morph\"\n\nconst directiveRegex = /^[\"']use client[\"']$/g\n\nexport const transformRsc: Transformer = async ({ sourceFile, config }) => {\n  if (config.rsc) {\n    return sourceFile\n  }\n\n  // Remove \"use client\" from the top of the file.\n  const first = sourceFile.getFirstChildByKind(SyntaxKind.ExpressionStatement)\n  if (first && directiveRegex.test(first.getText())) {\n    first.remove()\n  }\n\n  return sourceFile\n}\n","import { Transformer } from \"@/src/utils/transformers\"\nimport { SyntaxKind } from \"ts-morph\"\n\nimport {\n  TailwindVersion,\n  getProjectTailwindVersionFromConfig,\n} from \"../get-project-info\"\nimport { splitClassName } from \"./transform-css-vars\"\n\nexport const transformTwPrefixes: Transformer = async ({\n  sourceFile,\n  config,\n}) => {\n  if (!config.tailwind?.prefix) {\n    return sourceFile\n  }\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(config)\n\n  // Find the cva function calls.\n  sourceFile\n    .getDescendantsOfKind(SyntaxKind.CallExpression)\n    .filter((node) => node.getExpression().getText() === \"cva\")\n    .forEach((node) => {\n      // cva(base, ...)\n      if (node.getArguments()[0]?.isKind(SyntaxKind.StringLiteral)) {\n        const defaultClassNames = node.getArguments()[0]\n        if (defaultClassNames) {\n          defaultClassNames.replaceWithText(\n            `\"${applyPrefix(\n              defaultClassNames.getText()?.replace(/\"|'/g, \"\"),\n              config.tailwind.prefix,\n              tailwindVersion\n            )}\"`\n          )\n        }\n      }\n\n      // cva(..., { variants: { ... } })\n      if (node.getArguments()[1]?.isKind(SyntaxKind.ObjectLiteralExpression)) {\n        node\n          .getArguments()[1]\n          ?.getDescendantsOfKind(SyntaxKind.PropertyAssignment)\n          .find((node) => node.getName() === \"variants\")\n          ?.getDescendantsOfKind(SyntaxKind.PropertyAssignment)\n          .forEach((node) => {\n            node\n              .getDescendantsOfKind(SyntaxKind.PropertyAssignment)\n              .forEach((node) => {\n                const classNames = node.getInitializerIfKind(\n                  SyntaxKind.StringLiteral\n                )\n                if (classNames) {\n                  classNames?.replaceWithText(\n                    `\"${applyPrefix(\n                      classNames.getText()?.replace(/\"|'/g, \"\"),\n                      config.tailwind.prefix,\n                      tailwindVersion\n                    )}\"`\n                  )\n                }\n              })\n          })\n      }\n    })\n\n  // Find all jsx attributes with the name className.\n  sourceFile.getDescendantsOfKind(SyntaxKind.JsxAttribute).forEach((node) => {\n    if (node.getNameNode().getText() === \"className\") {\n      // className=\"...\"\n      if (node.getInitializer()?.isKind(SyntaxKind.StringLiteral)) {\n        const value = node.getInitializer()\n        if (value) {\n          value.replaceWithText(\n            `\"${applyPrefix(\n              value.getText()?.replace(/\"|'/g, \"\"),\n              config.tailwind.prefix,\n              tailwindVersion\n            )}\"`\n          )\n        }\n      }\n\n      // className={...}\n      if (node.getInitializer()?.isKind(SyntaxKind.JsxExpression)) {\n        // Check if it's a call to cn().\n        const callExpression = node\n          .getInitializer()\n          ?.getDescendantsOfKind(SyntaxKind.CallExpression)\n          .find((node) => node.getExpression().getText() === \"cn\")\n        if (callExpression) {\n          // Loop through the arguments.\n          callExpression.getArguments().forEach((node) => {\n            if (\n              node.isKind(SyntaxKind.ConditionalExpression) ||\n              node.isKind(SyntaxKind.BinaryExpression)\n            ) {\n              node\n                .getChildrenOfKind(SyntaxKind.StringLiteral)\n                .forEach((node) => {\n                  node.replaceWithText(\n                    `\"${applyPrefix(\n                      node.getText()?.replace(/\"|'/g, \"\"),\n                      config.tailwind.prefix,\n                      tailwindVersion\n                    )}\"`\n                  )\n                })\n            }\n\n            if (node.isKind(SyntaxKind.StringLiteral)) {\n              node.replaceWithText(\n                `\"${applyPrefix(\n                  node.getText()?.replace(/\"|'/g, \"\"),\n                  config.tailwind.prefix,\n                  tailwindVersion\n                )}\"`\n              )\n            }\n          })\n        }\n      }\n    }\n\n    // classNames={...}\n    if (node.getNameNode().getText() === \"classNames\") {\n      if (node.getInitializer()?.isKind(SyntaxKind.JsxExpression)) {\n        node\n          .getDescendantsOfKind(SyntaxKind.PropertyAssignment)\n          .forEach((node) => {\n            if (node.getInitializer()?.isKind(SyntaxKind.CallExpression)) {\n              const callExpression = node.getInitializerIfKind(\n                SyntaxKind.CallExpression\n              )\n              if (callExpression) {\n                // Loop through the arguments.\n                callExpression.getArguments().forEach((arg) => {\n                  if (arg.isKind(SyntaxKind.ConditionalExpression)) {\n                    arg\n                      .getChildrenOfKind(SyntaxKind.StringLiteral)\n                      .forEach((node) => {\n                        node.replaceWithText(\n                          `\"${applyPrefix(\n                            node.getText()?.replace(/\"|'/g, \"\"),\n                            config.tailwind.prefix,\n                            tailwindVersion\n                          )}\"`\n                        )\n                      })\n                  }\n\n                  if (arg.isKind(SyntaxKind.StringLiteral)) {\n                    arg.replaceWithText(\n                      `\"${applyPrefix(\n                        arg.getText()?.replace(/\"|'/g, \"\"),\n                        config.tailwind.prefix,\n                        tailwindVersion\n                      )}\"`\n                    )\n                  }\n                })\n              }\n            }\n\n            if (node.getInitializer()?.isKind(SyntaxKind.StringLiteral)) {\n              if (node.getNameNode().getText() !== \"variant\") {\n                const classNames = node.getInitializer()\n                if (classNames) {\n                  classNames.replaceWithText(\n                    `\"${applyPrefix(\n                      classNames.getText()?.replace(/\"|'/g, \"\"),\n                      config.tailwind.prefix,\n                      tailwindVersion\n                    )}\"`\n                  )\n                }\n              }\n            }\n          })\n      }\n    }\n  })\n\n  return sourceFile\n}\n\nexport function applyPrefix(\n  input: string,\n  prefix: string = \"\",\n  tailwindVersion: TailwindVersion\n) {\n  if (tailwindVersion === \"v3\") {\n    return input\n      .split(\" \")\n      .map((className) => {\n        const [variant, value, modifier] = splitClassName(className)\n        if (variant) {\n          return modifier\n            ? `${variant}:${prefix}${value}/${modifier}`\n            : `${variant}:${prefix}${value}`\n        } else {\n          return modifier\n            ? `${prefix}${value}/${modifier}`\n            : `${prefix}${value}`\n        }\n      })\n      .join(\" \")\n  }\n\n  return input\n    .split(\" \")\n    .map((className) =>\n      className.indexOf(`${prefix}:`) === 0\n        ? className\n        : `${prefix}:${className.trim()}`\n    )\n    .join(\" \")\n}\n\nexport function applyPrefixesCss(\n  css: string,\n  prefix: string,\n  tailwindVersion: TailwindVersion\n) {\n  const lines = css.split(\"\\n\")\n  for (let line of lines) {\n    if (line.includes(\"@apply\")) {\n      const originalTWCls = line.replace(\"@apply\", \"\").trim()\n      const prefixedTwCls = applyPrefix(originalTWCls, prefix, tailwindVersion)\n      css = css.replace(originalTWCls, prefixedTwCls)\n    }\n  }\n  return css\n}\n","import { registryBaseColorSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { transformCssVars } from \"@/src/utils/transformers/transform-css-vars\"\nimport { transformIcons } from \"@/src/utils/transformers/transform-icons\"\nimport { transformImport } from \"@/src/utils/transformers/transform-import\"\nimport { transformJsx } from \"@/src/utils/transformers/transform-jsx\"\nimport { transformRsc } from \"@/src/utils/transformers/transform-rsc\"\nimport { promises as fs } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path from \"path\"\nimport { Project, ScriptKind, type SourceFile } from \"ts-morph\"\nimport { z } from \"zod\"\n\nimport { transformTwPrefixes } from \"./transform-tw-prefix\"\n\nexport type TransformOpts = {\n  filename: string\n  raw: string\n  config: Config\n  baseColor?: z.infer<typeof registryBaseColorSchema>\n  transformJsx?: boolean\n  isRemote?: boolean\n}\n\nexport type Transformer<Output = SourceFile> = (\n  opts: TransformOpts & {\n    sourceFile: SourceFile\n  }\n) => Promise<Output>\n\nconst project = new Project({\n  compilerOptions: {},\n})\n\nasync function createTempSourceFile(filename: string) {\n  const dir = await fs.mkdtemp(path.join(tmpdir(), \"uidesu-\"))\n  return path.join(dir, filename)\n}\n\nexport async function transform(\n  opts: TransformOpts,\n  transformers: Transformer[] = [\n    transformImport,\n    transformRsc,\n    transformCssVars,\n    transformTwPrefixes,\n    transformIcons,\n  ]\n) {\n  const tempFile = await createTempSourceFile(opts.filename)\n  const sourceFile = project.createSourceFile(tempFile, opts.raw, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  for (const transformer of transformers) {\n    await transformer({ sourceFile, ...opts })\n  }\n\n  if (opts.transformJsx) {\n    return await transformJsx({\n      sourceFile,\n      ...opts,\n    })\n  }\n\n  return sourceFile.getText()\n}\n","import { Transformer } from \"@/src/utils/transformers\"\n\nexport const transformNext: Transformer = async ({ sourceFile }) => {\n  // export function middleware.\n  sourceFile.getFunctions().forEach((func) => {\n    if (func.getName() === \"middleware\") {\n      func.rename(\"proxy\")\n    }\n  })\n\n  // export const middleware.\n  sourceFile.getVariableDeclarations().forEach((variable) => {\n    if (variable.getName() === \"middleware\") {\n      variable.rename(\"proxy\")\n    }\n  })\n\n  // export { handler as middleware }.\n  sourceFile.getExportDeclarations().forEach((exportDecl) => {\n    const namedExports = exportDecl.getNamedExports()\n    namedExports.forEach((namedExport) => {\n      if (namedExport.getName() === \"middleware\") {\n        namedExport.setName(\"proxy\")\n      }\n      const aliasNode = namedExport.getAliasNode()\n      if (aliasNode?.getText() === \"middleware\") {\n        namedExport.setAlias(\"proxy\")\n      }\n    })\n  })\n\n  return sourceFile\n}\n","import { getRegistryBaseColor } from \"@/src/registry/api\"\nimport { RegistryItem, registryItemFileSchema } from \"@/src/schema\"\nimport { isContentSame } from \"@/src/utils/compare\"\nimport {\n  findExistingEnvFile,\n  getNewEnvKeys,\n  isEnvFile,\n  mergeEnvContent,\n  parseEnvContent,\n} from \"@/src/utils/env-helpers\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { resolveImport } from \"@/src/utils/resolve-import\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { transform } from \"@/src/utils/transformers\"\nimport { transformCssVars } from \"@/src/utils/transformers/transform-css-vars\"\nimport { transformIcons } from \"@/src/utils/transformers/transform-icons\"\nimport { transformImport } from \"@/src/utils/transformers/transform-import\"\nimport { transformNext } from \"@/src/utils/transformers/transform-next\"\nimport { transformRsc } from \"@/src/utils/transformers/transform-rsc\"\nimport { transformTwPrefixes } from \"@/src/utils/transformers/transform-tw-prefix\"\nimport { existsSync, promises as fs, statSync } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path, { basename } from \"path\"\nimport prompts from \"prompts\"\nimport { Project, ScriptKind } from \"ts-morph\"\nimport { loadConfig } from \"tsconfig-paths\"\nimport { z } from \"zod\"\n\nexport async function updateFiles(\n  files: RegistryItem[\"files\"],\n  config: Config,\n  options: {\n    overwrite?: boolean\n    force?: boolean\n    silent?: boolean\n    rootSpinner?: ReturnType<typeof spinner>\n    isRemote?: boolean\n    isWorkspace?: boolean\n    path?: string\n  }\n) {\n  if (!files?.length) {\n    return {\n      filesCreated: [],\n      filesUpdated: [],\n      filesSkipped: [],\n    }\n  }\n  options = {\n    overwrite: false,\n    force: false,\n    silent: false,\n    isRemote: false,\n    isWorkspace: false,\n    ...options,\n  }\n  const filesCreatedSpinner = spinner(`Updating files.`, {\n    silent: options.silent,\n  })?.start()\n\n  const [projectInfo, baseColor] = await Promise.all([\n    getProjectInfo(config.resolvedPaths.cwd),\n    config.tailwind.baseColor\n      ? getRegistryBaseColor(config.tailwind.baseColor)\n      : Promise.resolve(undefined),\n  ])\n\n  let filesCreated: string[] = []\n  let filesUpdated: string[] = []\n  let filesSkipped: string[] = []\n  let envVarsAdded: string[] = []\n  let envFile: string | null = null\n\n  for (let index = 0; index < files.length; index++) {\n    const file = files[index]\n    if (!file.content) {\n      continue\n    }\n\n    let filePath = resolveFilePath(file, config, {\n      isSrcDir: projectInfo?.isSrcDir,\n      framework: projectInfo?.framework.name,\n      commonRoot: findCommonRoot(\n        files.map((f) => f.path),\n        file.path\n      ),\n      path: options.path,\n      fileIndex: index,\n    })\n\n    if (!filePath) {\n      continue\n    }\n\n    const fileName = basename(file.path)\n    const targetDir = path.dirname(filePath)\n\n    if (!config.tsx) {\n      filePath = filePath.replace(/\\.tsx?$/, (match) =>\n        match === \".tsx\" ? \".jsx\" : \".js\"\n      )\n    }\n\n    if (isEnvFile(filePath) && !existsSync(filePath)) {\n      const alternativeEnvFile = findExistingEnvFile(targetDir)\n      if (alternativeEnvFile) {\n        filePath = alternativeEnvFile\n      }\n    }\n\n    const existingFile = existsSync(filePath)\n\n    // Check if the path exists and is a directory - we can't write to directories.\n    if (existingFile && statSync(filePath).isDirectory()) {\n      throw new Error(\n        `Cannot write to ${filePath}: path exists and is a directory. Please provide a file path instead.`\n      )\n    }\n\n    // Run our transformers.\n    // Skip transformers for .env files to preserve exact content\n    const content = isEnvFile(filePath)\n      ? file.content\n      : await transform(\n          {\n            filename: file.path,\n            raw: file.content,\n            config,\n            baseColor,\n            transformJsx: !config.tsx,\n            isRemote: options.isRemote,\n          },\n          [\n            transformImport,\n            transformRsc,\n            transformCssVars,\n            transformTwPrefixes,\n            transformIcons,\n            ...(_isNext16Middleware(filePath, projectInfo, config)\n              ? [transformNext]\n              : []),\n          ]\n        )\n\n    // Skip the file if it already exists and the content is the same.\n    // Exception: Don't skip .env files as we merge content instead of replacing\n    if (existingFile && !isEnvFile(filePath)) {\n      const existingFileContent = await fs.readFile(filePath, \"utf-8\")\n\n      if (\n        isContentSame(existingFileContent, content, {\n          // Ignore import differences for workspace components.\n          // TODO: figure out if we always want this.\n          ignoreImports: options.isWorkspace,\n        })\n      ) {\n        filesSkipped.push(path.relative(config.resolvedPaths.cwd, filePath))\n        continue\n      }\n    }\n\n    // Skip overwrite prompt for .env files - we'll handle them specially\n    if (existingFile && !options.overwrite && !isEnvFile(filePath)) {\n      filesCreatedSpinner.stop()\n      if (options.rootSpinner) {\n        options.rootSpinner.stop()\n      }\n      const { overwrite } = await prompts({\n        type: \"confirm\",\n        name: \"overwrite\",\n        message: `The file ${highlighter.info(\n          fileName\n        )} already exists. Would you like to overwrite?`,\n        initial: false,\n      })\n\n      if (!overwrite) {\n        filesSkipped.push(path.relative(config.resolvedPaths.cwd, filePath))\n        if (options.rootSpinner) {\n          options.rootSpinner.start()\n        }\n        continue\n      }\n      filesCreatedSpinner?.start()\n      if (options.rootSpinner) {\n        options.rootSpinner.start()\n      }\n    }\n\n    // Rename middleware.ts to proxy.ts for Next.js 16+.\n    if (_isNext16Middleware(filePath, projectInfo, config)) {\n      filePath = filePath.replace(/middleware\\.(ts|js)$/, \"proxy.$1\")\n    }\n\n    // Create the target directory if it doesn't exist.\n    if (!existsSync(targetDir)) {\n      await fs.mkdir(targetDir, { recursive: true })\n    }\n\n    // Special handling for .env files - append only new keys\n    if (isEnvFile(filePath) && existingFile) {\n      const existingFileContent = await fs.readFile(filePath, \"utf-8\")\n      const mergedContent = mergeEnvContent(existingFileContent, content)\n      envVarsAdded = getNewEnvKeys(existingFileContent, content)\n      envFile = path.relative(config.resolvedPaths.cwd, filePath)\n\n      if (!envVarsAdded.length) {\n        filesSkipped.push(path.relative(config.resolvedPaths.cwd, filePath))\n        continue\n      }\n\n      await fs.writeFile(filePath, mergedContent, \"utf-8\")\n      filesUpdated.push(path.relative(config.resolvedPaths.cwd, filePath))\n      continue\n    }\n\n    await fs.writeFile(filePath, content, \"utf-8\")\n\n    // Handle file creation logging\n    if (!existingFile) {\n      filesCreated.push(path.relative(config.resolvedPaths.cwd, filePath))\n\n      if (isEnvFile(filePath)) {\n        envVarsAdded = Object.keys(parseEnvContent(content))\n        envFile = path.relative(config.resolvedPaths.cwd, filePath)\n      }\n    } else {\n      filesUpdated.push(path.relative(config.resolvedPaths.cwd, filePath))\n    }\n  }\n\n  const allFiles = [...filesCreated, ...filesUpdated, ...filesSkipped]\n  const updatedFiles = await resolveImports(allFiles, config)\n\n  // Let's update filesUpdated with the updated files.\n  filesUpdated.push(...updatedFiles)\n\n  // If a file is in filesCreated and filesUpdated, we should remove it from filesUpdated.\n  filesUpdated = filesUpdated.filter((file) => !filesCreated.includes(file))\n\n  const hasUpdatedFiles = filesCreated.length || filesUpdated.length\n  if (!hasUpdatedFiles && !filesSkipped.length) {\n    filesCreatedSpinner?.info(\"No files updated.\")\n  }\n\n  // Remove duplicates.\n  filesCreated = Array.from(new Set(filesCreated))\n  filesUpdated = Array.from(new Set(filesUpdated))\n  filesSkipped = Array.from(new Set(filesSkipped))\n\n  if (filesCreated.length) {\n    filesCreatedSpinner?.succeed(\n      `Created ${filesCreated.length} ${\n        filesCreated.length === 1 ? \"file\" : \"files\"\n      }:`\n    )\n    if (!options.silent) {\n      for (const file of filesCreated) {\n        logger.log(`  - ${file}`)\n      }\n    }\n  } else {\n    filesCreatedSpinner?.stop()\n  }\n\n  if (filesUpdated.length) {\n    spinner(\n      `Updated ${filesUpdated.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    if (!options.silent) {\n      for (const file of filesUpdated) {\n        logger.log(`  - ${file}`)\n      }\n    }\n  }\n\n  if (filesSkipped.length) {\n    spinner(\n      `Skipped ${filesSkipped.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }: (files might be identical, use --overwrite to overwrite)`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    if (!options.silent) {\n      for (const file of filesSkipped) {\n        logger.log(`  - ${file}`)\n      }\n    }\n  }\n\n  if (envVarsAdded.length && envFile) {\n    spinner(\n      `Added the following variables to ${highlighter.info(envFile)}:`\n    )?.info()\n    if (!options.silent) {\n      for (const key of envVarsAdded) {\n        logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n      }\n    }\n  }\n\n  if (!options.silent) {\n    logger.break()\n  }\n\n  return {\n    filesCreated,\n    filesUpdated,\n    filesSkipped,\n  }\n}\n\nexport function resolveFilePath(\n  file: z.infer<typeof registryItemFileSchema>,\n  config: Config,\n  options: {\n    isSrcDir?: boolean\n    commonRoot?: string\n    framework?: ProjectInfo[\"framework\"][\"name\"]\n    path?: string\n    fileIndex?: number\n  }\n) {\n  // Handle custom path if provided.\n  if (options.path) {\n    const resolvedPath = path.isAbsolute(options.path)\n      ? options.path\n      : path.join(config.resolvedPaths.cwd, options.path)\n\n    const isFilePath = /\\.[^/\\\\]+$/.test(resolvedPath)\n\n    if (isFilePath) {\n      // We'll only use the custom path for the first file.\n      // This is for registry items with multiple files.\n      if (options.fileIndex === 0) {\n        return resolvedPath\n      }\n    } else {\n      // If the custom path is a directory,\n      // We'll place all files in the directory.\n      const fileName = path.basename(file.path)\n      return path.join(resolvedPath, fileName)\n    }\n  }\n\n  if (file.target) {\n    if (file.target.startsWith(\"~/\")) {\n      return path.join(config.resolvedPaths.cwd, file.target.replace(\"~/\", \"\"))\n    }\n\n    let target = file.target\n\n    if (file.type === \"registry:page\") {\n      target = resolvePageTarget(target, options.framework)\n      if (!target) {\n        return \"\"\n      }\n    }\n\n    return options.isSrcDir\n      ? path.join(config.resolvedPaths.cwd, \"src\", target.replace(\"src/\", \"\"))\n      : path.join(config.resolvedPaths.cwd, target.replace(\"src/\", \"\"))\n  }\n\n  const targetDir = resolveFileTargetDirectory(file, config)\n\n  const relativePath = resolveNestedFilePath(file.path, targetDir)\n  return path.join(targetDir, relativePath)\n}\n\nfunction resolveFileTargetDirectory(\n  file: z.infer<typeof registryItemFileSchema>,\n  config: Config\n) {\n  if (file.type === \"registry:ui\") {\n    return config.resolvedPaths.ui\n  }\n\n  if (file.type === \"registry:lib\") {\n    return config.resolvedPaths.lib\n  }\n\n  if (file.type === \"registry:block\" || file.type === \"registry:component\") {\n    return config.resolvedPaths.components\n  }\n\n  if (file.type === \"registry:hook\") {\n    return config.resolvedPaths.hooks\n  }\n\n  return config.resolvedPaths.components\n}\n\nexport function findCommonRoot(paths: string[], needle: string): string {\n  // Remove leading slashes for consistent handling\n  const normalizedPaths = paths.map((p) => p.replace(/^\\//, \"\"))\n  const normalizedNeedle = needle.replace(/^\\//, \"\")\n\n  // Get the directory path of the needle by removing the file name\n  const needleDir = normalizedNeedle.split(\"/\").slice(0, -1).join(\"/\")\n\n  // If needle is at root level, return empty string\n  if (!needleDir) {\n    return \"\"\n  }\n\n  // Split the needle directory into segments\n  const needleSegments = needleDir.split(\"/\")\n\n  // Start from the full path and work backwards\n  for (let i = needleSegments.length; i > 0; i--) {\n    const testPath = needleSegments.slice(0, i).join(\"/\")\n    // Check if this is a common root by verifying if any other paths start with it\n    const hasRelatedPaths = normalizedPaths.some(\n      (path) => path !== normalizedNeedle && path.startsWith(testPath + \"/\")\n    )\n    if (hasRelatedPaths) {\n      return \"/\" + testPath // Add leading slash back for the result\n    }\n  }\n\n  // If no common root found with other files, return the parent directory of the needle\n  return \"/\" + needleDir // Add leading slash back for the result\n}\n\nexport function resolveNestedFilePath(\n  filePath: string,\n  targetDir: string\n): string {\n  // Normalize paths by removing leading/trailing slashes\n  const normalizedFilePath = filePath.replace(/^\\/|\\/$/g, \"\")\n  const normalizedTargetDir = targetDir.replace(/^\\/|\\/$/g, \"\")\n\n  // Split paths into segments\n  const fileSegments = normalizedFilePath.split(\"/\")\n  const targetSegments = normalizedTargetDir.split(\"/\")\n\n  // Find the last matching segment from targetDir in filePath\n  const lastTargetSegment = targetSegments[targetSegments.length - 1]\n  const commonDirIndex = fileSegments.findIndex(\n    (segment) => segment === lastTargetSegment\n  )\n\n  if (commonDirIndex === -1) {\n    // Return just the filename if no common directory is found\n    return fileSegments[fileSegments.length - 1]\n  }\n\n  // Return everything after the common directory\n  return fileSegments.slice(commonDirIndex + 1).join(\"/\")\n}\n\nexport function resolvePageTarget(\n  target: string,\n  framework?: ProjectInfo[\"framework\"][\"name\"]\n) {\n  if (!framework) {\n    return \"\"\n  }\n\n  if (framework === \"next-app\") {\n    return target\n  }\n\n  if (framework === \"next-pages\") {\n    let result = target.replace(/^app\\//, \"pages/\")\n    result = result.replace(/\\/page(\\.[jt]sx?)$/, \"$1\")\n\n    return result\n  }\n\n  return \"\"\n}\n\nasync function resolveImports(filePaths: string[], config: Config) {\n  const project = new Project({\n    compilerOptions: {},\n  })\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n  const tsConfig = loadConfig(config.resolvedPaths.cwd)\n  const updatedFiles = []\n\n  if (!projectInfo || tsConfig.resultType === \"failed\") {\n    return []\n  }\n\n  for (const filepath of filePaths) {\n    const resolvedPath = path.resolve(config.resolvedPaths.cwd, filepath)\n\n    // Check if the file exists.\n    if (!existsSync(resolvedPath)) {\n      continue\n    }\n\n    const content = await fs.readFile(resolvedPath, \"utf-8\")\n\n    const dir = await fs.mkdtemp(path.join(tmpdir(), \"shadcn-\"))\n    const sourceFile = project.createSourceFile(\n      path.join(dir, basename(resolvedPath)),\n      content,\n      {\n        scriptKind: ScriptKind.TSX,\n      }\n    )\n\n    // Skip if the file extension is not one of the supported extensions.\n    if (![\".tsx\", \".ts\", \".jsx\", \".js\"].includes(sourceFile.getExtension())) {\n      continue\n    }\n\n    const importDeclarations = sourceFile.getImportDeclarations()\n    for (const importDeclaration of importDeclarations) {\n      const moduleSpecifier = importDeclaration.getModuleSpecifierValue()\n\n      // Filter out non-local imports.\n      if (\n        projectInfo?.aliasPrefix &&\n        !moduleSpecifier.startsWith(`${projectInfo.aliasPrefix}/`)\n      ) {\n        continue\n      }\n\n      // Find the probable import file path.\n      // This is where we expect to find the file on disk.\n      const probableImportFilePath = await resolveImport(\n        moduleSpecifier,\n        tsConfig\n      )\n\n      if (!probableImportFilePath) {\n        continue\n      }\n\n      // Find the actual import file path.\n      // This is the path where the file has been installed.\n      const resolvedImportFilePath = resolveModuleByProbablePath(\n        probableImportFilePath,\n        filePaths,\n        config\n      )\n\n      if (!resolvedImportFilePath) {\n        continue\n      }\n\n      // Convert the resolved import file path to an aliased import.\n      const newImport = toAliasedImport(\n        resolvedImportFilePath,\n        config,\n        projectInfo\n      )\n\n      if (!newImport || newImport === moduleSpecifier) {\n        continue\n      }\n\n      importDeclaration.setModuleSpecifier(newImport)\n\n      // Write the updated content to the file.\n      await fs.writeFile(resolvedPath, sourceFile.getFullText(), \"utf-8\")\n\n      // Track the updated file.\n      updatedFiles.push(filepath)\n    }\n  }\n\n  return updatedFiles\n}\n\n/**\n * Given an absolute \"probable\" import path (no ext),\n * plus an array of absolute file paths you already know about,\n * return 0N matches (best match first), and also check disk for any missing ones.\n */\nexport function resolveModuleByProbablePath(\n  probableImportFilePath: string,\n  files: string[],\n  config: Config,\n  extensions: string[] = [\".tsx\", \".ts\", \".js\", \".jsx\", \".css\"]\n) {\n  const cwd = path.normalize(config.resolvedPaths.cwd)\n\n  // 1) Build a set of POSIX-normalized, project-relative files\n  const relativeFiles = files.map((f) => f.split(path.sep).join(path.posix.sep))\n  const fileSet = new Set(relativeFiles)\n\n  // 2) Strip any existing extension off the absolute base path\n  const extInPath = path.extname(probableImportFilePath)\n  const hasExt = extInPath !== \"\"\n  const absBase = hasExt\n    ? probableImportFilePath.slice(0, -extInPath.length)\n    : probableImportFilePath\n\n  // 3) Compute the project-relative \"base\" directory for strong matching\n  const relBaseRaw = path.relative(cwd, absBase)\n  const relBase = relBaseRaw.split(path.sep).join(path.posix.sep)\n\n  // 4) Decide which extensions to try\n  const tryExts = hasExt ? [extInPath] : extensions\n\n  // 5) Collect candidates\n  const candidates = new Set<string>()\n\n  // 5a) Fastpath: [base + ext] and [base/index + ext]\n  for (const e of tryExts) {\n    const absCand = absBase + e\n    const relCand = path.posix.normalize(path.relative(cwd, absCand))\n    if (fileSet.has(relCand) || existsSync(absCand)) {\n      candidates.add(relCand)\n    }\n\n    const absIdx = path.join(absBase, `index${e}`)\n    const relIdx = path.posix.normalize(path.relative(cwd, absIdx))\n    if (fileSet.has(relIdx) || existsSync(absIdx)) {\n      candidates.add(relIdx)\n    }\n  }\n\n  // 5b) Fallback: scan known files by basename\n  const name = path.basename(absBase)\n  for (const f of relativeFiles) {\n    if (tryExts.some((e) => f.endsWith(`/${name}${e}`))) {\n      candidates.add(f)\n    }\n  }\n\n  // 6) If no matches, bail\n  if (candidates.size === 0) return null\n\n  // 7) Sort by (1) extension priority, then (2) \"strong\" base match\n  const sorted = Array.from(candidates).sort((a, b) => {\n    // a) extension order\n    const aExt = path.posix.extname(a)\n    const bExt = path.posix.extname(b)\n    const ord = tryExts.indexOf(aExt) - tryExts.indexOf(bExt)\n    if (ord !== 0) return ord\n    // b) strong match if path starts with relBase\n    const aStrong = relBase && a.startsWith(relBase) ? -1 : 1\n    const bStrong = relBase && b.startsWith(relBase) ? -1 : 1\n    return aStrong - bStrong\n  })\n\n  // 8) Return the first (best) candidate\n  return sorted[0]\n}\n\nexport function toAliasedImport(\n  filePath: string,\n  config: Config,\n  projectInfo: ProjectInfo\n): string | null {\n  const abs = path.normalize(path.join(config.resolvedPaths.cwd, filePath))\n\n  // 1 Find the longest matching alias root in resolvedPaths\n  //    e.g. key=\"ui\", root=\"//components/ui\" beats key=\"components\"\n  const matches = Object.entries(config.resolvedPaths)\n    .filter(\n      ([, root]) => root && abs.startsWith(path.normalize(root + path.sep))\n    )\n    .sort((a, b) => b[1].length - a[1].length)\n\n  if (matches.length === 0) {\n    return null\n  }\n  const [aliasKey, rootDir] = matches[0]\n\n  // 2 Compute the path UNDER that root\n  let rel = path.relative(rootDir, abs)\n  // force POSIX-style separators\n  rel = rel.split(path.sep).join(\"/\") // e.g. \"button/index.tsx\"\n\n  // 3 Strip code-file extensions, keep others (css, json, etc.)\n  const ext = path.posix.extname(rel)\n  const codeExts = [\".ts\", \".tsx\", \".js\", \".jsx\"]\n  const keepExt = codeExts.includes(ext) ? \"\" : ext\n  let noExt = rel.slice(0, rel.length - ext.length)\n\n  // 4 Collapse \"/index\" to its directory\n  if (noExt.endsWith(\"/index\")) {\n    noExt = noExt.slice(0, -\"/index\".length)\n  }\n\n  // 5 Build the aliased path\n  //    config.aliases[aliasKey] is e.g. \"@/components/ui\"\n  const aliasBase =\n    aliasKey === \"cwd\"\n      ? projectInfo.aliasPrefix\n      : config.aliases[aliasKey as keyof typeof config.aliases]\n  if (!aliasBase) {\n    return null\n  }\n  // if noExt is empty (i.e. file was exactly at the root), we import the root\n  let suffix = noExt === \"\" ? \"\" : `/${noExt}`\n\n  // Remove /src from suffix.\n  // Alias will handle this.\n  suffix = suffix.replace(\"/src\", \"\")\n\n  // 6 Prepend the prefix from projectInfo (e.g. \"@\") if needed\n  //    but usually config.aliases already include it.\n  return `${aliasBase}${suffix}${keepExt}`\n}\n\nfunction _isNext16Middleware(\n  filePath: string,\n  projectInfo: ProjectInfo | null,\n  config: Config\n) {\n  const isRootMiddleware =\n    filePath === path.join(config.resolvedPaths.cwd, \"middleware.ts\") ||\n    filePath === path.join(config.resolvedPaths.cwd, \"middleware.js\")\n\n  const isNextJs =\n    projectInfo?.framework.name === \"next-app\" ||\n    projectInfo?.framework.name === \"next-pages\"\n\n  if (!isRootMiddleware || !isNextJs || !projectInfo?.frameworkVersion) {\n    return false\n  }\n\n  const majorVersion = parseInt(projectInfo.frameworkVersion.split(\".\")[0])\n  const isNext16Plus = !isNaN(majorVersion) && majorVersion >= 16\n\n  return isNext16Plus\n}\n","import z from \"zod\";\nimport { Config } from \"../utils/get-config\";\nimport { getProjectInfo } from \"../utils/get-project-info\";\nimport { findCommonRoot, resolveFilePath } from \"../utils/updaters/update-files\";\nimport { registryItemFileSchema, registryItemSchema } from \"./schema\";\n\nexport function isUrl(path: string) {\n  try {\n    new URL(path);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function isLocalFile(path: string) {\n  return path.endsWith(\".json\") && !isUrl(path);\n}\n\nexport function isUniversalRegistryItem(\n  registryItem:\n    | Pick<z.infer<typeof registryItemSchema>, \"files\" | \"type\">\n    | null\n    | undefined\n): boolean {\n  if (!registryItem) {\n    return false;\n  }\n\n  if (\n    registryItem.type !== \"registry:item\" &&\n    registryItem.type !== \"registry:file\"\n  ) {\n    return false;\n  }\n\n  const files = registryItem.files ?? [];\n\n  return files.every(\n    (file) =>\n      !!file.target &&\n    (file.type === \"registry:file\" || file.type === \"registry:item\")\n  );\n}\n\n// Deduplicates files based on their resolved target paths.\n// When multiple files resolve to the same target path, the last one wins.\nexport async function deduplicateFilesByTarget(\n  filesArrays: Array<z.infer<typeof registryItemFileSchema>[] | undefined>,\n  config: Config\n) {\n  // Fallback to simple concatenation when we don't have complete config.\n  if (!canDeduplicateFiles(config)) {\n    return z\n      .array(registryItemFileSchema)\n      .parse(filesArrays.flat().filter(Boolean))\n  }\n\n  // Get project info for file resolution.\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n  const targetMap = new Map<string, z.infer<typeof registryItemFileSchema>>()\n  const allFiles = z\n    .array(registryItemFileSchema)\n    .parse(filesArrays.flat().filter(Boolean))\n\n  allFiles.forEach((file) => {\n    const resolvedPath = resolveFilePath(file, config, {\n      isSrcDir: projectInfo?.isSrcDir,\n      framework: projectInfo?.framework.name,\n      commonRoot: findCommonRoot(\n        allFiles.map((f) => f.path),\n        file.path\n      ),\n    })\n\n    if (resolvedPath) {\n      // Last one wins - overwrites previous entry.\n      targetMap.set(resolvedPath, file)\n    }\n  })\n\n  return Array.from(targetMap.values())\n}\n\n// Checks if the config has the minimum required paths for file deduplication.\nexport function canDeduplicateFiles(config: Config) {\n  return !!(\n    config?.resolvedPaths?.cwd &&\n    (config?.resolvedPaths?.ui ||\n      config?.resolvedPaths?.lib ||\n      config?.resolvedPaths?.components ||\n      config?.resolvedPaths?.hooks)\n  )\n}\n","import deepmerge from \"deepmerge\";\nimport { Config, createConfig } from \"../utils/get-config\";\nimport { BUILTIN_REGISTRIES, FALLBACK_STYLE } from \"./constants\";\nimport { configSchema } from \"./schema\";\n\nfunction resolveStyleFromConfig(config: Partial<Config> | Config) {\n  if (!config.style) {\n    return FALLBACK_STYLE;\n  }\n\n  // Check if we should use aodesu for tailwind\n  // We assume that if tailwind.config is empty, we're using tailwind v4.\n  if (config.style === \"aodesu\" && config.tailwind?.config === \"\") {\n    return FALLBACK_STYLE;\n  }\n\n  return config.style;\n}\n\nexport function configWithDefaults(config?: Partial<Config> | Config) {\n  const baseConfig = createConfig({\n    style: FALLBACK_STYLE,\n    registries: BUILTIN_REGISTRIES,\n  });\n\n  if (!config) {\n    return baseConfig;\n  }\n\n  return configSchema.parse(\n    deepmerge(baseConfig, {\n      ...config,\n      style: resolveStyleFromConfig(config),\n      registries: { ...BUILTIN_REGISTRIES, ...config.registries },\n    })\n  )\n};\n","interface RegistryContext {\n  headers: Record<string, Record<string, string>>\n}\n\nlet context: RegistryContext = {\n  headers: {},\n}\n\nexport function setRegistryHeaders(\n  headers: Record<string, Record<string, string>>\n) {\n  // Merge new headers with existing ones to preserve headers for nested dependencies\n  context.headers = { ...context.headers, ...headers };\n}\n\nexport function getRegistryHeadersFromContext(\n  url: string\n): Record<string, string> {\n  return context.headers[url] || {}\n};\n\nexport function clearRegistryContext() {\n  context.headers = {};\n}\n","import z from \"zod\";\nimport { Config } from \"../utils/get-config\";\nimport { buildUrlAndHeadersForRegistryItem } from \"./builder\";\nimport { configWithDefaults } from \"./config\";\nimport { clearRegistryContext } from \"./context\";\nimport { extractEnvVars } from \"./env\";\nimport { RegistryMissingEnvironmentVariablesError } from \"./errors\";\nimport { registryConfigItemSchema } from \"./schema\";\n\nexport function extractEnvVarsFromRegistryConfig(\n  config: z.infer<typeof registryConfigItemSchema>\n): string[] {\n  const vars = new Set<string>();\n\n  if (typeof config === \"string\") {\n    extractEnvVars(config).forEach((v) => vars.add(v));\n  } else {\n    extractEnvVars(config.url).forEach((v) => vars.add(v));\n\n    if (config.params) {\n      Object.values(config.params).forEach((value) => {\n        extractEnvVars(value).forEach((v) => vars.add(v));\n      })\n    }\n\n    if (config.headers) {\n      Object.values(config.headers).forEach((value) => {\n        extractEnvVars(value).forEach((v) => vars.add(v));\n      })\n    }\n  }\n\n  return Array.from(vars);\n}\n\nexport function validateRegistryConfig(\n  registryName: string,\n  config: z.infer<typeof registryConfigItemSchema>\n): void {\n  const requiredVars = extractEnvVarsFromRegistryConfig(config);\n  const missing = requiredVars.filter((v) => !process.env[v]);\n\n  if (missing.length > 0) {\n    throw new RegistryMissingEnvironmentVariablesError(registryName, missing);\n  }\n}\n\nexport function validateRegistryConfigForItems(\n  items: string[],\n  config?: Config\n): void {\n  for (const item of items) {\n    buildUrlAndHeadersForRegistryItem(item, configWithDefaults(config));\n  }\n\n  // Clear registry context after validation.\n  clearRegistryContext();\n}\n","import z from \"zod\";\nimport { Config } from \"../utils/get-config\";\nimport { REGISTRY_URL } from \"./constants\";\nimport { expandEnvVars } from \"./env\";\nimport { RegistryNotConfiguredError } from \"./errors\";\nimport { parseRegistryAndItemFromString } from \"./parser\";\nimport { registryConfigItemSchema } from \"./schema\";\nimport { isUrl } from \"./utils\";\nimport { validateRegistryConfig } from \"./validator\";\n\nconst NAME_PLACEHOLDER = \"{name}\";\nconst STYLE_PLACEHOLDER = \"{style}\";\nconst ENV_VAR_PATTER = /\\${(\\w+)}/g\nconst QUERY_PARAM_SEPARATOR = \"?\";\nconst QUERY_PARAM_DELIMITER = \"&\";\n\nexport function buildUrlAndHeadersForRegistryItem(\n  name: string,\n  config?: Config\n) {\n  const { registry, item } = parseRegistryAndItemFromString(name);\n\n  if (!registry) {\n    return null;\n  }\n\n  const registries = config?.registries || {};\n  const registryConfig = registries[registry];\n  if (!registryConfig) {\n    throw new RegistryNotConfiguredError(registry);\n  }\n\n  validateRegistryConfig(registry, registryConfig);\n\n  return {\n    url: buildUrlFromRegistryConfig(item, registryConfig, config),\n    headers: buildHeadersFromRegistryConfig(registryConfig),\n  }\n}\n\nexport function buildUrlFromRegistryConfig(\n  item: string,\n  registryConfig: z.infer<typeof registryConfigItemSchema>,\n  config?: Config\n) {\n  if (typeof registryConfig === \"string\") {\n    let url = registryConfig.replace(NAME_PLACEHOLDER, item);\n    if (config?.style && url.includes(STYLE_PLACEHOLDER)) {\n      url = url.replace(STYLE_PLACEHOLDER, config.style);\n    }\n    return expandEnvVars(url);\n  }\n\n  let baseUrl = registryConfig.url.replace(NAME_PLACEHOLDER, item);\n  if (config?.style && baseUrl.includes(STYLE_PLACEHOLDER)) {\n    baseUrl = baseUrl.replace(STYLE_PLACEHOLDER, config.style);\n  }\n  baseUrl = expandEnvVars(baseUrl);\n\n  if (!registryConfig.params) {\n    return baseUrl;\n  }\n\n  return appendQueryParams(baseUrl, registryConfig.params);\n}\n\nexport function buildHeadersFromRegistryConfig(\n  config: z.infer<typeof registryConfigItemSchema>\n) {\n  if (typeof config === \"string\" || !config.headers) {\n    return {}\n  }\n\n  const headers: Record<string, string> = {};\n\n  for (const [key, value] of Object.entries(config.headers)) {\n    const expandedValue = expandEnvVars(value);\n\n    if (shouldIncludeHeader(value, expandedValue)) {\n      headers[key] = expandedValue;\n    }\n  }\n\n  return headers;\n}\n\nfunction appendQueryParams(baseUrl: string, params: Record<string, string>) {\n  const urlParams = new URLSearchParams();\n\n  for (const [key, value] of Object.entries(params)) {\n    const expandedValue = expandEnvVars(value);\n    if (expandedValue) {\n      urlParams.append(key, expandedValue);\n    }\n  }\n\n  const queryString = urlParams.toString();\n  if (!queryString) {\n    return baseUrl;\n  }\n\n  const separator = baseUrl.includes(QUERY_PARAM_SEPARATOR)\n    ? QUERY_PARAM_DELIMITER\n    : QUERY_PARAM_SEPARATOR;\n\n  return `${baseUrl}${separator}${queryString}`;\n}\n\nfunction shouldIncludeHeader(originalValue: string, expandedValue: string) {\n  const trimmedExpanded = expandedValue.trim();\n\n  if (!trimmedExpanded) {\n    return false;\n  }\n\n  // If the original value contains valid en vars, only include if expansion changed the value.\n  if (originalValue.includes(\"${\")) {\n    // Check if there are actual en vars in the string\n    const envVars = originalValue.match(ENV_VAR_PATTER);\n    if (envVars) {\n      const templateWithoutVars = originalValue\n        .replace(ENV_VAR_PATTER, \"\")\n        .trim();\n\n      return trimmedExpanded !== templateWithoutVars;\n    }\n  }\n\n  return true;\n}\n\nexport function resolveRegistryUrl(pathOrUrl: string) {\n  if (isUrl(pathOrUrl)) {\n    // If the url contains /chat/b, we assume it's the v0 registry.\n    // We need to add the /json suffix if it's missing.\n    const url = new URL(pathOrUrl);\n    if (url.pathname.match(/\\/chat\\/b\\//) && !url.pathname.endsWith(\"/json\")) {\n      url.pathname = `${url.pathname}/json`\n    }\n\n    return url.toString();\n  }\n\n  return `${REGISTRY_URL}/${pathOrUrl}`;\n}\n","import { resolveRegistryUrl } from \"@/src/registry/builder\"\nimport { getRegistryHeadersFromContext } from \"@/src/registry/context\"\nimport {\n  RegistryFetchError,\n  RegistryForbiddenError,\n  RegistryLocalFileError,\n  RegistryNotFoundError,\n  RegistryParseError,\n  RegistryUnauthorizedError,\n} from \"@/src/registry/errors\"\nimport { registryItemSchema } from \"@/src/schema\"\nimport { promises as fs } from \"fs\"\nimport { HttpsProxyAgent } from \"https-proxy-agent\"\nimport fetch from \"node-fetch\"\nimport { homedir } from \"os\"\nimport path from \"path\"\nimport { z } from \"zod\"\n\nconst agent = process.env.https_proxy\n  ? new HttpsProxyAgent(process.env.https_proxy)\n  : undefined\n\nconst registryCache = new Map<string, Promise<any>>()\n\nexport function clearRegistryCache() {\n  registryCache.clear()\n}\n\nexport async function fetchRegistry(\n  paths: string[],\n  options: { useCache?: boolean } = {}\n) {\n  options = {\n    useCache: true,\n    ...options,\n  }\n\n  try {\n    const results = await Promise.all(\n      paths.map(async (path) => {\n        const url = resolveRegistryUrl(path)\n\n        // Check cache first if caching is enabled\n        if (options.useCache && registryCache.has(url)) {\n          return registryCache.get(url)\n        }\n\n        // Store the promise in the cache before awaiting if caching is enabled.\n        const fetchPromise = (async () => {\n          // Get headers from context for this URL.\n          const headers = getRegistryHeadersFromContext(url)\n\n          const response = await fetch(url, {\n            agent,\n            headers: {\n              ...headers,\n            },\n          })\n\n          if (!response.ok) {\n            let messageFromServer = undefined\n\n            if (\n              response.headers.get(\"content-type\")?.includes(\"application/json\")\n            ) {\n              const json = await response.json()\n              const parsed = z\n                .object({\n                  // RFC 7807.\n                  detail: z.string().optional(),\n                  title: z.string().optional(),\n                  // Standard error response.\n                  message: z.string().optional(),\n                  error: z.string().optional(),\n                })\n                .safeParse(json)\n\n              if (parsed.success) {\n                // Prefer RFC 7807 detail field, then message field.\n                messageFromServer = parsed.data.detail || parsed.data.message\n\n                if (parsed.data.error) {\n                  messageFromServer = `[${parsed.data.error}] ${messageFromServer}`\n                }\n              }\n            }\n\n            if (response.status === 401) {\n              throw new RegistryUnauthorizedError(url, messageFromServer)\n            }\n\n            if (response.status === 404) {\n              throw new RegistryNotFoundError(url, messageFromServer)\n            }\n\n            if (response.status === 403) {\n              throw new RegistryForbiddenError(url, messageFromServer)\n            }\n\n            throw new RegistryFetchError(\n              url,\n              response.status,\n              messageFromServer\n            )\n          }\n\n          return response.json()\n        })()\n\n        if (options.useCache) {\n          registryCache.set(url, fetchPromise)\n        }\n        return fetchPromise\n      })\n    )\n\n    return results\n  } catch (error) {\n    throw error\n  }\n}\n\nexport async function fetchRegistryLocal(filePath: string) {\n  try {\n    // Handle tilde expansion for home directory\n    let expandedPath = filePath\n    if (filePath.startsWith(\"~/\")) {\n      expandedPath = path.join(homedir(), filePath.slice(2))\n    }\n\n    const resolvedPath = path.resolve(expandedPath)\n    const content = await fs.readFile(resolvedPath, \"utf8\")\n    const parsed = JSON.parse(content)\n\n    try {\n      return registryItemSchema.parse(parsed)\n    } catch (error) {\n      throw new RegistryParseError(filePath, error)\n    }\n  } catch (error) {\n    // Check if this is a file not found error\n    if (\n      error instanceof Error &&\n      (error.message.includes(\"ENOENT\") ||\n        error.message.includes(\"no such file\"))\n    ) {\n      throw new RegistryLocalFileError(filePath, error)\n    }\n    // Re-throw parse errors as-is\n    if (error instanceof RegistryParseError) {\n      throw error\n    }\n    // For other errors (like JSON parse errors), throw as local file error\n    throw new RegistryLocalFileError(filePath, error)\n  }\n}\n","import {\n  registryItemCssVarsSchema,\n  registryItemTailwindSchema,\n} from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { TailwindVersion } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport deepmerge from \"deepmerge\"\nimport { promises as fs } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path from \"path\"\nimport objectToString from \"stringify-object\"\nimport { type Config as TailwindConfig } from \"tailwindcss\"\nimport {\n  ArrayLiteralExpression,\n  ObjectLiteralExpression,\n  Project,\n  PropertyAssignment,\n  QuoteKind,\n  ScriptKind,\n  SyntaxKind,\n  VariableStatement,\n} from \"ts-morph\"\nimport { z } from \"zod\"\n\nexport type UpdaterTailwindConfig = Omit<TailwindConfig, \"plugins\"> & {\n  // We only want string plugins for now.\n  plugins?: string[]\n}\n\nexport async function updateTailwindConfig(\n  tailwindConfig:\n    | z.infer<typeof registryItemTailwindSchema>[\"config\"]\n    | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n    tailwindVersion?: TailwindVersion\n  }\n) {\n  if (!tailwindConfig) {\n    return\n  }\n\n  options = {\n    silent: false,\n    tailwindVersion: \"v3\",\n    ...options,\n  }\n\n  // No tailwind config in v4.\n  if (options.tailwindVersion === \"v4\") {\n    return\n  }\n\n  const tailwindFileRelativePath = path.relative(\n    config.resolvedPaths.cwd,\n    config.resolvedPaths.tailwindConfig\n  )\n  const tailwindSpinner = spinner(\n    `Updating ${highlighter.info(tailwindFileRelativePath)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(config.resolvedPaths.tailwindConfig, \"utf8\")\n  const output = await transformTailwindConfig(raw, tailwindConfig, config)\n  await fs.writeFile(config.resolvedPaths.tailwindConfig, output, \"utf8\")\n  tailwindSpinner?.succeed()\n}\n\nexport async function transformTailwindConfig(\n  input: string,\n  tailwindConfig: UpdaterTailwindConfig,\n  config: Config\n) {\n  const sourceFile = await _createSourceFile(input, config)\n  // Find the object with content property.\n  // This is faster than traversing the default export.\n  // TODO: maybe we do need to traverse the default export?\n  const configObject = sourceFile\n    .getDescendantsOfKind(SyntaxKind.ObjectLiteralExpression)\n    .find((node) =>\n      node\n        .getProperties()\n        .some(\n          (property) =>\n            property.isKind(SyntaxKind.PropertyAssignment) &&\n            property.getName() === \"content\"\n        )\n    )\n\n  // We couldn't find the config object, so we return the input as is.\n  if (!configObject) {\n    return input\n  }\n\n  const quoteChar = _getQuoteChar(configObject)\n\n  // Add darkMode.\n  addTailwindConfigProperty(\n    configObject,\n    {\n      name: \"darkMode\",\n      value: \"class\",\n    },\n    { quoteChar }\n  )\n\n  // Add Tailwind config plugins.\n  tailwindConfig.plugins?.forEach((plugin) => {\n    addTailwindConfigPlugin(configObject, plugin)\n  })\n\n  // Add Tailwind config theme.\n  if (tailwindConfig.theme) {\n    await addTailwindConfigTheme(configObject, tailwindConfig.theme)\n  }\n\n  return sourceFile.getFullText()\n}\n\nfunction addTailwindConfigProperty(\n  configObject: ObjectLiteralExpression,\n  property: {\n    name: string\n    value: string\n  },\n  {\n    quoteChar,\n  }: {\n    quoteChar: string\n  }\n) {\n  const existingProperty = configObject.getProperty(\"darkMode\")\n\n  if (!existingProperty) {\n    const newProperty = {\n      name: property.name,\n      initializer: `[${quoteChar}${property.value}${quoteChar}]`,\n    }\n\n    // We need to add darkMode as the first property.\n    if (property.name === \"darkMode\") {\n      configObject.insertPropertyAssignment(0, newProperty)\n      return configObject\n    }\n\n    configObject.addPropertyAssignment(newProperty)\n\n    return configObject\n  }\n\n  if (existingProperty.isKind(SyntaxKind.PropertyAssignment)) {\n    const initializer = existingProperty.getInitializer()\n    const newValue = `${quoteChar}${property.value}${quoteChar}`\n\n    // If property is a string, change it to an array and append.\n    if (initializer?.isKind(SyntaxKind.StringLiteral)) {\n      const initializerText = initializer.getText()\n      initializer.replaceWithText(`[${initializerText}, ${newValue}]`)\n      return configObject\n    }\n\n    // If property is an array, append.\n    if (initializer?.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      // Check if the array already contains the value.\n      if (\n        initializer\n          .getElements()\n          .map((element) => element.getText())\n          .includes(newValue)\n      ) {\n        return configObject\n      }\n      initializer.addElement(newValue)\n    }\n\n    return configObject\n  }\n\n  return configObject\n}\n\nasync function addTailwindConfigTheme(\n  configObject: ObjectLiteralExpression,\n  theme: UpdaterTailwindConfig[\"theme\"]\n) {\n  // Ensure there is a theme property.\n  if (!configObject.getProperty(\"theme\")) {\n    configObject.addPropertyAssignment({\n      name: \"theme\",\n      initializer: \"{}\",\n    })\n  }\n\n  // Nest all spread properties.\n  nestSpreadProperties(configObject)\n\n  const themeProperty = configObject\n    .getPropertyOrThrow(\"theme\")\n    ?.asKindOrThrow(SyntaxKind.PropertyAssignment)\n\n  const themeInitializer = themeProperty.getInitializer()\n  if (themeInitializer?.isKind(SyntaxKind.ObjectLiteralExpression)) {\n    const themeObjectString = themeInitializer.getText()\n    const themeObject = await parseObjectLiteral(themeObjectString)\n    const result = deepmerge(themeObject, theme, {\n      arrayMerge: (dst, src) => src,\n    })\n    const resultString = objectToString(result)\n      .replace(/\\'\\.\\.\\.(.*)\\'/g, \"...$1\") // Remove quote around spread element\n      .replace(/\\'\\\"/g, \"'\") // Replace `\\\" with \"\n      .replace(/\\\"\\'/g, \"'\") // Replace `\\\" with \"\n      .replace(/\\'\\[/g, \"[\") // Replace `[ with [\n      .replace(/\\]\\'/g, \"]\") // Replace `] with ]\n      .replace(/\\'\\\\\\'/g, \"'\") // Replace `\\' with '\n      .replace(/\\\\\\'/g, \"'\") // Replace \\' with '\n      .replace(/\\\\\\'\\'/g, \"'\")\n      .replace(/\\'\\'/g, \"'\")\n    themeInitializer.replaceWithText(resultString)\n  }\n\n  // Unnest all spread properties.\n  unnestSpreadProperties(configObject)\n}\n\nfunction addTailwindConfigPlugin(\n  configObject: ObjectLiteralExpression,\n  plugin: string\n) {\n  const existingPlugins = configObject.getProperty(\"plugins\")\n\n  if (!existingPlugins) {\n    configObject.addPropertyAssignment({\n      name: \"plugins\",\n      initializer: `[${plugin}]`,\n    })\n\n    return configObject\n  }\n\n  if (existingPlugins.isKind(SyntaxKind.PropertyAssignment)) {\n    const initializer = existingPlugins.getInitializer()\n\n    if (initializer?.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      if (\n        initializer\n          .getElements()\n          .map((element) => {\n            return element.getText().replace(/[\"']/g, \"\")\n          })\n          .includes(plugin.replace(/[\"']/g, \"\"))\n      ) {\n        return configObject\n      }\n      initializer.addElement(plugin)\n    }\n\n    return configObject\n  }\n\n  return configObject\n}\n\nexport async function _createSourceFile(input: string, config: Config | null) {\n  const dir = await fs.mkdtemp(path.join(tmpdir(), \"uidesu-\"))\n  const resolvedPath =\n    config?.resolvedPaths?.tailwindConfig || \"tailwind.config.ts\"\n  const tempFile = path.join(dir, `uidesu-${path.basename(resolvedPath)}`)\n\n  const project = new Project({\n    compilerOptions: {},\n  })\n  const sourceFile = project.createSourceFile(tempFile, input, {\n    // Note: .js and .mjs can still be valid for TS projects.\n    // We can't infer TypeScript from config.tsx.\n    scriptKind:\n      path.extname(resolvedPath) === \".ts\" ? ScriptKind.TS : ScriptKind.JS,\n  })\n\n  return sourceFile\n}\n\nexport function _getQuoteChar(configObject: ObjectLiteralExpression) {\n  return configObject\n    .getFirstDescendantByKind(SyntaxKind.StringLiteral)\n    ?.getQuoteKind() === QuoteKind.Single\n    ? \"'\"\n    : '\"'\n}\n\nexport function nestSpreadProperties(obj: ObjectLiteralExpression) {\n  const properties = obj.getProperties()\n\n  for (let i = 0; i < properties.length; i++) {\n    const prop = properties[i]\n    if (prop.isKind(SyntaxKind.SpreadAssignment)) {\n      const spreadAssignment = prop.asKindOrThrow(SyntaxKind.SpreadAssignment)\n      const spreadText = spreadAssignment.getExpression().getText()\n\n      // Replace spread with a property assignment\n      obj.insertPropertyAssignment(i, {\n        // Need to escape the name with \" so that deepmerge doesn't mishandle the key\n        name: `\"___${spreadText.replace(/^\\.\\.\\./, \"\")}\"`,\n        initializer: `\"...${spreadText.replace(/^\\.\\.\\./, \"\")}\"`,\n      })\n\n      // Remove the original spread assignment\n      spreadAssignment.remove()\n    } else if (prop.isKind(SyntaxKind.PropertyAssignment)) {\n      const propAssignment = prop.asKindOrThrow(SyntaxKind.PropertyAssignment)\n      const initializer = propAssignment.getInitializer()\n\n      if (\n        initializer &&\n        initializer.isKind(SyntaxKind.ObjectLiteralExpression)\n      ) {\n        // Recursively process nested object literals\n        nestSpreadProperties(\n          initializer.asKindOrThrow(SyntaxKind.ObjectLiteralExpression)\n        )\n      } else if (\n        initializer &&\n        initializer.isKind(SyntaxKind.ArrayLiteralExpression)\n      ) {\n        nestSpreadElements(\n          initializer.asKindOrThrow(SyntaxKind.ArrayLiteralExpression)\n        )\n      }\n    }\n  }\n}\n\nexport function nestSpreadElements(arr: ArrayLiteralExpression) {\n  const elements = arr.getElements()\n  for (let j = 0; j < elements.length; j++) {\n    const element = elements[j]\n    if (element.isKind(SyntaxKind.ObjectLiteralExpression)) {\n      // Recursive check on objects within arrays\n      nestSpreadProperties(\n        element.asKindOrThrow(SyntaxKind.ObjectLiteralExpression)\n      )\n    } else if (element.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      // Recursive check on nested arrays\n      nestSpreadElements(\n        element.asKindOrThrow(SyntaxKind.ArrayLiteralExpression)\n      )\n    } else if (element.isKind(SyntaxKind.SpreadElement)) {\n      const spreadText = element.getText()\n      // Spread element within an array\n      arr.removeElement(j)\n      arr.insertElement(j, `\"${spreadText}\"`)\n    }\n  }\n}\n\nexport function unnestSpreadProperties(obj: ObjectLiteralExpression) {\n  const properties = obj.getProperties()\n\n  for (let i = 0; i < properties.length; i++) {\n    const prop = properties[i]\n    if (prop.isKind(SyntaxKind.PropertyAssignment)) {\n      const propAssignment = prop as PropertyAssignment\n      const initializer = propAssignment.getInitializer()\n\n      if (initializer && initializer.isKind(SyntaxKind.StringLiteral)) {\n        const value = initializer\n          .asKindOrThrow(SyntaxKind.StringLiteral)\n          .getLiteralValue()\n        if (value.startsWith(\"...\")) {\n          obj.insertSpreadAssignment(i, { expression: value.slice(3) })\n          propAssignment.remove()\n        }\n      } else if (initializer?.isKind(SyntaxKind.ObjectLiteralExpression)) {\n        unnestSpreadProperties(initializer as ObjectLiteralExpression)\n      } else if (\n        initializer &&\n        initializer.isKind(SyntaxKind.ArrayLiteralExpression)\n      ) {\n        unsetSpreadElements(\n          initializer.asKindOrThrow(SyntaxKind.ArrayLiteralExpression)\n        )\n      }\n    }\n  }\n}\n\nexport function unsetSpreadElements(arr: ArrayLiteralExpression) {\n  const elements = arr.getElements()\n  for (let j = 0; j < elements.length; j++) {\n    const element = elements[j]\n    if (element.isKind(SyntaxKind.ObjectLiteralExpression)) {\n      // Recursive check on objects within arrays\n      unnestSpreadProperties(\n        element.asKindOrThrow(SyntaxKind.ObjectLiteralExpression)\n      )\n    } else if (element.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      // Recursive check on nested arrays\n      unsetSpreadElements(\n        element.asKindOrThrow(SyntaxKind.ArrayLiteralExpression)\n      )\n    } else if (element.isKind(SyntaxKind.StringLiteral)) {\n      const spreadText = element.getText()\n      // check if spread element\n      const spreadTest = /(?:^['\"])(\\.\\.\\..*)(?:['\"]$)/g\n      if (spreadTest.test(spreadText)) {\n        arr.removeElement(j)\n        arr.insertElement(j, spreadText.replace(spreadTest, \"$1\"))\n      }\n    }\n  }\n}\n\nasync function parseObjectLiteral(objectLiteralString: string): Promise<any> {\n  const sourceFile = await _createSourceFile(\n    `const theme = ${objectLiteralString}`,\n    null\n  )\n\n  const statement = sourceFile.getStatements()[0]\n  if (statement?.getKind() === SyntaxKind.VariableStatement) {\n    const declaration = (statement as VariableStatement)\n      .getDeclarationList()\n      ?.getDeclarations()[0]\n    const initializer = declaration.getInitializer()\n    if (initializer?.isKind(SyntaxKind.ObjectLiteralExpression)) {\n      return await parseObjectLiteralExpression(initializer)\n    }\n  }\n\n  throw new Error(\"Invalid input: not an object literal\")\n}\n\nfunction parseObjectLiteralExpression(node: ObjectLiteralExpression): any {\n  const result: any = {}\n  for (const property of node.getProperties()) {\n    if (property.isKind(SyntaxKind.PropertyAssignment)) {\n      const name = property.getName().replace(/\\'/g, \"\")\n      if (\n        property.getInitializer()?.isKind(SyntaxKind.ObjectLiteralExpression)\n      ) {\n        result[name] = parseObjectLiteralExpression(\n          property.getInitializer() as ObjectLiteralExpression\n        )\n      } else if (\n        property.getInitializer()?.isKind(SyntaxKind.ArrayLiteralExpression)\n      ) {\n        result[name] = parseArrayLiteralExpression(\n          property.getInitializer() as ArrayLiteralExpression\n        )\n      } else {\n        result[name] = parseValue(property.getInitializer())\n      }\n    }\n  }\n  return result\n}\n\nfunction parseArrayLiteralExpression(node: ArrayLiteralExpression): any[] {\n  const result: any[] = []\n  for (const element of node.getElements()) {\n    if (element.isKind(SyntaxKind.ObjectLiteralExpression)) {\n      result.push(\n        parseObjectLiteralExpression(\n          element.asKindOrThrow(SyntaxKind.ObjectLiteralExpression)\n        )\n      )\n    } else if (element.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      result.push(\n        parseArrayLiteralExpression(\n          element.asKindOrThrow(SyntaxKind.ArrayLiteralExpression)\n        )\n      )\n    } else {\n      result.push(parseValue(element))\n    }\n  }\n  return result\n}\n\nfunction parseValue(node: any): any {\n  switch (node.getKind()) {\n    case SyntaxKind.StringLiteral:\n      return node.getText()\n    case SyntaxKind.NumericLiteral:\n      return Number(node.getText())\n    case SyntaxKind.TrueKeyword:\n      return true\n    case SyntaxKind.FalseKeyword:\n      return false\n    case SyntaxKind.NullKeyword:\n      return null\n    case SyntaxKind.ArrayLiteralExpression:\n      return node.getElements().map(parseValue)\n    case SyntaxKind.ObjectLiteralExpression:\n      return parseObjectLiteralExpression(node)\n    default:\n      return node.getText()\n  }\n}\n\nexport function buildTailwindThemeColorsFromCssVars(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>\n) {\n  const result: Record<string, any> = {}\n\n  for (const key of Object.keys(cssVars)) {\n    const parts = key.split(\"-\")\n    const colorName = parts[0]\n    const subType = parts.slice(1).join(\"-\")\n\n    if (subType === \"\") {\n      if (typeof result[colorName] === \"object\") {\n        result[colorName].DEFAULT = `hsl(var(--${key}))`\n      } else {\n        result[colorName] = `hsl(var(--${key}))`\n      }\n    } else {\n      if (typeof result[colorName] !== \"object\") {\n        result[colorName] = { DEFAULT: `hsl(var(--${colorName}))` }\n      }\n      result[colorName][subType] = `hsl(var(--${key}))`\n    }\n  }\n\n  // Remove DEFAULT if it's not in the original cssVars\n  for (const [colorName, value] of Object.entries(result)) {\n    if (\n      typeof value === \"object\" &&\n      value.DEFAULT === `hsl(var(--${colorName}))` &&\n      !(colorName in cssVars)\n    ) {\n      delete value.DEFAULT\n    }\n  }\n\n  return result\n}\n","// Internal function that fetches registry items without clearing context.\nimport { Config, getTargetStyleFromConfig } from \"@/src/utils/get-config\";\nimport { getProjectTailwindVersionFromConfig } from \"@/src/utils/get-project-info\";\nimport { buildTailwindThemeColorsFromCssVars } from \"@/src/utils/updaters/update-tailwind-config\";\nimport { createHash } from \"crypto\";\nimport deepmerge from \"deepmerge\";\nimport path from \"path\";\nimport z from \"zod\";\nimport { getRegistryBaseColor, getUidesuRegistryIndex } from \"./api\";\nimport { buildUrlAndHeadersForRegistryItem, resolveRegistryUrl } from \"./builder\";\nimport { setRegistryHeaders } from \"./context\";\nimport { RegistryNotConfiguredError, RegistryParseError } from \"./errors\";\nimport { fetchRegistry, fetchRegistryLocal } from \"./fetcher\";\nimport { parseRegistryAndItemFromString } from \"./parser\";\nimport { registryItemSchema, registryResolvedItemsTreeSchema } from \"./schema\";\nimport { deduplicateFilesByTarget, isLocalFile, isUrl } from \"./utils\";\n\nexport function resolveRegistryItemsFromRegistries(\n  items: string[],\n  config: Config\n) {\n  const registryHeaders: Record<string, Record<string, string>> = {};\n  const resolvedItems = [...items];\n\n  if (!config?.registries) {\n    setRegistryHeaders({});\n    return resolvedItems;\n  }\n\n  for (let i = 0; i < resolvedItems.length; i++) {\n    const resolved = buildUrlAndHeadersForRegistryItem(resolvedItems[i], config);\n\n    if (resolved) {\n      resolvedItems[i] = resolved.url;\n\n      if (Object.keys(resolved.headers).length > 0) {\n        registryHeaders[resolved.url] = resolved.headers;\n      }\n    }\n  }\n\n  setRegistryHeaders(registryHeaders);\n\n  return resolvedItems;\n}\n\n// This is used for recursive dependecy resolution.\nexport async function fetchRegistryItems(\n  items: string[],\n  config: Config,\n  options: { useCache?: boolean } = {}\n) {\n  const results = await Promise.all(\n    items.map(async (item) => {\n      if (isLocalFile(item)) {\n        return fetchRegistryLocal(item);\n      }\n\n      if (isUrl(item)) {\n        const [result] = await fetchRegistry([item], options);\n        try {\n          return registryItemSchema.parse(result);\n        } catch (error) {\n          throw new RegistryParseError(item, error);\n        }\n      }\n\n      if (item.startsWith(\"@\") && config?.registries) {\n        const paths = resolveRegistryItemsFromRegistries([item], config);\n        const [result] = await fetchRegistry(paths, options);\n        try {\n          return registryItemSchema.parse(result);\n        } catch (error) {\n          throw new RegistryParseError(item, error);\n        }\n      }\n\n\n      const path = `styles/${config?.style ?? \"aodesu\"}/${item}.json`;\n      const [result] = await fetchRegistry([path], options);\n        console.log(\"TEST - LLEGO AKI\")\n      try {\n        return registryItemSchema.parse(result);\n      } catch (error) {\n        throw new RegistryParseError(item, error);\n      }\n    })\n  )\n\n  return results;\n}\n\n// Helper schema for items with source tracking\nconst registryItemWithSourceSchema = registryItemSchema.extend({\n  _source: z.string().optional(),\n});\n\n\n// Resolves a list of registry items with all their dependencies and returns\n// a complete installation bundle with merged configuration.\nexport async function resolveRegistryTree(\n  names: z.infer<typeof registryItemSchema>[\"name\"][],\n  config: Config,\n  options: { useCache?: boolean } = {}\n) {\n  options = {\n    useCache: true,\n    ...options,\n  }\n\n  let payload: z.infer<typeof registryItemWithSourceSchema>[] = []\n  let allDependencyItems: z.infer<typeof registryItemWithSourceSchema>[] = []\n  let allDependencyRegistryNames: string[] = []\n\n  const uniqueNames = Array.from(new Set(names))\n\n  const results = await fetchRegistryItems(uniqueNames, config, options)\n\n  const resultMap = new Map<string, z.infer<typeof registryItemSchema>>()\n  for (let i = 0; i < results.length; i++) {\n    if (results[i]) {\n      resultMap.set(uniqueNames[i], results[i])\n    }\n  }\n\n  for (const [sourceName, item] of Array.from(resultMap.entries())) {\n    // Add source tracking\n    const itemWithSource: z.infer<typeof registryItemWithSourceSchema> = {\n      ...item,\n      _source: sourceName,\n    }\n    payload.push(itemWithSource)\n\n    if (item.registryDependencies) {\n      // Resolve namespace syntax and set headers for dependencies\n      let resolvedDependencies = item.registryDependencies\n\n      // Check for namespaced dependencies when no registries are configured\n      if (!config?.registries) {\n        const namespacedDeps = item.registryDependencies.filter((dep: string) =>\n          dep.startsWith(\"@\")\n        )\n        if (namespacedDeps.length > 0) {\n          const { registry } = parseRegistryAndItemFromString(namespacedDeps[0])\n          throw new RegistryNotConfiguredError(registry)\n        }\n      } else {\n        resolvedDependencies = resolveRegistryItemsFromRegistries(\n          item.registryDependencies,\n          config\n        )\n      }\n\n      const { items, registryNames } = await resolveDependenciesRecursively(\n        resolvedDependencies,\n        config,\n        options,\n        new Set(uniqueNames)\n      )\n      allDependencyItems.push(...items)\n      allDependencyRegistryNames.push(...registryNames)\n    }\n  }\n\n  payload.push(...allDependencyItems)\n\n  // Handle any remaining registry names that need index resolution\n  if (allDependencyRegistryNames.length > 0) {\n    // Remove duplicates from registry names\n    const uniqueRegistryNames = Array.from(new Set(allDependencyRegistryNames))\n\n    // Separate namespaced and non-namespaced items\n    const nonNamespacedItems = uniqueRegistryNames.filter(\n      (name) => !name.startsWith(\"@\")\n    )\n    const namespacedDepItems = uniqueRegistryNames.filter((name) =>\n      name.startsWith(\"@\")\n    )\n\n    // Handle namespaced dependency items\n    if (namespacedDepItems.length > 0) {\n      // This will now throw specific errors on failure\n      const depResults = await fetchRegistryItems(\n        namespacedDepItems,\n        config,\n        options\n      )\n\n      for (let i = 0; i < depResults.length; i++) {\n        const item = depResults[i]\n        const itemWithSource: z.infer<typeof registryItemWithSourceSchema> = {\n          ...item,\n          _source: namespacedDepItems[i],\n        }\n        payload.push(itemWithSource)\n      }\n    }\n\n    // For non-namespaced items, we need the index and style resolution\n    if (nonNamespacedItems.length > 0) {\n      const index = await getUidesuRegistryIndex()\n      if (!index && payload.length === 0) {\n        return null\n      }\n\n      if (index) {\n        // If we're resolving the index, we want it to go first\n        if (nonNamespacedItems.includes(\"index\")) {\n          nonNamespacedItems.unshift(\"index\")\n        }\n\n        // Resolve non-namespaced items through the existing flow\n        // Get URLs for all registry items including their dependencies\n        const registryUrls: string[] = []\n        for (const name of nonNamespacedItems) {\n          const itemDependencies = await resolveRegistryDependencies(\n            name,\n            config,\n            options\n          )\n          registryUrls.push(...itemDependencies)\n        }\n\n        // Deduplicate URLs\n        const uniqueUrls = Array.from(new Set(registryUrls))\n        let result = await fetchRegistry(uniqueUrls, options)\n        const registryPayload = z.array(registryItemSchema).parse(result)\n        payload.push(...registryPayload)\n      }\n    }\n  }\n\n  if (!payload.length) {\n    return null\n  }\n\n  // No deduplication - we want to support multiple items with the same name from different sources\n\n  // If we're resolving the index, we want to fetch\n  // the theme item if a base color is provided.\n  // We do this for index only.\n  // Other components will ship with their theme tokens.\n  if (\n    uniqueNames.includes(\"index\") ||\n    allDependencyRegistryNames.includes(\"index\")\n  ) {\n    if (config.tailwind.baseColor) {\n      const theme = await registryGetTheme(config.tailwind.baseColor, config)\n      if (theme) {\n        payload.unshift(theme)\n      }\n    }\n  }\n\n  // Build source map for topological sort\n  const sourceMap = new Map<z.infer<typeof registryItemSchema>, string>()\n  payload.forEach((item) => {\n    // Use the _source property if it was added, otherwise use the name\n    const source = item._source || item.name\n    sourceMap.set(item, source)\n  })\n\n  // Apply topological sort to ensure dependencies come before dependents\n  payload = topologicalSortRegistryItems(payload, sourceMap)\n\n  // Sort the payload so that registry:theme items come first,\n  // while maintaining the relative order of all items.\n  payload.sort((a, b) => {\n    if (a.type === \"registry:theme\" && b.type !== \"registry:theme\") {\n      return -1\n    }\n    if (a.type !== \"registry:theme\" && b.type === \"registry:theme\") {\n      return 1\n    }\n    return 0\n  })\n\n  let tailwind = {}\n  payload.forEach((item) => {\n    tailwind = deepmerge(tailwind, item.tailwind ?? {})\n  })\n\n  let cssVars = {}\n  payload.forEach((item) => {\n    cssVars = deepmerge(cssVars, item.cssVars ?? {})\n  })\n\n  let css = {}\n  payload.forEach((item) => {\n    css = deepmerge(css, item.css ?? {})\n  })\n\n  let docs = \"\"\n  payload.forEach((item) => {\n    if (item.docs) {\n      docs += `${item.docs}\\n`\n    }\n  })\n\n  let envVars = {}\n  payload.forEach((item) => {\n    envVars = deepmerge(envVars, item.envVars ?? {})\n  })\n\n  // Deduplicate files based on resolved target paths.\n  const deduplicatedFiles = await deduplicateFilesByTarget(\n    payload.map((item) => item.files ?? []),\n    config\n  )\n\n  const parsed = registryResolvedItemsTreeSchema.parse({\n    dependencies: deepmerge.all(payload.map((item) => item.dependencies ?? [])),\n    devDependencies: deepmerge.all(\n      payload.map((item) => item.devDependencies ?? [])\n    ),\n    files: deduplicatedFiles,\n    tailwind,\n    cssVars,\n    css,\n    docs,\n  })\n\n  if (Object.keys(envVars).length > 0) {\n    parsed.envVars = envVars\n  }\n\n  return parsed\n}\n\nasync function resolveDependenciesRecursively(\n  dependencies: string[],\n  config: Config,\n  options: { useCache?: boolean } = {},\n  visited: Set<string> = new Set()\n) {\n  const items: z.infer<typeof registryItemSchema>[] = []\n  const registryNames: string[] = []\n\n  for (const dep of dependencies) {\n    if (visited.has(dep)) {\n      continue\n    }\n    visited.add(dep)\n\n    // Handle URLs and local files directly.\n    if (isUrl(dep) || isLocalFile(dep)) {\n      const [item] = await fetchRegistryItems([dep], config, options)\n      if (item) {\n        items.push(item)\n        if (item.registryDependencies) {\n          // Resolve namespaced dependencies to set proper headers.\n          const resolvedDeps = config?.registries\n            ? resolveRegistryItemsFromRegistries(\n                item.registryDependencies,\n                config\n              )\n            : item.registryDependencies\n\n          const nested = await resolveDependenciesRecursively(\n            resolvedDeps,\n            config,\n            options,\n            visited\n          )\n          items.push(...nested.items)\n          registryNames.push(...nested.registryNames)\n        }\n      }\n    }\n    // Handle namespaced items (e.g., @one/foo, @two/bar).\n    else if (dep.startsWith(\"@\") && config?.registries) {\n      // Check if the registry exists.\n      const { registry } = parseRegistryAndItemFromString(dep)\n      if (registry && !(registry in config.registries)) {\n        throw new RegistryNotConfiguredError(registry)\n      }\n\n      // Let getRegistryItem handle the namespaced item with config\n      // This ensures proper authentication headers are used\n      const [item] = await fetchRegistryItems([dep], config, options)\n      if (item) {\n        items.push(item)\n        if (item.registryDependencies) {\n          // Resolve namespaced dependencies to set proper headers.\n          const resolvedDeps = config?.registries\n            ? resolveRegistryItemsFromRegistries(\n                item.registryDependencies,\n                config\n              )\n            : item.registryDependencies\n\n          const nested = await resolveDependenciesRecursively(\n            resolvedDeps,\n            config,\n            options,\n            visited\n          )\n          items.push(...nested.items)\n          registryNames.push(...nested.registryNames)\n        }\n      }\n    }\n    // Handle regular component names.\n    else {\n      registryNames.push(dep)\n\n      if (config) {\n        try {\n          const [item] = await fetchRegistryItems([dep], config, options)\n          if (item && item.registryDependencies) {\n            // Resolve namespaced dependencies to set proper headers.\n            const resolvedDeps = config?.registries\n              ? resolveRegistryItemsFromRegistries(\n                  item.registryDependencies,\n                  config\n                )\n              : item.registryDependencies\n\n            const nested = await resolveDependenciesRecursively(\n              resolvedDeps,\n              config,\n              options,\n              visited\n            )\n            items.push(...nested.items)\n            registryNames.push(...nested.registryNames)\n          }\n        } catch (error) {\n          // If we can't fetch the registry item, that's okay - we'll still\n          // include the name.\n        }\n      }\n    }\n  }\n\n  return { items, registryNames }\n}\n\nasync function resolveRegistryDependencies(\n  url: string,\n  config: Config,\n  options: { useCache?: boolean } = {}\n) {\n  if (isUrl(url)) {\n    return [url]\n  }\n\n  const { registryNames } = await resolveDependenciesRecursively(\n    [url],\n    config,\n    options,\n    new Set()\n  )\n\n  const style = config.resolvedPaths?.cwd\n    ? await getTargetStyleFromConfig(config.resolvedPaths.cwd, config.style)\n    : config.style\n\n  const urls = registryNames.map((name) =>\n    resolveRegistryUrl(isUrl(name) ? name : `styles/${style}/${name}.json`)\n  )\n\n  return Array.from(new Set(urls))\n}\n\nasync function registryGetTheme(name: string, config: Config) {\n  const [baseColor, tailwindVersion] = await Promise.all([\n    getRegistryBaseColor(name),\n    getProjectTailwindVersionFromConfig(config),\n  ])\n  if (!baseColor) {\n    return null\n  }\n\n  // TODO: Move this to the registry i.e registry:theme.\n  const theme = {\n    name,\n    type: \"registry:theme\",\n    tailwind: {\n      config: {\n        theme: {\n          extend: {\n            borderRadius: {\n              lg: \"var(--radius)\",\n              md: \"calc(var(--radius) - 2px)\",\n              sm: \"calc(var(--radius) - 4px)\",\n            },\n            colors: {},\n          },\n        },\n      },\n    },\n    cssVars: {\n      theme: {},\n      light: {\n        radius: \"0.5rem\",\n      },\n      dark: {},\n    },\n  } satisfies z.infer<typeof registryItemSchema>\n\n  if (config.tailwind.cssVariables) {\n    theme.tailwind.config.theme.extend.colors = {\n      ...theme.tailwind.config.theme.extend.colors,\n      ...buildTailwindThemeColorsFromCssVars(baseColor.cssVars.dark ?? {}),\n    }\n    theme.cssVars = {\n      theme: {\n        ...baseColor.cssVars.theme,\n        ...theme.cssVars.theme,\n      },\n      light: {\n        ...baseColor.cssVars.light,\n        ...theme.cssVars.light,\n      },\n      dark: {\n        ...baseColor.cssVars.dark,\n        ...theme.cssVars.dark,\n      },\n    }\n\n    if (tailwindVersion === \"v4\" && baseColor.cssVarsV4) {\n      theme.cssVars = {\n        theme: {\n          ...baseColor.cssVarsV4.theme,\n          ...theme.cssVars.theme,\n        },\n        light: {\n          radius: \"0.625rem\",\n          ...baseColor.cssVarsV4.light,\n        },\n        dark: {\n          ...baseColor.cssVarsV4.dark,\n        },\n      }\n    }\n  }\n\n  return theme\n}\n\nfunction computeItemHash(\n  item: Pick<z.infer<typeof registryItemSchema>, \"name\">,\n  source?: string\n) {\n  const identifier = source || item.name\n\n  const hash = createHash(\"sha256\")\n    .update(identifier)\n    .digest(\"hex\")\n    .substring(0, 8)\n\n  return `${item.name}::${hash}`\n}\n\nfunction extractItemIdentifierFromDependency(dependency: string) {\n  if (isUrl(dependency)) {\n    const url = new URL(dependency)\n    const pathname = url.pathname\n    const match = pathname.match(/\\/([^/]+)\\.json$/)\n    const name = match ? match[1] : path.basename(pathname, \".json\")\n\n    return {\n      name,\n      hash: computeItemHash({ name }, dependency),\n    }\n  }\n\n  if (isLocalFile(dependency)) {\n    const match = dependency.match(/\\/([^/]+)\\.json$/)\n    const name = match ? match[1] : path.basename(dependency, \".json\")\n\n    return {\n      name,\n      hash: computeItemHash({ name }, dependency),\n    }\n  }\n\n  const { item } = parseRegistryAndItemFromString(dependency)\n  return {\n    name: item,\n    hash: computeItemHash({ name: item }, dependency),\n  }\n}\n\nfunction topologicalSortRegistryItems(\n  items: z.infer<typeof registryItemSchema>[],\n  sourceMap: Map<z.infer<typeof registryItemSchema>, string>\n) {\n  const itemMap = new Map<string, z.infer<typeof registryItemSchema>>()\n  const hashToItem = new Map<string, z.infer<typeof registryItemSchema>>()\n  const inDegree = new Map<string, number>()\n  const adjacencyList = new Map<string, string[]>()\n\n  items.forEach((item) => {\n    const source = sourceMap.get(item) || item.name\n    const hash = computeItemHash(item, source)\n\n    itemMap.set(hash, item)\n    hashToItem.set(hash, item)\n    inDegree.set(hash, 0)\n    adjacencyList.set(hash, [])\n  })\n\n  // Build a map of dependency to possible items.\n  const depToHashes = new Map<string, string[]>()\n  items.forEach((item) => {\n    const source = sourceMap.get(item) || item.name\n    const hash = computeItemHash(item, source)\n\n    if (!depToHashes.has(item.name)) {\n      depToHashes.set(item.name, [])\n    }\n    depToHashes.get(item.name)!.push(hash)\n\n    if (source !== item.name) {\n      if (!depToHashes.has(source)) {\n        depToHashes.set(source, [])\n      }\n      depToHashes.get(source)!.push(hash)\n    }\n  })\n\n  items.forEach((item) => {\n    const itemSource = sourceMap.get(item) || item.name\n    const itemHash = computeItemHash(item, itemSource)\n\n    if (item.registryDependencies) {\n      item.registryDependencies.forEach((dep) => {\n        let depHash: string | undefined\n\n        const exactMatches = depToHashes.get(dep) || []\n        if (exactMatches.length === 1) {\n          depHash = exactMatches[0]\n        } else if (exactMatches.length > 1) {\n          // Multiple matches - try to disambiguate.\n          // For now, just use the first one and warn.\n          depHash = exactMatches[0]\n        } else {\n          const { name } = extractItemIdentifierFromDependency(dep)\n          const nameMatches = depToHashes.get(name) || []\n          if (nameMatches.length > 0) {\n            depHash = nameMatches[0]\n          }\n        }\n\n        if (depHash && itemMap.has(depHash)) {\n          adjacencyList.get(depHash)!.push(itemHash)\n          inDegree.set(itemHash, inDegree.get(itemHash)! + 1)\n        }\n      })\n    }\n  })\n\n  // Implements Kahn's algorithm.\n  const queue: string[] = []\n  const sorted: z.infer<typeof registryItemSchema>[] = []\n\n  inDegree.forEach((degree, hash) => {\n    if (degree === 0) {\n      queue.push(hash)\n    }\n  })\n\n  while (queue.length > 0) {\n    const currentHash = queue.shift()!\n    const item = itemMap.get(currentHash)!\n    sorted.push(item)\n\n    adjacencyList.get(currentHash)!.forEach((dependentHash) => {\n      const newDegree = inDegree.get(dependentHash)! - 1\n      inDegree.set(dependentHash, newDegree)\n\n      if (newDegree === 0) {\n        queue.push(dependentHash)\n      }\n    })\n  }\n\n  if (sorted.length !== items.length) {\n    console.warn(\"Circular dependency detected in registry items\")\n    // Return all items even if there are circular dependencies\n    // Items not in sorted are part of circular dependencies\n    const sortedHashes = new Set(\n      sorted.map((item) => {\n        const source = sourceMap.get(item) || item.name\n        return computeItemHash(item, source)\n      })\n    )\n\n    items.forEach((item) => {\n      const source = sourceMap.get(item) || item.name\n      const hash = computeItemHash(item, source)\n      if (!sortedHashes.has(hash)) {\n        sorted.push(item)\n      }\n    })\n  }\n\n  return sorted\n}\n","import z from \"zod\";\nimport { Config } from \"../utils/get-config\";\nimport { handleError } from \"../utils/handle-error\";\nimport { logger } from \"../utils/logger\";\nimport { buildUrlAndHeadersForRegistryItem } from \"./builder\";\nimport { configWithDefaults } from \"./config\";\nimport { BASE_COLORS, REGISTRY_URL } from \"./constants\";\nimport { clearRegistryContext, setRegistryHeaders } from \"./context\";\nimport { RegistriesIndexParseError, RegistryInvalidNamespaceError, RegistryNotFoundError, RegistryParseError } from \"./errors\";\nimport { fetchRegistry } from \"./fetcher\";\nimport { fetchRegistryItems } from \"./resolver\";\nimport { iconsSchema, registriesIndexSchema, registryBaseColorSchema, registryIndexSchema, registrySchema, stylesSchema } from \"./schema\";\nimport { isUrl } from \"./utils\";\n\nexport async function getRegistry(\n  name: string,\n  options?: {\n    config?: Partial<Config>\n    useCache?: boolean\n  }\n) {\n  const { config, useCache } = options || {};\n\n  if (isUrl(name)) {\n    const [result] = await fetchRegistry([name], { useCache });\n    try {\n      return registrySchema.parse(result);\n    } catch (error) {\n      throw new RegistryParseError(name, error);\n    }\n  }\n\n  if (!name.startsWith(\"@\")) {\n    throw new RegistryInvalidNamespaceError(name);\n  }\n\n  let registryName = name;\n  if (!registryName.endsWith(\"/registry\")) {\n    registryName = `${registryName}/registry`\n  }\n\n  const urlAndHeaders = buildUrlAndHeadersForRegistryItem(\n    registryName as `@${string}`,\n    configWithDefaults(config)\n  );\n\n  if (!urlAndHeaders?.url) {\n    throw new RegistryNotFoundError(registryName);\n  }\n\n  if (urlAndHeaders.headers && Object.keys(urlAndHeaders.headers).length > 0) {\n    setRegistryHeaders({\n      [urlAndHeaders.url]: urlAndHeaders.headers,\n    })\n  }\n\n  const [result] = await fetchRegistry([urlAndHeaders.url], { useCache });\n\n  try {\n    return registrySchema.parse(result);\n  } catch (error) {\n    throw new RegistryParseError(registryName, error);\n  }\n}\n\nexport async function getRegistryItems(\n  items: string[],\n  options?: {\n    config?: Partial<Config>\n    useCache?: boolean\n  }\n) {\n  const { config, useCache } = options || {};\n\n  clearRegistryContext();\n\n  return fetchRegistryItems(items, configWithDefaults(config), { useCache })\n}\n\nexport async function getUidesuRegistryIndex() {\n  try {\n    const [result] = await fetchRegistry([\"index.json\"])\n\n    return registryIndexSchema.parse(result)\n  } catch (error) {\n    logger.error(\"\\n\")\n    handleError(error)\n  }\n}\n\nexport async function getRegistryStyles() {\n  try {\n    const [result] = await fetchRegistry([\"styles/index.json\"]);\n\n    return stylesSchema.parse(result);\n  } catch (error) {\n    logger.error(\"\\n\");\n    handleError(error);\n    return [];\n  }\n}\n\nexport async function getRegistryIcons() {\n  try {\n    const [result] = await fetchRegistry([\"icons/index.json\"])\n    return iconsSchema.parse(result)\n  } catch (error) {\n    handleError(error)\n    return {}\n  }\n}\n\nexport async function getRegistryBaseColors() {\n  return BASE_COLORS\n}\n\nexport async function getRegistryBaseColor(baseColor: string) {\n  try {\n    const [result] = await fetchRegistry([`colors/${baseColor}.json`])\n\n    return registryBaseColorSchema.parse(result)\n  } catch (error) {\n    handleError(error)\n  }\n}\n\nexport async function getRegistriesIndex(options?: { useCache?: boolean }) {\n  options = {\n    useCache: true,\n    ...options,\n  }\n\n  const url = `${REGISTRY_URL}/registries.json`\n  const [data] = await fetchRegistry([url], {\n    useCache: options.useCache,\n  })\n\n  try {\n    return registriesIndexSchema.parse(data)\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      throw new RegistriesIndexParseError(error)\n    }\n\n    throw error\n  }\n}\n","import path from \"path\"\n\nexport function isSafeTarget(targetPath: string, cwd: string): boolean {\n  // Check for null bytes which can be used to bypass validations.\n  if (targetPath.includes(\"\\0\")) {\n    return false\n  }\n\n  // Decode URL-encoded sequences to catch encoded traversal attempts.\n  let decodedPath: string\n  try {\n    // Decode multiple times to catch double-encoded sequences.\n    decodedPath = targetPath\n    let prevPath = \"\"\n    while (decodedPath !== prevPath && decodedPath.includes(\"%\")) {\n      prevPath = decodedPath\n      decodedPath = decodeURIComponent(decodedPath)\n    }\n  } catch {\n    // If decoding fails, treat as unsafe.\n    return false\n  }\n\n  // Normalize both paths to handle different path separators.\n  // Convert Windows backslashes to forward slashes for consistent handling.\n  const normalizedTarget = path.normalize(decodedPath.replace(/\\\\/g, \"/\"))\n  const normalizedRoot = path.normalize(cwd)\n\n  // Check for explicit path traversal sequences in both encoded and decoded forms.\n  // Allow [...] pattern which is common in framework routing (e.g., [...slug])\n  const hasPathTraversal = (path: string) => {\n    // Remove [...] patterns before checking for ..\n    const withoutBrackets = path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n    return withoutBrackets.includes(\"..\")\n  }\n\n  if (\n    hasPathTraversal(normalizedTarget) ||\n    hasPathTraversal(decodedPath) ||\n    hasPathTraversal(targetPath)\n  ) {\n    return false\n  }\n\n  // Check for current directory references that might be used in traversal.\n  // First, remove [...] patterns to avoid false positives\n  const cleanPath = (path: string) => path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n  const cleanTarget = cleanPath(targetPath)\n  const cleanDecoded = cleanPath(decodedPath)\n\n  const suspiciousPatterns = [\n    /\\.\\.[\\/\\\\]/, // ../ or ..\\\n    /[\\/\\\\]\\.\\./, // /.. or \\..\n    /\\.\\./, // .. anywhere\n    /\\.\\.%/, // URL encoded traversal\n    /\\x00/, // null byte\n    /[\\x01-\\x1f]/, // control characters\n  ]\n\n  if (\n    suspiciousPatterns.some(\n      (pattern) => pattern.test(cleanTarget) || pattern.test(cleanDecoded)\n    )\n  ) {\n    return false\n  }\n\n  // Allow ~/ at the start (home directory expansion within project) but reject ~/../ patterns.\n  if (\n    (targetPath.includes(\"~\") || decodedPath.includes(\"~\")) &&\n    (targetPath.includes(\"../\") || decodedPath.includes(\"../\"))\n  ) {\n    return false\n  }\n\n  // Check for Windows drive letters (even on non-Windows systems for safety).\n  const driveLetterRegex = /^[a-zA-Z]:[\\/\\\\]/\n  if (driveLetterRegex.test(decodedPath)) {\n    // On Windows, check if it starts with the project root.\n    if (process.platform === \"win32\") {\n      return decodedPath.toLowerCase().startsWith(cwd.toLowerCase())\n    }\n    // On non-Windows systems, reject all Windows absolute paths.\n    return false\n  }\n\n  // If it's an absolute path, ensure it's within the project root.\n  if (path.isAbsolute(normalizedTarget)) {\n    return normalizedTarget.startsWith(normalizedRoot + path.sep)\n  }\n\n  // For relative paths, resolve and check if within project bounds.\n  const resolvedPath = path.resolve(normalizedRoot, normalizedTarget)\n  return (\n    resolvedPath.startsWith(normalizedRoot + path.sep) ||\n    resolvedPath === normalizedRoot\n  )\n}\n","import { registryItemCssSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { promises as fs } from \"fs\"\nimport path from \"path\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Declaration from \"postcss/lib/declaration\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCss(\n  css: z.infer<typeof registryItemCssSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (\n    !config.resolvedPaths.tailwindCss ||\n    !css ||\n    Object.keys(css).length === 0\n  ) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssSpinner = spinner(\n    `Updating ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCss(raw, css)\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssSpinner.succeed()\n}\n\nexport async function transformCss(\n  input: string,\n  css: z.infer<typeof registryItemCssSchema>\n) {\n  const plugins = [updateCssPlugin(css)]\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  // PostCSS doesn't add semicolons to at-rules without bodies when they're the last node.\n  // We need to manually ensure they have semicolons.\n  const root = result.root\n  if (root.nodes && root.nodes.length > 0) {\n    const lastNode = root.nodes[root.nodes.length - 1]\n    if (\n      lastNode.type === \"atrule\" &&\n      !lastNode.nodes &&\n      !output.trimEnd().endsWith(\";\")\n    ) {\n      output = output.trimEnd() + \";\"\n    }\n  }\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n  output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  output = output.trimEnd()\n\n  return output\n}\n\nfunction updateCssPlugin(css: z.infer<typeof registryItemCssSchema>) {\n  return {\n    postcssPlugin: \"update-css\",\n    Once(root: Root) {\n      for (const [selector, properties] of Object.entries(css)) {\n        if (selector.startsWith(\"@\")) {\n          // Handle at-rules (@layer, @utility, etc.)\n          const atRuleMatch = selector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n          if (!atRuleMatch) continue\n\n          const [, name, params] = atRuleMatch\n\n          // Special handling for imports - place them at the top.\n          if (name === \"import\") {\n            // Check if this import already exists.\n            const existingImport = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"import\" &&\n                node.params === params\n            )\n\n            if (!existingImport) {\n              const importRule = postcss.atRule({\n                name: \"import\",\n                params,\n                raws: { semicolon: true },\n              })\n\n              // Find the last import to insert after, or insert at beginning.\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              if (importNodes && importNodes.length > 0) {\n                // Insert after the last existing import.\n                const lastImport = importNodes[importNodes.length - 1]\n                importRule.raws.before = \"\\n\"\n                root.insertAfter(lastImport, importRule)\n              } else {\n                // No imports exist, insert at the very beginning.\n                // Check if the file is empty.\n                if (!root.nodes || root.nodes.length === 0) {\n                  importRule.raws.before = \"\"\n                } else {\n                  importRule.raws.before = \"\"\n                }\n                root.prepend(importRule)\n              }\n            }\n          }\n          // Special handling for plugins - place them after imports.\n          else if (name === \"plugin\") {\n            // Ensure plugin name is quoted if not already.\n            let quotedParams = params\n            if (params && !params.startsWith('\"') && !params.startsWith(\"'\")) {\n              quotedParams = `\"${params}\"`\n            }\n\n            // Normalize params for comparison (remove quotes).\n            const normalizeParams = (p: string) => {\n              if (p.startsWith('\"') && p.endsWith('\"')) {\n                return p.slice(1, -1)\n              }\n              if (p.startsWith(\"'\") && p.endsWith(\"'\")) {\n                return p.slice(1, -1)\n              }\n              return p\n            }\n\n            // Find existing plugin with same normalized params.\n            const existingPlugin = root.nodes?.find((node): node is AtRule => {\n              if (node.type !== \"atrule\" || node.name !== \"plugin\") {\n                return false\n              }\n              return normalizeParams(node.params) === normalizeParams(params)\n            })\n\n            if (!existingPlugin) {\n              const pluginRule = postcss.atRule({\n                name: \"plugin\",\n                params: quotedParams,\n                raws: { semicolon: true, before: \"\\n\" },\n              })\n\n              // Find the last import or plugin node to insert after\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              const pluginNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"plugin\"\n              )\n\n              if (pluginNodes && pluginNodes.length > 0) {\n                // Insert after the last existing plugin\n                const lastPlugin = pluginNodes[pluginNodes.length - 1]\n                root.insertAfter(lastPlugin, pluginRule)\n              } else if (importNodes && importNodes.length > 0) {\n                // Insert after the last import if no plugins exist\n                const lastImport = importNodes[importNodes.length - 1]\n                root.insertAfter(lastImport, pluginRule)\n                // Add a break comment before the first plugin to create spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              } else {\n                // If no imports or plugins, insert at the beginning\n                root.prepend(pluginRule)\n                // Add a break comment before the first plugin for spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              }\n            }\n          }\n          // Check if this is any at-rule with no body (empty object).\n          else if (\n            typeof properties === \"object\" &&\n            Object.keys(properties).length === 0\n          ) {\n            // Handle any at-rule with no body (e.g., @apply, @tailwind, etc.).\n            const atRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!atRule) {\n              const newAtRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true },\n              })\n\n              root.append(newAtRule)\n              root.insertBefore(\n                newAtRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n          }\n          // Special handling for keyframes - place them under @theme inline.\n          else if (name === \"keyframes\") {\n            let themeInline = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"theme\" &&\n                node.params === \"inline\"\n            ) as AtRule | undefined\n\n            if (!themeInline) {\n              themeInline = postcss.atRule({\n                name: \"theme\",\n                params: \"inline\",\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n              root.append(themeInline)\n              root.insertBefore(\n                themeInline,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n\n            const keyframesRule = postcss.atRule({\n              name: \"keyframes\",\n              params,\n              raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n            })\n\n            themeInline.append(keyframesRule)\n\n            if (typeof properties === \"object\") {\n              for (const [step, stepProps] of Object.entries(properties)) {\n                processRule(keyframesRule, step, stepProps)\n              }\n            }\n          }\n          // Special handling for utility classes to preserve property values\n          else if (name === \"utility\") {\n            const utilityAtRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!utilityAtRule) {\n              const atRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n\n              root.append(atRule)\n              root.insertBefore(\n                atRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n\n              // Add declarations with their values preserved\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n                    atRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(atRule, prop, value)\n                  }\n                }\n              }\n            } else {\n              // Update existing utility class\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const existingDecl = utilityAtRule.nodes?.find(\n                      (node): node is Declaration =>\n                        node.type === \"decl\" && node.prop === prop\n                    )\n\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n\n                    existingDecl\n                      ? existingDecl.replaceWith(decl)\n                      : utilityAtRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(utilityAtRule, prop, value)\n                  }\n                }\n              }\n            }\n          }\n          // Handle at-property as regular CSS rules\n          else if (name === \"property\") {\n            processRule(root, selector, properties)\n          } else {\n            // Handle other at-rules normally\n            processAtRule(root, name, params, properties)\n          }\n        } else {\n          // Handle regular CSS rules\n          processRule(root, selector, properties)\n        }\n      }\n    },\n  }\n}\n\nfunction processAtRule(\n  root: Root | AtRule,\n  name: string,\n  params: string,\n  properties: any\n) {\n  // Find or create the at-rule\n  let atRule = root.nodes?.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" && node.name === name && node.params === params\n  ) as AtRule | undefined\n\n  if (!atRule) {\n    atRule = postcss.atRule({\n      name,\n      params,\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(atRule)\n    root.insertBefore(atRule, postcss.comment({ text: \"---break---\" }))\n  }\n\n  // Process children of this at-rule\n  if (typeof properties === \"object\") {\n    for (const [childSelector, childProps] of Object.entries(properties)) {\n      if (childSelector.startsWith(\"@\")) {\n        // Nested at-rule\n        const nestedMatch = childSelector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (nestedMatch) {\n          const [, nestedName, nestedParams] = nestedMatch\n          processAtRule(atRule, nestedName, nestedParams, childProps)\n        }\n      } else {\n        // CSS rule within at-rule\n        processRule(atRule, childSelector, childProps)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the at-rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Create a rule for the at-rule if needed\n        const rule = postcss.rule({\n          selector: \"temp\",\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule.append(clone)\n          }\n        })\n\n        // Only add the rule if it has declarations\n        if (rule.nodes?.length) {\n          atRule.append(rule)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error parsing at-rule content:\", properties, error)\n      throw error\n    }\n  }\n}\n\nfunction processRule(parent: Root | AtRule, selector: string, properties: any) {\n  let rule = parent.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  ) as Rule | undefined\n\n  if (!rule) {\n    rule = postcss.rule({\n      selector,\n      raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n    })\n    parent.append(rule)\n  }\n\n  if (typeof properties === \"object\") {\n    for (const [prop, value] of Object.entries(properties)) {\n      // Check if this is any at-rule with empty object (no body).\n      if (\n        prop.startsWith(\"@\") &&\n        typeof value === \"object\" &&\n        value !== null &&\n        Object.keys(value).length === 0\n      ) {\n        // Parse the at-rule.\n        const atRuleMatch = prop.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (atRuleMatch) {\n          const [, atRuleName, atRuleParams] = atRuleMatch\n          const atRule = postcss.atRule({\n            name: atRuleName,\n            params: atRuleParams,\n            raws: { semicolon: true, before: \"\\n    \" },\n          })\n          rule.append(atRule)\n        }\n      } else if (typeof value === \"string\") {\n        const decl = postcss.decl({\n          prop,\n          value: value,\n          raws: { semicolon: true, before: \"\\n    \" },\n        })\n\n        // Replace existing property or add new one.\n        const existingDecl = rule.nodes?.find(\n          (node): node is Declaration =>\n            node.type === \"decl\" && node.prop === prop\n        )\n\n        existingDecl ? existingDecl.replaceWith(decl) : rule.append(decl)\n      } else if (typeof value === \"object\") {\n        // Nested selector (including & selectors).\n        const nestedSelector = prop.startsWith(\"&\")\n          ? selector.replace(/^([^:]+)/, `$1${prop.substring(1)}`)\n          : prop // Use the original selector for other nested elements.\n        processRule(parent, nestedSelector, value)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule?.append(clone)\n          }\n        })\n      }\n    } catch (error) {\n      console.error(\"Error parsing rule content:\", selector, properties, error)\n      throw error\n    }\n  }\n}\n","import {\n  registryItemCssVarsSchema,\n  registryItemTailwindSchema,\n} from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { TailwindVersion } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { promises as fs } from \"fs\"\nimport path from \"path\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCssVars(\n  cssVars: z.infer<typeof registryItemCssVarsSchema> | undefined,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n    silent?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n  }\n) {\n  if (!config.resolvedPaths.tailwindCss || !Object.keys(cssVars ?? {}).length) {\n    return\n  }\n\n  options = {\n    cleanupDefaultNextStyles: false,\n    silent: false,\n    tailwindVersion: \"v3\",\n    overwriteCssVars: false,\n    initIndex: true,\n    ...options,\n  }\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssVarsSpinner = spinner(\n    `Updating CSS variables in ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCssVars(raw, cssVars ?? {}, config, {\n    cleanupDefaultNextStyles: options.cleanupDefaultNextStyles,\n    tailwindVersion: options.tailwindVersion,\n    tailwindConfig: options.tailwindConfig,\n    overwriteCssVars: options.overwriteCssVars,\n    initIndex: options.initIndex,\n  })\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssVarsSpinner.succeed()\n}\n\nexport async function transformCssVars(\n  input: string,\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n  } = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: true,\n  }\n) {\n  options = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: true,\n    ...options,\n  }\n\n  let plugins = [updateCssVarsPlugin(cssVars)]\n\n  if (options.cleanupDefaultNextStyles) {\n    plugins.push(cleanupDefaultNextStylesPlugin())\n  }\n\n  if (options.tailwindVersion === \"v4\") {\n    plugins = []\n\n    // Only add tw-animate-css if project does not have tailwindcss-animate\n    if (config.resolvedPaths?.cwd) {\n      const packageInfo = getPackageInfo(config.resolvedPaths.cwd)\n      if (\n        !packageInfo?.dependencies?.[\"tailwindcss-animate\"] &&\n        !packageInfo?.devDependencies?.[\"tailwindcss-animate\"] &&\n        options.initIndex\n      ) {\n        plugins.push(addCustomImport({ params: \"tw-animate-css\" }))\n      }\n    }\n\n    plugins.push(addCustomVariant({ params: \"dark (&:is(.dark *))\" }))\n\n    if (options.cleanupDefaultNextStyles) {\n      plugins.push(cleanupDefaultNextStylesPlugin())\n    }\n\n    plugins.push(\n      updateCssVarsPluginV4(cssVars, {\n        overwriteCssVars: options.overwriteCssVars,\n      })\n    )\n    plugins.push(updateThemePlugin(cssVars))\n\n    if (options.tailwindConfig) {\n      plugins.push(updateTailwindConfigPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigAnimationPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigKeyframesPlugin(options.tailwindConfig))\n    }\n  }\n\n  if (config.tailwind.cssVariables && options.initIndex) {\n    plugins.push(\n      updateBaseLayerPlugin({ tailwindVersion: options.tailwindVersion })\n    )\n  }\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n\n  if (options.tailwindVersion === \"v4\") {\n    output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  }\n\n  return output\n}\n\nfunction updateBaseLayerPlugin({\n  tailwindVersion,\n}: {\n  tailwindVersion?: TailwindVersion\n}) {\n  return {\n    postcssPlugin: \"update-base-layer\",\n    Once(root: Root) {\n      const requiredRules = [\n        {\n          selector: \"*\",\n          apply:\n            tailwindVersion === \"v4\"\n              ? \"border-border outline-ring/50\"\n              : \"border-border\",\n        },\n        { selector: \"body\", apply: \"bg-background text-foreground\" },\n      ]\n\n      let baseLayer = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\" &&\n          requiredRules.every(({ selector, apply }) =>\n            node.nodes?.some(\n              (rule): rule is Rule =>\n                rule.type === \"rule\" &&\n                rule.selector === selector &&\n                rule.nodes.some(\n                  (applyRule): applyRule is AtRule =>\n                    applyRule.type === \"atrule\" &&\n                    applyRule.name === \"apply\" &&\n                    applyRule.params === apply\n                )\n            )\n          )\n      ) as AtRule | undefined\n\n      if (!baseLayer) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          raws: { semicolon: true, between: \" \", before: \"\\n\" },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      requiredRules.forEach(({ selector, apply }) => {\n        const existingRule = baseLayer?.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!existingRule) {\n          baseLayer?.append(\n            postcss.rule({\n              selector,\n              nodes: [\n                postcss.atRule({\n                  name: \"apply\",\n                  params: apply,\n                  raws: { semicolon: true, before: \"\\n    \" },\n                }),\n              ],\n              raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n            })\n          )\n        }\n      })\n    },\n  }\n}\n\nfunction updateCssVarsPlugin(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>\n) {\n  return {\n    postcssPlugin: \"update-css-vars\",\n    Once(root: Root) {\n      let baseLayer = root.nodes.find(\n        (node) =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\"\n      ) as AtRule | undefined\n\n      if (!(baseLayer instanceof AtRule)) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          nodes: [],\n          raws: {\n            semicolon: true,\n            before: \"\\n\",\n            between: \" \",\n          },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      if (baseLayer !== undefined) {\n        // Add variables for each key in cssVars\n        Object.entries(cssVars).forEach(([key, vars]) => {\n          const selector = key === \"light\" ? \":root\" : `.${key}`\n          // TODO: Fix typecheck.\n          addOrUpdateVars(baseLayer as AtRule, selector, vars)\n        })\n      }\n    },\n  }\n}\n\nfunction removeConflictVars(root: Rule | Root) {\n  const rootRule = root.nodes.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === \":root\"\n  )\n\n  if (rootRule) {\n    const propsToRemove = [\"--background\", \"--foreground\"]\n\n    rootRule.nodes\n      .filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && propsToRemove.includes(node.prop)\n      )\n      .forEach((node) => node.remove())\n\n    if (rootRule.nodes.length === 0) {\n      rootRule.remove()\n    }\n  }\n}\n\nfunction cleanupDefaultNextStylesPlugin() {\n  return {\n    postcssPlugin: \"cleanup-default-next-styles\",\n    Once(root: Root) {\n      const bodyRule = root.nodes.find(\n        (node): node is Rule => node.type === \"rule\" && node.selector === \"body\"\n      )\n      if (bodyRule) {\n        // Remove color from the body node.\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"color\" &&\n              [\"rgb(var(--foreground-rgb))\", \"var(--foreground)\"].includes(\n                node.value\n              )\n          )\n          ?.remove()\n\n        // Remove background: linear-gradient.\n        bodyRule.nodes\n          .find((node): node is postcss.Declaration => {\n            return (\n              node.type === \"decl\" &&\n              node.prop === \"background\" &&\n              // This is only going to run on create project, so all good.\n              (node.value.startsWith(\"linear-gradient\") ||\n                node.value === \"var(--background)\")\n            )\n          })\n          ?.remove()\n\n        // Remove font-family: Arial, Helvetica, sans-serif;\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"font-family\" &&\n              node.value === \"Arial, Helvetica, sans-serif\"\n          )\n          ?.remove()\n\n        // If the body rule is empty, remove it.\n        if (bodyRule.nodes.length === 0) {\n          bodyRule.remove()\n        }\n      }\n\n      removeConflictVars(root)\n\n      const darkRootRule = root.nodes.find(\n        (node): node is Rule =>\n          node.type === \"atrule\" &&\n          node.params === \"(prefers-color-scheme: dark)\"\n      )\n\n      if (darkRootRule) {\n        removeConflictVars(darkRootRule)\n        if (darkRootRule.nodes.length === 0) {\n          darkRootRule.remove()\n        }\n      }\n    },\n  }\n}\n\nfunction addOrUpdateVars(\n  baseLayer: AtRule,\n  selector: string,\n  vars: Record<string, string>\n) {\n  let ruleNode = baseLayer.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  )\n\n  if (!ruleNode) {\n    if (Object.keys(vars).length > 0) {\n      ruleNode = postcss.rule({\n        selector,\n        raws: { between: \" \", before: \"\\n  \" },\n      })\n      baseLayer.append(ruleNode)\n    }\n  }\n\n  Object.entries(vars).forEach(([key, value]) => {\n    const prop = `--${key.replace(/^--/, \"\")}`\n    const newDecl = postcss.decl({\n      prop,\n      value,\n      raws: { semicolon: true },\n    })\n\n    const existingDecl = ruleNode?.nodes.find(\n      (node): node is postcss.Declaration =>\n        node.type === \"decl\" && node.prop === prop\n    )\n\n    existingDecl ? existingDecl.replaceWith(newDecl) : ruleNode?.append(newDecl)\n  })\n}\n\nfunction updateCssVarsPluginV4(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  options: {\n    overwriteCssVars?: boolean\n  }\n) {\n  return {\n    postcssPlugin: \"update-css-vars-v4\",\n    Once(root: Root) {\n      Object.entries(cssVars).forEach(([key, vars]) => {\n        let selector = key === \"light\" ? \":root\" : `.${key}`\n\n        if (key === \"theme\") {\n          selector = \"@theme\"\n          const themeNode = upsertThemeNode(root)\n          Object.entries(vars).forEach(([key, value]) => {\n            const prop = `--${key.replace(/^--/, \"\")}`\n            const newDecl = postcss.decl({\n              prop,\n              value,\n              raws: { semicolon: true },\n            })\n\n            const existingDecl = themeNode?.nodes?.find(\n              (node): node is postcss.Declaration =>\n                node.type === \"decl\" && node.prop === prop\n            )\n\n            // Only overwrite if overwriteCssVars is true\n            // i.e for registry:theme and registry:style\n            // We do not want new components to overwrite existing vars.\n            // Keep user defined vars.\n            if (options.overwriteCssVars) {\n              if (existingDecl) {\n                existingDecl.replaceWith(newDecl)\n              } else {\n                themeNode?.append(newDecl)\n              }\n            } else {\n              if (!existingDecl) {\n                themeNode?.append(newDecl)\n              }\n            }\n          })\n          return\n        }\n\n        let ruleNode = root.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!ruleNode && Object.keys(vars).length > 0) {\n          ruleNode = postcss.rule({\n            selector,\n            nodes: [],\n            raws: { semicolon: true, between: \" \", before: \"\\n\" },\n          })\n          root.append(ruleNode)\n          root.insertBefore(ruleNode, postcss.comment({ text: \"---break---\" }))\n        }\n\n        Object.entries(vars).forEach(([key, value]) => {\n          let prop = `--${key.replace(/^--/, \"\")}`\n\n          // Special case for sidebar-background.\n          if (prop === \"--sidebar-background\") {\n            prop = \"--sidebar\"\n          }\n\n          if (isLocalHSLValue(value)) {\n            value = `hsl(${value})`\n          }\n\n          const newDecl = postcss.decl({\n            prop,\n            value,\n            raws: { semicolon: true },\n          })\n          const existingDecl = ruleNode?.nodes.find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" && node.prop === prop\n          )\n\n          // Only overwrite if overwriteCssVars is true\n          // i.e for registry:theme and registry:style\n          // We do not want new components to overwrite existing vars.\n          // Keep user defined vars.\n          if (options.overwriteCssVars) {\n            if (existingDecl) {\n              existingDecl.replaceWith(newDecl)\n            } else {\n              ruleNode?.append(newDecl)\n            }\n          } else {\n            if (!existingDecl) {\n              ruleNode?.append(newDecl)\n            }\n          }\n        })\n      })\n    },\n  }\n}\n\nfunction updateThemePlugin(cssVars: z.infer<typeof registryItemCssVarsSchema>) {\n  return {\n    postcssPlugin: \"update-theme\",\n    Once(root: Root) {\n      // Find unique color names from light and dark.\n      const variables = Array.from(\n        new Set(\n          Object.keys(cssVars).flatMap((key) =>\n            Object.keys(cssVars[key as keyof typeof cssVars] || {})\n          )\n        )\n      )\n\n      if (!variables.length) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n\n      const themeVarNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--\")\n      )\n\n      for (const variable of variables) {\n        const value = Object.values(cssVars).find((vars) => vars[variable])?.[\n          variable\n        ]\n\n        if (!value) {\n          continue\n        }\n\n        if (variable === \"radius\") {\n          const radiusVariables = {\n            sm: \"calc(var(--radius) - 4px)\",\n            md: \"calc(var(--radius) - 2px)\",\n            lg: \"var(--radius)\",\n            xl: \"calc(var(--radius) + 4px)\",\n          }\n          for (const [key, value] of Object.entries(radiusVariables)) {\n            const cssVarNode = postcss.decl({\n              prop: `--radius-${key}`,\n              value,\n              raws: { semicolon: true },\n            })\n            if (\n              themeNode?.nodes?.find(\n                (node): node is postcss.Declaration =>\n                  node.type === \"decl\" && node.prop === cssVarNode.prop\n              )\n            ) {\n              continue\n            }\n            themeNode?.append(cssVarNode)\n          }\n          continue\n        }\n\n        let prop =\n          isLocalHSLValue(value) || isColorValue(value)\n            ? `--color-${variable.replace(/^--/, \"\")}`\n            : `--${variable.replace(/^--/, \"\")}`\n        if (prop === \"--color-sidebar-background\") {\n          prop = \"--color-sidebar\"\n        }\n\n        let propValue = `var(--${variable})`\n        if (prop === \"--color-sidebar\") {\n          propValue = \"var(--sidebar)\"\n        }\n\n        const cssVarNode = postcss.decl({\n          prop,\n          value: propValue,\n          raws: { semicolon: true },\n        })\n        const existingDecl = themeNode?.nodes?.find(\n          (node): node is postcss.Declaration =>\n            node.type === \"decl\" && node.prop === cssVarNode.prop\n        )\n        if (!existingDecl) {\n          if (themeVarNodes?.length) {\n            themeNode?.insertAfter(\n              themeVarNodes[themeVarNodes.length - 1],\n              cssVarNode\n            )\n          } else {\n            themeNode?.append(cssVarNode)\n          }\n        }\n      }\n    },\n  }\n}\n\nfunction upsertThemeNode(root: Root): AtRule {\n  let themeNode = root.nodes.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" &&\n      node.name === \"theme\" &&\n      node.params === \"inline\"\n  )\n\n  if (!themeNode) {\n    themeNode = postcss.atRule({\n      name: \"theme\",\n      params: \"inline\",\n      nodes: [],\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(themeNode)\n    root.insertBefore(themeNode, postcss.comment({ text: \"---break---\" }))\n  }\n\n  return themeNode\n}\n\nfunction addCustomVariant({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-variant\",\n    Once(root: Root) {\n      const customVariant = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      if (!customVariant) {\n        // Find all import nodes\n        const importNodes = root.nodes.filter(\n          (node): node is AtRule =>\n            node.type === \"atrule\" && node.name === \"import\"\n        )\n\n        const variantNode = postcss.atRule({\n          name: \"custom-variant\",\n          params,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // Insert after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, variantNode)\n        } else {\n          // If no imports, insert after the first node\n          root.insertAfter(root.nodes[0], variantNode)\n        }\n\n        root.insertBefore(variantNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction addCustomImport({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-import\",\n    Once(root: Root) {\n      const importNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"import\"\n      )\n\n      // Find custom variant node (to ensure we insert before it)\n      const customVariantNode = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      // Check if our specific import already exists\n      const hasImport = importNodes.some(\n        (node) => node.params.replace(/[\"']/g, \"\") === params\n      )\n\n      if (!hasImport) {\n        const importNode = postcss.atRule({\n          name: \"import\",\n          params: `\"${params}\"`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // If there are existing imports, add after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, importNode)\n        } else if (customVariantNode) {\n          // If no imports but has custom-variant, insert before it\n          root.insertBefore(customVariantNode, importNode)\n          root.insertBefore(\n            customVariantNode,\n            postcss.comment({ text: \"---break---\" })\n          )\n        } else {\n          // If no imports and no custom-variant, insert at the start\n          root.prepend(importNode)\n          root.insertAfter(importNode, postcss.comment({ text: \"---break---\" }))\n        }\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config\",\n    Once(root: Root) {\n      if (!tailwindConfig?.plugins) {\n        return\n      }\n\n      const quoteType = getQuoteType(root)\n      const quote = quoteType === \"single\" ? \"'\" : '\"'\n\n      const pluginNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"plugin\"\n      )\n\n      const lastPluginNode =\n        pluginNodes[pluginNodes.length - 1] || root.nodes[0]\n\n      for (const plugin of tailwindConfig.plugins) {\n        const pluginName = plugin.replace(/^require\\([\"']|[\"']\\)$/g, \"\")\n\n        // Check if the plugin is already present.\n        if (\n          pluginNodes.some((node) => {\n            return node.params.replace(/[\"']/g, \"\") === pluginName\n          })\n        ) {\n          continue\n        }\n\n        const pluginNode = postcss.atRule({\n          name: \"plugin\",\n          params: `${quote}${pluginName}${quote}`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n        root.insertAfter(lastPluginNode, pluginNode)\n        root.insertBefore(pluginNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigKeyframesPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-keyframes\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.keyframes) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingKeyFrameNodes = themeNode.nodes?.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"keyframes\"\n      )\n\n      const keyframeValueSchema = z.record(\n        z.string(),\n        z.record(z.string(), z.string())\n      )\n\n      for (const [keyframeName, keyframeValue] of Object.entries(\n        tailwindConfig.theme.extend.keyframes\n      )) {\n        if (typeof keyframeName !== \"string\") {\n          continue\n        }\n\n        const parsedKeyframeValue = keyframeValueSchema.safeParse(keyframeValue)\n\n        if (!parsedKeyframeValue.success) {\n          continue\n        }\n\n        if (\n          existingKeyFrameNodes?.find(\n            (node): node is postcss.AtRule =>\n              node.type === \"atrule\" &&\n              node.name === \"keyframes\" &&\n              node.params === keyframeName\n          )\n        ) {\n          continue\n        }\n\n        const keyframeNode = postcss.atRule({\n          name: \"keyframes\",\n          params: keyframeName,\n          nodes: [],\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        for (const [key, values] of Object.entries(parsedKeyframeValue.data)) {\n          const rule = postcss.rule({\n            selector: key,\n            nodes: Object.entries(values).map(([key, value]) =>\n              postcss.decl({\n                prop: key,\n                value,\n                raws: { semicolon: true, before: \"\\n      \", between: \": \" },\n              })\n            ),\n            raws: { semicolon: true, between: \" \", before: \"\\n    \" },\n          })\n          keyframeNode.append(rule)\n        }\n\n        themeNode.append(keyframeNode)\n        themeNode.insertBefore(\n          keyframeNode,\n          postcss.comment({ text: \"---break---\" })\n        )\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigAnimationPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-animation\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.animation) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingAnimationNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--animate-\")\n      )\n\n      const parsedAnimationValue = z\n        .record(z.string(), z.string())\n        .safeParse(tailwindConfig.theme.extend.animation)\n      if (!parsedAnimationValue.success) {\n        return\n      }\n\n      for (const [key, value] of Object.entries(parsedAnimationValue.data)) {\n        const prop = `--animate-${key}`\n        if (\n          existingAnimationNodes?.find(\n            (node): node is postcss.Declaration => node.prop === prop\n          )\n        ) {\n          continue\n        }\n\n        const animationNode = postcss.decl({\n          prop,\n          value,\n          raws: { semicolon: true, between: \": \", before: \"\\n  \" },\n        })\n        themeNode.append(animationNode)\n      }\n    },\n  }\n}\n\nfunction getQuoteType(root: Root): \"single\" | \"double\" {\n  const firstNode = root.nodes[0]\n  const raw = firstNode.toString()\n\n  if (raw.includes(\"'\")) {\n    return \"single\"\n  }\n  return \"double\"\n}\n\nexport function isLocalHSLValue(value: string) {\n  if (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\")\n  ) {\n    return false\n  }\n\n  const chunks = value.split(\" \")\n\n  return (\n    chunks.length === 3 &&\n    chunks.slice(1, 3).every((chunk) => chunk.includes(\"%\"))\n  )\n}\n\nexport function isColorValue(value: string) {\n  return (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\") ||\n    value.startsWith(\"var(--color-\")\n  )\n}\n","import { detect } from \"@antfu/ni\"\n\nexport async function getPackageManager(\n  targetDir: string,\n  { withFallback }: { withFallback?: boolean } = {\n    withFallback: false,\n  }\n): Promise<\"yarn\" | \"pnpm\" | \"bun\" | \"npm\" | \"deno\"> {\n  const packageManager = await detect({ programmatic: true, cwd: targetDir })\n\n  if (packageManager === \"yarn@berry\") return \"yarn\"\n  if (packageManager === \"pnpm@6\") return \"pnpm\"\n  if (packageManager === \"bun\") return \"bun\"\n  if (packageManager === \"deno\") return \"deno\"\n  if (!withFallback) {\n    return packageManager ?? \"npm\"\n  }\n\n  // Fallback to user agent if not detected.\n  const userAgent = process.env.npm_config_user_agent || \"\"\n\n  if (userAgent.startsWith(\"yarn\")) {\n    return \"yarn\"\n  }\n\n  if (userAgent.startsWith(\"pnpm\")) {\n    return \"pnpm\"\n  }\n\n  if (userAgent.startsWith(\"bun\")) {\n    return \"bun\"\n  }\n\n  return \"npm\"\n}\n\nexport async function getPackageRunner(cwd: string) {\n  const packageManager = await getPackageManager(cwd)\n\n  if (packageManager === \"pnpm\") return \"pnpm dlx\"\n\n  if (packageManager === \"bun\") return \"bunx\"\n\n  return \"npx\"\n}\n","import { RegistryItem } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport prompts from \"prompts\"\n\nexport async function updateDependencies(\n  dependencies: RegistryItem[\"dependencies\"],\n  devDependencies: RegistryItem[\"devDependencies\"],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  dependencies = Array.from(new Set(dependencies))\n  devDependencies = Array.from(new Set(devDependencies))\n\n  if (!dependencies?.length && !devDependencies?.length) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const dependenciesSpinner = spinner(`Installing dependencies.`, {\n    silent: options.silent,\n  })?.start()\n  const packageManager = await getUpdateDependenciesPackageManager(config)\n\n  // Offer to use --force or --legacy-peer-deps if using React 19 with npm.\n  let flag = \"\"\n  if (shouldPromptForNpmFlag(config) && packageManager === \"npm\") {\n    if (options.silent) {\n      flag = \"force\"\n    } else {\n      dependenciesSpinner.stopAndPersist()\n      logger.warn(\n        \"\\nIt looks like you are using React 19. \\nSome packages may fail to install due to peer dependency issues in npm (see https://ui.aodesu.com/react-19).\\n\"\n      )\n      const confirmation = await prompts([\n        {\n          type: \"select\",\n          name: \"flag\",\n          message: \"How would you like to proceed?\",\n          choices: [\n            { title: \"Use --force\", value: \"force\" },\n            { title: \"Use --legacy-peer-deps\", value: \"legacy-peer-deps\" },\n          ],\n        },\n      ])\n\n      if (confirmation) {\n        flag = confirmation.flag\n      }\n    }\n  }\n\n  dependenciesSpinner?.start()\n\n  await installWithPackageManager(\n    packageManager,\n    dependencies,\n    devDependencies,\n    config.resolvedPaths.cwd,\n    flag\n  )\n\n  dependenciesSpinner?.succeed()\n}\n\nfunction shouldPromptForNpmFlag(config: Config) {\n  const packageInfo = getPackageInfo(config.resolvedPaths.cwd, false)\n\n  if (!packageInfo?.dependencies?.react) {\n    return false\n  }\n\n  const hasReact19 = /^(?:\\^|~)?19(?:\\.\\d+)*(?:-.*)?$/.test(\n    packageInfo.dependencies.react\n  )\n  const hasReactDayPicker8 =\n    packageInfo.dependencies[\"react-day-picker\"]?.startsWith(\"8\")\n\n  return hasReact19 && hasReactDayPicker8\n}\n\nasync function getUpdateDependenciesPackageManager(config: Config) {\n  const expoVersion = getPackageInfo(config.resolvedPaths.cwd, false)\n    ?.dependencies?.expo\n\n  if (expoVersion) {\n    // Ensures package versions match the React Native version.\n    // https://docs.expo.dev/more/expo-cli/#install\n    return \"expo\"\n  }\n\n  return getPackageManager(config.resolvedPaths.cwd)\n}\n\nasync function installWithPackageManager(\n  packageManager: Awaited<\n    ReturnType<typeof getUpdateDependenciesPackageManager>\n  >,\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (packageManager === \"npm\") {\n    return installWithNpm(dependencies, devDependencies, cwd, flag)\n  }\n\n  if (packageManager === \"deno\") {\n    return installWithDeno(dependencies, devDependencies, cwd)\n  }\n\n  if (packageManager === \"expo\") {\n    return installWithExpo(dependencies, devDependencies, cwd)\n  }\n\n  if (dependencies?.length) {\n    await execa(packageManager, [\"add\", ...dependencies], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(packageManager, [\"add\", \"-D\", ...devDependencies], { cwd })\n  }\n}\n\nasync function installWithNpm(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (dependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), ...dependencies],\n      { cwd }\n    )\n  }\n\n  if (devDependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), \"-D\", ...devDependencies],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithDeno(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies?.length) {\n    await execa(\"deno\", [\"add\", ...dependencies.map((dep) => `npm:${dep}`)], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(\n      \"deno\",\n      [\"add\", \"-D\", ...devDependencies.map((dep) => `npm:${dep}`)],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithExpo(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", ...dependencies], { cwd })\n  }\n\n  if (devDependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", \"-- -D\", ...devDependencies], {\n      cwd,\n    })\n  }\n}\n","import { registryItemEnvVarsSchema } from \"@/src/schema\"\nimport {\n  findExistingEnvFile,\n  getNewEnvKeys,\n  mergeEnvContent,\n} from \"@/src/utils/env-helpers\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { z } from \"zod\"\n\nexport async function updateEnvVars(\n  envVars: z.infer<typeof registryItemEnvVarsSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!envVars || Object.keys(envVars).length === 0) {\n    return {\n      envVarsAdded: [],\n      envFileUpdated: null,\n      envFileCreated: null,\n    }\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const envSpinner = spinner(`Adding environment variables.`, {\n    silent: options.silent,\n  })?.start()\n\n  const projectRoot = config.resolvedPaths.cwd\n\n  // Find existing env file or use .env.local as default.\n  let envFilePath = path.join(projectRoot, \".env.local\")\n  const existingEnvFile = findExistingEnvFile(projectRoot)\n\n  if (existingEnvFile) {\n    envFilePath = existingEnvFile\n  }\n\n  const envFileExists = existsSync(envFilePath)\n  const envFileName = path.basename(envFilePath)\n\n  // Convert envVars object to env file format\n  const newEnvContent = Object.entries(envVars)\n    .map(([key, value]) => `${key}=${value}`)\n    .join(\"\\n\")\n\n  let envVarsAdded: string[] = []\n  let envFileUpdated: string | null = null\n  let envFileCreated: string | null = null\n\n  if (envFileExists) {\n    const existingContent = await fs.readFile(envFilePath, \"utf-8\")\n    const mergedContent = mergeEnvContent(existingContent, newEnvContent)\n    envVarsAdded = getNewEnvKeys(existingContent, newEnvContent)\n\n    if (envVarsAdded.length > 0) {\n      await fs.writeFile(envFilePath, mergedContent, \"utf-8\")\n      envFileUpdated = path.relative(projectRoot, envFilePath)\n\n      envSpinner?.succeed(\n        `Added the following variables to ${highlighter.info(envFileName)}:`\n      )\n\n      if (!options.silent) {\n        for (const key of envVarsAdded) {\n          logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n        }\n      }\n    } else {\n      envSpinner?.stop()\n    }\n  } else {\n    // Create new env file\n    await fs.writeFile(envFilePath, newEnvContent + \"\\n\", \"utf-8\")\n    envFileCreated = path.relative(projectRoot, envFilePath)\n    envVarsAdded = Object.keys(envVars)\n\n    envSpinner?.succeed(\n      `Added the following variables to ${highlighter.info(envFileName)}:`\n    )\n\n    if (!options.silent) {\n      for (const key of envVarsAdded) {\n        logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n      }\n    }\n  }\n\n  if (!options.silent && envVarsAdded.length > 0) {\n    logger.break()\n  }\n\n  return {\n    envVarsAdded,\n    envFileUpdated,\n    envFileCreated,\n  }\n}\n","import z from \"zod\";\nimport { getRegistryItems } from \"../registry/api\";\nimport { configWithDefaults } from \"../registry/config\";\nimport { resolveRegistryTree } from \"../registry/resolver\";\nimport { configSchema, registryItemFileSchema, registryItemSchema, workspaceConfigSchema } from \"../schema\";\nimport { Config, getWorkspaceConfig } from \"./get-config\";\nimport { getProjectTailwindVersionFromConfig } from \"./get-project-info\";\nimport { handleError } from \"./handle-error\";\nimport { isSafeTarget } from \"./is-safe-target\";\nimport { logger } from \"./logger\";\nimport { spinner } from \"./spinner\";\nimport { updateCss } from \"./updaters/update-css\";\nimport { updateCssVars } from \"./updaters/update-css-vars\";\nimport { updateDependencies } from \"./updaters/update-dependencies\";\nimport { updateEnvVars } from \"./updaters/update-env-vars\";\nimport { updateFiles } from \"./updaters/update-files\";\nimport { updateTailwindConfig } from \"./updaters/update-tailwind-config\";\n\nexport async function addComponents(\n  components: string[],\n  config: Config,\n  options: {\n    overwrite?: boolean;\n    silent?: boolean;\n    isNewProject?: boolean;\n    baseStyle?: boolean;\n    registryHeaders?: Record<string, Record<string, string>>;\n    path?: string;\n  }\n) {\n  options = {\n    overwrite: false,\n    silent: false,\n    isNewProject: false,\n    baseStyle: true,\n    ...options,\n  }\n\n  const workspaceConfig = await getWorkspaceConfig(config);\n  if (\n    workspaceConfig &&\n    workspaceConfig.ui &&\n    workspaceConfig.ui.resolvedPaths.cwd !== config.resolvedPaths.cwd\n  ) {\n    return await addWorkspaceComponents(components, config, workspaceConfig, {\n      ...options,\n      isRemote:\n        components?.length === 1 && !!components[0].match(/\\/chat\\/b\\//),\n    });\n  }\n\n  return await addProjectComponents(components, config, options)\n}\n\nasync function addProjectComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    baseStyle?: boolean\n    path?: string\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return;\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start();\n  const tree = await resolveRegistryTree(components, configWithDefaults(config));\n\n  if (!tree) {\n    registrySpinner?.fail();\n    return handleError(new Error(\"Failed to fetch components from registry.\"));\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail();\n    return handleError(error);\n  }\n\n  registrySpinner?.succeed();\n\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(config);\n\n  await updateTailwindConfig(tree.tailwind?.config, config, {\n    silent: options.silent,\n    tailwindVersion,\n  });\n\n  const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n  await updateCssVars(tree.cssVars, config, {\n    cleanupDefaultNextStyles: options.isNewProject,\n    silent: options.silent,\n    tailwindVersion,\n    tailwindConfig: tree.tailwind?.config,\n    overwriteCssVars,\n    initIndex: options.baseStyle,\n  })\n\n  // Add CSS updater\n  await updateCss(tree.css, config, {\n    silent: options.silent,\n  })\n\n  await updateEnvVars(tree.envVars, config, {\n    silent: options.silent,\n  })\n\n  await updateDependencies(tree.dependencies, tree.devDependencies, config, {\n    silent: options.silent,\n  })\n  await updateFiles(tree.files, config, {\n    overwrite: options.overwrite,\n    silent: options.silent,\n    path: options.path,\n  })\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function addWorkspaceComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  workspaceConfig: z.infer<typeof workspaceConfigSchema>,\n  options: {\n    overwrite?: boolean;\n    silent?: boolean;\n    isNewProject?: boolean;\n    isRemote?: boolean;\n    baseStyle?: boolean;\n    path?: string;\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return;\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start();\n  const tree = await resolveRegistryTree(components, configWithDefaults(config));\n\n  if (!tree) {\n    registrySpinner?.fail();\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n}\n\nasync function shouldOverwriteCssVars(\n  components: z.infer<typeof registryItemSchema>[\"name\"][],\n  config: z.infer<typeof configSchema>\n) {\n  const result = await getRegistryItems(components, { config })\n  const payload = z.array(registryItemSchema).parse(result)\n\n  return payload.some(\n    (component) =>\n      component.type === \"registry:theme\" || component.type === \"registry:style\"\n  )\n}\n\nfunction validateFilesTarget(\n  files: z.infer<typeof registryItemFileSchema>[],\n  cwd: string\n) {\n  for (const file of files) {\n    if (!file?.target) {\n      continue\n    }\n\n    if (!isSafeTarget(file.target, cwd)) {\n      throw new Error(\n        `We found an unsafe file path \"${file.target} in the registry item. Installation aborted.`\n      )\n    }\n  }\n}\n","import { existsSync } from \"fs\";\nimport { join } from \"path\";\nimport { logger } from \"./logger\";\n\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\n  try {\n    const { config } = await import(\"@dotenvx/dotenvx\");\n    const envFiles = [\n      \".env.local\",\n      \".env.development.local\",\n      \".env.development\",\n      \".env\"\n    ];\n\n    for (const envFile of envFiles) {\n      const envPath = join(cwd, envFile);\n      if (existsSync(envPath)) {\n        config({\n          path: envPath,\n          overload: false,\n          quiet: true\n        })\n      }\n    }\n  } catch (error) {\n    logger.warn(\"Failed to load env files:\", error);\n  }\n}\n","import { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { RegistryNotConfiguredError } from \"@/src/registry/errors\"\nimport { parseRegistryAndItemFromString } from \"@/src/registry/parser\"\nimport { fetchRegistryItems } from \"@/src/registry/resolver\"\nimport { Config } from \"@/src/utils/get-config\"\n\n// Recursively discovers all registry namespaces including nested ones.\nexport async function resolveRegistryNamespaces(\n  components: string[],\n  config: Config\n) {\n  const discoveredNamespaces = new Set<string>()\n  const visitedItems = new Set<string>()\n  const itemsToProcess = [...components]\n\n  while (itemsToProcess.length > 0) {\n    const currentItem = itemsToProcess.shift()!\n\n    if (visitedItems.has(currentItem)) {\n      continue\n    }\n    visitedItems.add(currentItem)\n\n    const { registry } = parseRegistryAndItemFromString(currentItem)\n    if (registry && !BUILTIN_REGISTRIES[registry]) {\n      discoveredNamespaces.add(registry)\n    }\n\n    try {\n      const [item] = await fetchRegistryItems([currentItem], config, {\n        useCache: true,\n      })\n\n      if (item?.registryDependencies) {\n        for (const dep of item.registryDependencies) {\n          const { registry: depRegistry } = parseRegistryAndItemFromString(dep)\n          if (depRegistry && !BUILTIN_REGISTRIES[depRegistry]) {\n            discoveredNamespaces.add(depRegistry)\n          }\n\n          if (!visitedItems.has(dep)) {\n            itemsToProcess.push(dep)\n          }\n        }\n      }\n    } catch (error) {\n      // If a registry is not configured, we still track it.\n      if (error instanceof RegistryNotConfiguredError) {\n        const { registry } = parseRegistryAndItemFromString(currentItem)\n        if (registry && !BUILTIN_REGISTRIES[registry]) {\n          discoveredNamespaces.add(registry)\n        }\n        continue\n      }\n\n      // For other errors (network, parsing, etc.), we skip this item\n      // but continue processing others to discover as many namespaces as possible.\n      continue\n    }\n  }\n\n  return Array.from(discoveredNamespaces)\n}\n","import { getRegistriesIndex } from \"@/src/registry/api\"\nimport { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { resolveRegistryNamespaces } from \"@/src/registry/namespaces\"\nimport { rawConfigSchema } from \"@/src/registry/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\nimport path from \"path\"\n\nexport async function ensureRegistriesInConfig(\n  components: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n    writeFile?: boolean\n  } = {}\n) {\n  options = {\n    silent: false,\n    writeFile: true,\n    ...options,\n  }\n\n  // Use resolveRegistryNamespaces to discover all namespaces including dependencies.\n  const registryNames = await resolveRegistryNamespaces(components, config)\n\n  const missingRegistries = registryNames.filter(\n    (registry) =>\n      !config.registries?.[registry] &&\n      !Object.keys(BUILTIN_REGISTRIES).includes(registry)\n  )\n\n  if (missingRegistries.length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // We'll fail silently if we can't fetch the registry index.\n  // The error handling by caller will guide user to add the missing registries.\n  const registryIndex = await getRegistriesIndex({\n    useCache: process.env.NODE_ENV !== \"development\",\n  })\n\n  if (!registryIndex) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  const foundRegistries: Record<string, string> = {}\n  for (const registry of missingRegistries) {\n    if (registryIndex[registry]) {\n      foundRegistries[registry] = registryIndex[registry]\n    }\n  }\n\n  if (Object.keys(foundRegistries).length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // Filter out built-in registries from existing config before merging\n  const existingRegistries = Object.fromEntries(\n    Object.entries(config.registries || {}).filter(\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\n    )\n  )\n\n  const newConfigWithRegistries = {\n    ...config,\n    registries: {\n      ...existingRegistries,\n      ...foundRegistries,\n    },\n  }\n\n  if (options.writeFile) {\n    const { resolvedPaths, ...configWithoutResolvedPaths } =\n      newConfigWithRegistries\n    const configSpinner = spinner(\"Updating components.json.\", {\n      silent: options.silent,\n    }).start()\n    const updatedConfig = rawConfigSchema.parse(configWithoutResolvedPaths)\n    await fs.writeFile(\n      path.resolve(config.resolvedPaths.cwd, \"components.json\"),\n      JSON.stringify(updatedConfig, null, 2) + \"\\n\",\n      \"utf-8\"\n    )\n    configSpinner.succeed()\n  }\n\n  return {\n    config: newConfigWithRegistries,\n    newRegistries: Object.keys(foundRegistries),\n  }\n}\n","import { Command } from \"commander\";\nimport path from \"path\";\nimport prompts from \"prompts\";\nimport z from \"zod\";\nimport { getRegistryItems } from \"../registry/api\";\nimport { clearRegistryContext } from \"../registry/context\";\nimport { isUniversalRegistryItem } from \"../registry/utils\";\nimport { addComponents } from \"../utils/add-components\";\nimport { loadEnvFiles } from \"../utils/env-loader\";\nimport { createConfig, getConfig } from \"../utils/get-config\";\nimport { handleError } from \"../utils/handle-error\";\nimport { highlighter } from \"../utils/highlighter\";\nimport { logger } from \"../utils/logger\";\nimport { ensureRegistriesInConfig } from \"../utils/registries\";\n\nexport const addOptionsSchema = z.object({\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  overwrite: z.boolean(),\n  cwd: z.string(),\n  all: z.boolean(),\n  path: z.string().optional(),\n  silent: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n})\n\nexport const add = new Command()\n  .name(\"add\")\n  .description(\"add a component to your project.\")\n  .argument(\"[components...]\", \"names, url or local path to component.\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\"-o, --overwrite\", \"overwrite existing files.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-a, --all\", \"add all available components\", false)\n  .option(\"-p, --path <path>\", \"the path to add the component to.\")\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .action(async (components, opts) => {\n    try{\n      const options = addOptionsSchema.parse({\n        components,\n        cwd: path.resolve(opts.cwd),\n        ...opts,\n      });\n\n      await loadEnvFiles(options.cwd);\n\n      let initialConfig = await getConfig(options.cwd);\n      if (!initialConfig) {\n        initialConfig = createConfig({\n          style: \"aodesu\",\n          resolvedPaths: {\n            cwd: options.path,\n          },\n        })\n      }\n\n      let hasNewRegistries = false;\n      if (components.length > 0) {\n        const { config: updatedConfig, newRegistries } =\n          await ensureRegistriesInConfig(components, initialConfig, {\n            silent: options.silent,\n            writeFile: false,\n          });\n        initialConfig = updatedConfig;\n        hasNewRegistries = newRegistries.length > 0;\n      }\n\n      if (components.length > 0) {\n        const [registryItem] = await getRegistryItems([components[0]], {\n          config: initialConfig,\n        })\n        const itemType = registryItem?.type\n\n        if (isUniversalRegistryItem(registryItem)) {\n          await addComponents(components, initialConfig, options)\n          return\n        }\n\n        if (\n          !options.yes &&\n          (itemType === \"registry:style\" || itemType === \"registry:theme\")\n        ) {\n          logger.break()\n          const { confirm } = await prompts({\n            type: \"confirm\",\n            name: \"confirm\",\n            message: highlighter.warn(\n              `You are about to install a new ${itemType.replace(\n                \"registry:\",\n                \"\"\n              )}. \\nExisting CSS variables and components will be overwritten. Continue?`\n            ),\n          })\n          if (!confirm) {\n            logger.break()\n            logger.log(`Installation cancelled.`)\n            logger.break()\n            process.exit(1)\n          }\n        }\n      }\n\n    } catch (error) {\n      logger.break();\n      handleError(error);\n    } finally {\n      clearRegistryContext();\n    }\n  })\n","import * as ERRORS from \"@/src/utils/errors\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport z from \"zod\";\nimport { buildOptionsSchema } from \"../commands/build\";\nimport { highlighter } from \"../utils/highlighter\";\nimport { logger } from \"../utils/logger\";\n\nexport async function preFlightBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {};\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  };\n\n  // Ensure registry file exist.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true;\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true });\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE]) {\n      logger.break();\n      logger.error(\n        `The path ${highlighter.info(\n          resolvePaths.registryFile\n        )} does not exist.`\n      );\n    }\n\n    logger.break();\n    process.exit(1);\n  }\n\n  return {\n    errors,\n    resolvePaths\n  };\n}\n","import { Command } from \"commander\";\nimport * as fs from \"fs/promises\";\nimport * as path from \"path\";\nimport z from \"zod\";\nimport { preFlightBuild } from \"../preflights/preflight-build\";\nimport { registryItemSchema, registrySchema } from \"../schema\";\nimport { handleError } from \"../utils/handle-error\";\nimport { highlighter } from \"../utils/highlighter\";\nimport { logger } from \"../utils/logger\";\nimport { spinner } from \"../utils/spinner\";\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n});\n\nexport const build = new Command()\n  .name(\"build\")\n  .description(\"build components for a aodesu registry\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (registry: string, opts) => {\n    try {\n      const options = buildOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        registryFile: registry,\n        outputDir: opts.output,\n      });\n\n      const { resolvePaths } = await preFlightBuild(options);\n      const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\");\n\n      const result = registrySchema.safeParse(JSON.parse(content));\n\n      if (!result.success) {\n        logger.error(\n          `Invalid registry file found at ${highlighter.info(\n            resolvePaths.registryFile\n          )}.`\n        );\n        process.exit(1);\n      }\n\n      const buildSpinner = spinner(\"Building registry...\");\n      for (const registryItem of result.data.items) {\n        buildSpinner.start(`Building ${registryItem.name}...`);\n\n        // Add the schema to the registry item.\n        registryItem[\"$schema\"] =\n          \"https://ui.aodesu.com/schema/registry-item.json\";\n\n        // Loop through each file in the files array.\n        for (const file of registryItem.files ?? []) {\n          file[\"content\"] = await fs.readFile(\n            path.resolve(resolvePaths.cwd, file.path),\n            \"utf-8\"\n          );\n        };\n\n        // Validate the registry item.\n        const result = registryItemSchema.safeParse(registryItem);\n        if (!result.success) {\n          logger.error(\n            `Invalid registry item found for ${highlighter.info(\n              registryItem.name\n            )}.`\n          );\n          continue;\n        }\n\n        logger.info(`Registry item found for ${registryItem.name}`)\n\n        // Write the registry item to the output directory.\n        await fs.writeFile(\n          path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n          JSON.stringify(result.data, null, 2)\n        );\n      }\n\n      // Copy registry.json to the output directory.\n      await fs.copyFile(\n        resolvePaths.registryFile,\n        path.resolve(resolvePaths.outputDir, \"registry.json\")\n      );\n\n      buildSpinner.succeed(\"Building registry.\");\n    } catch (error) {\n      logger.break();\n      handleError(error);\n    }\n  });\n","import { initOptionsSchema } from \"@/src/commands/init\";\nimport * as ERRORS from \"@/src/utils/errors\";\nimport { getProjectInfo } from \"@/src/utils/get-project-info\";\nimport { highlighter } from \"@/src/utils/highlighter\";\nimport { logger } from \"@/src/utils/logger\";\nimport { spinner } from \"@/src/utils/spinner\";\nimport fs from \"fs-extra\";\nimport path from \"path\";\nimport { z } from \"zod\";\n\nexport async function preFlightInit(\n  options: z.infer<typeof initOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {};\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true;\n    return {\n      errors,\n      projectInfo: null,\n    }\n  }\n\n  const projectSpinner = spinner(\"Preflight checks.\", {\n    silent: options.silent,\n  }).start()\n\n  if (\n    fs.existsSync(path.resolve(options.cwd, \"components.json\")) &&\n    !options.force\n  ) {\n    projectSpinner?.fail();\n    logger.break();\n    logger.error(\n      `A ${highlighter.info(\n        \"components.json\"\n      )} file already exist at ${highlighter.info(\n        options.cwd\n      )}. \\nTo start over, remove the ${highlighter.info(\n        \"components.json\"\n      )} file and run ${highlighter.info(\"init\")} again.`\n    );\n    logger.break();\n    process.exit(1);\n  }\n\n  projectSpinner?.succeed();\n\n  const frameworkSpinner = spinner(\"Verifying framework.\", {\n    silent: options.silent,\n  }).start();\n  const projectInfo = await getProjectInfo(options.cwd);\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true;\n    frameworkSpinner?.fail();\n    logger.break();\n    if (projectInfo?.framework.links.installation) {\n      logger.error(\n        `We could not detect a supported framework at ${highlighter.info(\n          options.cwd\n        )}.\\n` +\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to manually configure your project. \\nOnce configured, you can use the cli to add components.`\n      )\n    }\n    logger.break();\n    process.exit(1);\n  }\n  frameworkSpinner?.succeed(\n    `Verifying framework. Found ${highlighter.info(\n      projectInfo.framework.label\n    )}.`\n  )\n\n  let tailwindSpinnerMessage = \"Validating Tailwind CSS.\";\n\n  if (projectInfo.tailwindVersion === \"v4\") {\n    tailwindSpinnerMessage = `Validating Tailwind CSS config. Found ${highlighter.info(\n      \"v4\"\n    )}.`\n  }\n\n  const tailwindSpinner = spinner(tailwindSpinnerMessage, {\n    silent: options.silent,\n  }).start();\n\n  if (\n    projectInfo.tailwindVersion === \"v3\" &&\n    (!projectInfo?.tailwindConfigFile || !projectInfo?.tailwindCssFile)\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (\n    projectInfo.tailwindVersion === \"v4\" &&\n    !projectInfo?.tailwindCssFile\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (!projectInfo.tailwindVersion) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else {\n    tailwindSpinner?.succeed()\n  }\n\n  const tsConfigSpinner = spinner(`Validating import alias.`, {\n    silent: options.silent,\n  }).start();\n\n  if (!projectInfo?.aliasPrefix) {\n    errors[ERRORS.IMPORT_ALIAS_MISSING] = true\n    tsConfigSpinner?.fail()\n  } else {\n    tsConfigSpinner?.succeed()\n  }\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.TAILWIND_NOT_CONFIGURED]) {\n      logger.break()\n      logger.error(\n        `No Tailwind CSS configuration found at ${highlighter.info(\n          options.cwd\n        )}.`\n      )\n      logger.error(\n        `It is likely you do not have Tailwind CSS installed or have an invalid configuration.`\n      )\n      logger.error(`Install Tailwind CSS then try again.`)\n      if (projectInfo?.framework.links.tailwind) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.tailwind\n          )} to get started.`\n        )\n      }\n    }\n\n    if (errors[ERRORS.IMPORT_ALIAS_MISSING]) {\n      logger.break()\n      logger.error(`No import alias found in your tsconfig.json file.`)\n      if (projectInfo?.framework.links.installation) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to learn how to set an import alias.`\n        )\n      }\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    projectInfo\n  }\n}\n","import { initOptionsSchema } from \"@/src/commands/init\";\nimport { fetchRegistry } from \"@/src/registry/fetcher\";\nimport { getPackageManager } from \"@/src/utils/get-package-manager\";\nimport { handleError } from \"@/src/utils/handle-error\";\nimport { highlighter } from \"@/src/utils/highlighter\";\nimport { logger } from \"@/src/utils/logger\";\nimport { spinner } from \"@/src/utils/spinner\";\nimport { execa } from \"execa\";\nimport fs from \"fs-extra\";\nimport os from \"os\";\nimport path from \"path\";\nimport prompts from \"prompts\";\nimport z from \"zod\";\n\nconst MONOREPO_TEMPLATE_URL = \"https://codeload.github.com/aodesu-ui/ui/tar.gz/main\";\n\nexport const TEMPLATES = {\n  next: \"next\",\n  \"next-16\": \"next-16\",\n  \"next-monorepo\": \"next-monorepo\",\n  vite: \"vite\"\n} as const;\n\nexport async function createProject(\n  options: Pick<\n    z.infer<typeof initOptionsSchema>,\n    \"cwd\" | \"force\" | \"srcDir\" | \"components\" | \"template\"\n  >\n) {\n  options = {\n    srcDir: false,\n    ...options,\n  };\n\n  let template: keyof typeof TEMPLATES =\n    options.template && TEMPLATES[options.template as keyof typeof TEMPLATES]\n    ? (options.template as keyof typeof TEMPLATES)\n    : \"next\";\n\n  let projectName: string =\n    template === TEMPLATES.next ? \"my-app\" : \"my-monorepo\";\n\n  let nextVersion = \"15\";\n\n  const isRemoteComponent =\n    options.components?.length === 1 &&\n    !!options.components[0].match(/\\/chat\\/b\\//);\n\n  if (options.components && isRemoteComponent) {\n    try {\n      const [result] = await fetchRegistry(options.components);\n      const { meta } = z\n        .object({\n          meta: z.object({\n            nextVersion: z.string(),\n          }),\n        })\n        .parse(result);\n      nextVersion = meta.nextVersion;\n\n      // Force template to next for remote components.\n      template = TEMPLATES.next;\n    } catch (error) {\n      logger.break();\n      handleError(error);\n    }\n  }\n\n  if (!options.force) {\n    const { type, name } = await prompts([\n      {\n        type: options.template || isRemoteComponent ? null : \"select\",\n        name: \"type\",\n        message: `The path ${highlighter.info(\n          options.cwd\n        )} does not contain a package.json file.\\n  Would you like to start a new project?`,\n        choices: [\n          { title: \"Vite\", value: \"vite\" },\n          { title: \"Next.js 15\", value: \"next\" },\n          { title: \"Next.js 16\", value: \"next-16\" },\n          { title: \"Next.js (Monorepo)\", value: \"next-monorepo\" },\n        ],\n        initial: 0,\n      },\n      {\n        type: \"text\",\n        name: \"name\",\n        message: \"What is your project named?\",\n        initial: projectName,\n        format: (value: string) => value.trim(),\n        validate: (value: string) =>\n          value.length > 128\n            ? `Name should be less than 128 characters.`\n            : true,\n      },\n    ])\n\n    template = type ?? template;\n    projectName = name;\n\n    if (type === \"next-16\") {\n      nextVersion = \"latest\"\n    }\n  }\n\n  const packageManager = await getPackageManager(options.cwd, {\n    withFallback: true,\n  });\n\n  const projectPath = `${options.cwd}/${projectName}`;\n\n  // Check if path is writable.\n  try {\n    await fs.access(options.cwd, fs.constants.W_OK);\n  } catch (error) {\n    logger.break()\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\n    logger.error(\n      `It is likely you do not have write permissions for this folder or the path ${highlighter.info(\n        options.cwd\n      )} does not exist.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\n    logger.break()\n    logger.error(\n      `A project with the name ${highlighter.info(projectName)} already exists.`\n    )\n    logger.error(`Please choose a different name and try again.`)\n    logger.break()\n    process.exit(1)\n  }\n\n  if (template === TEMPLATES.vite) {\n    await createViteProject(projectPath, {\n      packageManager\n    })\n  }\n\n  if (template === TEMPLATES.next || template === TEMPLATES[\"next-16\"]) {\n    await createNextProject(projectPath, {\n      version: nextVersion,\n      cwd: options.cwd,\n      packageManager,\n      srcDir: !!options.srcDir,\n    })\n  }\n\n  if (template === TEMPLATES[\"next-monorepo\"]) {\n    await createMonorepoProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  return {\n    projectPath,\n    projectName,\n    template,\n  }\n}\n\nasync function createViteProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Vite project. This may take a few minutes.`\n  ).start();\n\n  try {\n    const args = [\n      \"create\",\n      \"vite@latest\",\n      path.basename(projectPath),\n      \"--template\",\n      \"react-ts\",\n      \"--yes\"\n    ]\n\n    await execa(options.packageManager, args, {\n      cwd: path.dirname(projectPath),\n    });\n\n    const installSpinner = spinner(`Installing dependencies with ${options.packageManager}.`).start();\n\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    });\n\n    installSpinner?.succeed(`Installed dependencies with ${options.packageManager}.`);\n\n    try {\n      await execa(\"git\", [\"init\"], { cwd: projectPath })\n      await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n      await execa(\"git\", [\"commit\", \"-m\", \"Initial commit from aodesu-ui\"], {\n        cwd: projectPath,\n      })\n    } catch (gitError) {\n      logger.warn(\"Git initialization skipped (git not available)\")\n    }\n\n    createSpinner?.succeed(\"Creating a new Vite project.\");\n  } catch (error) {\n    createSpinner?.fail(\"Something went worng creating a new Vite project.\");\n    handleError(error);\n  }\n}\n\nasync function createNextProject(\n  projectPath: string,\n  options: {\n    version: string\n    cwd: string\n    packageManager: string\n    srcDir: boolean\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js ${\n      options.version.startsWith(\"latest\") ? \"16\" : \"15\"\n    } project. This may take a few minutes.`\n  ).start()\n\n  // Note: pnpm fails here. Fallback to npx with --use-PACKAGE-MANAGER.\n  const args = [\n    \"--tailwind\",\n    \"--eslint\",\n    \"--typescript\",\n    \"--app\",\n    options.srcDir ? \"--src-dir\" : \"--no-src-dir\",\n    \"--no-import-alias\",\n    `--use-${options.packageManager}`,\n  ]\n\n  if (\n    options.version.startsWith(\"15\") ||\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--turbopack\")\n  }\n\n  if (\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--no-react-compiler\")\n  }\n\n  try {\n    await execa(\n      \"npx\",\n      [`create-next-app@${options.version}`, projectPath, \"--silent\", ...args],\n      {\n        cwd: options.cwd,\n      }\n    )\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `Something went wrong creating a new Next.js project. Please try again.`\n    )\n    process.exit(1)\n  }\n\n  createSpinner?.succeed(\n    `Creating a new Next.js ${\n      options.version.startsWith(\"latest\") ? \"16\" : \"15\"\n    } project.`\n  )\n}\n\nasync function createMonorepoProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js monorepo. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `aodesu-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(MONOREPO_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/monorepo-next\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"monorepo-next\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n    // await execa(\"cd\", [cwd])\n\n    // Write project name to the package.json\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    const cwd = process.cwd()\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new Next.js monorepo.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Next.js monorepo.\")\n    handleError(error)\n  }\n}\n","import fsExtra from \"fs-extra\"\n\nexport const FILE_BACKUP_SUFFIX = \".bak\"\n\nexport function createFileBackup(filePath: string): string | null {\n  if (!fsExtra.existsSync(filePath)) {\n    return null\n  }\n\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n  try {\n    fsExtra.renameSync(filePath, backupPath)\n    return backupPath\n  } catch (error) {\n    console.error(`Failed to create backup of ${filePath}: ${error}`)\n    return null\n  }\n}\n\nexport function restoreFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.renameSync(backupPath, filePath)\n    return true\n  } catch (error) {\n    console.error(\n      `Warning: Could not restore backup file ${backupPath}: ${error}`\n    )\n    return false\n  }\n}\n\nexport function deleteFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.unlinkSync(backupPath)\n    return true\n  } catch (error) {\n    // Best effort - don't log as this is just cleanup\n    return false\n  }\n}\n","import * as ERRORS from \"@/src/utils/errors\";\nimport { Command } from 'commander';\nimport fsExtra from 'fs-extra';\nimport path from 'path';\nimport prompts from \"prompts\";\nimport z from 'zod';\nimport { preFlightInit } from '../preflights/preflight-init';\nimport { getRegistryBaseColors, getRegistryItems, getRegistryStyles } from '../registry/api';\nimport { buildUrlAndHeadersForRegistryItem } from '../registry/builder';\nimport { configWithDefaults } from '../registry/config';\nimport { clearRegistryContext } from '../registry/context';\nimport { rawConfigSchema } from \"../schema\";\nimport { createProject } from \"../utils/create-project\";\nimport { loadEnvFiles } from '../utils/env-loader';\nimport { createFileBackup, deleteFileBackup, restoreFileBackup } from '../utils/file-helper';\nimport { Config, getConfig } from \"../utils/get-config\";\nimport { getProjectConfig, getProjectInfo, getProjectTailwindVersionFromConfig } from \"../utils/get-project-info\";\nimport { handleError } from '../utils/handle-error';\nimport { highlighter } from '../utils/highlighter';\nimport { logger } from '../utils/logger';\nimport { ensureRegistriesInConfig } from '../utils/registries';\nprocess.on(\"exit\", (code) => {\n  const filePath = path.resolve(process.cwd(), \"components.json\")\n\n  if (code === 0) {\n    return deleteFileBackup(filePath);\n  }\n\n  return restoreFileBackup(filePath);\n});\n\nexport const initOptionsSchema = z.object({\n  cwd: z.string(),\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  defaults: z.boolean(),\n  force: z.boolean(),\n  silent: z.boolean(),\n  isNewProject: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n  template: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return \"TEMPLATES\"\n        }\n        return true\n      },\n      {\n        message: \"Invalid template. Please use 'next', 'next-16' or 'next-monorepo'.\",\n      }\n    ),\n  baseColor: z\n    .string()\n    .optional(),\n  baseStyle: z.boolean(),\n});\n\nexport const init = new Command()\n  .name(\"init\")\n  .description(\"initialize your project and install dependencies\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. (next, next-16, next-monorepo)\"\n  )\n  .option(\"-b, --base-color <base-color>\", \"The base color to use. (neutral)\", undefined)\n  .option(\"-y, --yes\", \"Skip de confirmation prompt\", true)\n  .option(\"-d, --defaults\", \"Use default configuration.\", false)\n  .option(\"-f, --force\", \"Force overwrite of existing configuration\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-s, --silent\", \"Mute output\", false)\n  .option(\"--src-dir\", \"Use the src directory when creating a new project.\", false)\n  .option(\"--no-src-dir\", \"Do not use the src directory when creating a new project.\")\n  .option(\"--css-variables\", \"Use css variables for theming.\", true)\n  .option(\"--no-base-style\", \"Do not install the base aodesu style.\")\n  .action(async (components, opts) => {\n    try {\n      if (opts.defaults) {\n        opts.template = opts.template || \"next\"\n        opts.baseColor = opts.baseColor || \"neutral\"\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        isNewProject: false,\n        components,\n        ...opts\n      });\n\n      await loadEnvFiles(options.cwd);\n\n      // We need check if we're initializing with a new style\n      // This will allow us to determine if we need to install the base style.\n      // And if we should prompt the user for a base color.\n      if (components.length > 0) {\n        // We don't know the full config at this point.\n        // So we'll use a shadow config to fetch the first item,\n        let shadowConfig = configWithDefaults({});\n\n        // Check if there's a components.json file.\n        // If so, we'll merge with our shadow config.\n        const componentsJsonPath = path.resolve(options.cwd, \"components.json\");\n        if (fsExtra.existsSync(componentsJsonPath)) {\n          const existingConfig = await fsExtra.readJson(componentsJsonPath);\n          const config = rawConfigSchema.partial().parse(existingConfig);\n          shadowConfig = configWithDefaults(config);\n\n          // Since components.json might not be valid at this point.\n          // Temporaly rename components.json to allow preflight to run.\n          // We'll rename it back after preflight.\n          createFileBackup(componentsJsonPath);\n        }\n\n        // Ensure all registries used in componentes are configured.\n        const { config: updatedConfig } = await ensureRegistriesInConfig(\n          components,\n          shadowConfig,\n          {\n            silent: true,\n          }\n        )\n        shadowConfig = updatedConfig;\n\n\n        // This forces a shadowConfig validation early in the process.\n        buildUrlAndHeadersForRegistryItem(components[0], shadowConfig);\n\n\n        const [item] = await getRegistryItems([components[0]], {\n          config: shadowConfig\n        });\n\n        console.log(\"TEST - LLEGO AKI\")\n\n        if (item?.type == \"registry:style\") {\n          // Set a default base color so we're not prompted.\n          // The style will extend or override it.\n          options.baseColor = \"neutral\";\n\n          // If the style extends none, we don't want to install the base style.\n          options.baseStyle =\n            item.extends === \"none\" ? false : options.baseStyle;\n        }\n      }\n\n      // If --no-base-style, we don't want to prompt for a base color either\n      if (!options.baseStyle) {\n        options.baseColor = \"neutral\";\n      }\n\n      await runInit(options);\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed. \\nYou may now add components.`\n      )\n\n    } catch (error) {\n      logger.break();\n      handleError(error);\n    } finally {\n      clearRegistryContext();\n    }\n  })\n\n\nexport async function runInit(\n  options: z.infer<typeof initOptionsSchema> & {\n    skipPreflight?: boolean\n  }\n) {\n  let projectInfo;\n  let newProjectTemplate;\n  if (!options.skipPreflight) {\n    const preflight = await preFlightInit(options);\n    if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n      const { projectPath, template } = await createProject(options);\n      if (!projectPath) {\n        process.exit(1);\n      }\n      options.cwd = projectPath;\n      options.isNewProject = true;\n      newProjectTemplate = template;\n    }\n    projectInfo = preflight.projectInfo;\n  } else {\n    projectInfo = await getProjectInfo(options.cwd);\n  }\n\n  if (newProjectTemplate === \"next-monorepo\") {\n    options.cwd = path.resolve(options.cwd, \"apps/web\");\n    return await getConfig(options.cwd);\n  }\n\n  const projectConfig = await getProjectConfig(options.cwd, projectInfo);\n\n  let config = projectConfig\n    ? await promptForMinimalConfig(projectConfig, options)\n    : console.log(\"xd\")\n}\n\nasync function promptForMinimalConfig(\n  defaultConfig: Config,\n  opts: z.infer<typeof initOptionsSchema>\n) {\n  let style = defaultConfig.style;\n  let baseColor = opts.baseColor;\n  let cssVariables = defaultConfig.tailwind.cssVariables;\n\n  if (!opts.defaults) {\n    const [styles, baseColors, tailwindVersion] = await Promise.all([\n      getRegistryStyles(),\n      getRegistryBaseColors(),\n      getProjectTailwindVersionFromConfig(defaultConfig),\n    ]);\n\n    const options = await prompts([\n      {\n        type: tailwindVersion === \"v4\" ? null : \"select\",\n        name: \"style\",\n        message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n        choices: styles.map((style) => ({\n          title:\n            style.name === \"aodesu\" ? \"aodesu (Recommended)\" : style.label,\n          value: style.name,\n        })),\n        initial: 0,\n      },\n      {\n        type: opts.baseColor ? null : \"select\",\n        name: \"tailwindBaseColor\",\n        message: `Which color would you like to use as the ${highlighter.info(\"base color\")}?`,\n        choices: baseColors.map((color) => ({\n          title: color.label,\n          value: color.name,\n        })),\n      },\n    ]);\n\n    style = options.style ?? \"aodesu\";\n    baseColor = options.tailwindBaseColor ?? baseColor;\n    cssVariables = opts.cssVariables;\n  }\n\n  return rawConfigSchema.parse({\n    $schema: defaultConfig?.$schema,\n    style,\n    tailwind: {\n      ...defaultConfig?.tailwind,\n      baseColor,\n      cssVariables,\n    },\n    rsc: defaultConfig?.rsc,\n    tsx: defaultConfig?.tsx,\n    iconLibrary: defaultConfig?.iconLibrary,\n    aliases: defaultConfig?.aliases,\n  });\n}\n","#!/usr/bin/env node\nimport { Command } from \"commander\";\nimport packageJson from \"../package.json\";\nimport { add } from \"./commands/add\";\nimport { build } from \"./commands/build\";\nimport { init } from \"./commands/init\";\n\nprocess.on(\"SIGNINT\", () => process.exit(0));\nprocess.on(\"SIGTERM\", () => process.exit(0));\n\nasync function main() {\n  const program = new Command()\n    .name(\"uidesu\")\n    .description(\"add items from registry to your project\")\n    .version(\n      packageJson.version || \"1.0.0\",\n      \"-v, --version\",\n      \"display the version number\"\n    )\n\n  program\n    .addCommand(init)\n    .addCommand(add)\n    .addCommand(build)\n\n  program.parse()\n}\n\nmain()\n\n// export * from './registry/api';\n"]}