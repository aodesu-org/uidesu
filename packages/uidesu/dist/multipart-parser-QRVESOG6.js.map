{"version":3,"sources":["../../../node_modules/.pnpm/node-fetch@3.3.2/node_modules/node-fetch/src/utils/multipart-parser.js"],"names":["s","S","f","F","LF","CR","SPACE","HYPHEN","COLON","A","Z","lower","c","noop","MultipartParser","boundary","ui8a","i","data","length_","previousIndex","lookbehind","boundaryChars","index","state","flags","boundaryLength","boundaryEnd","bufferLength","cl","mark","name","clear","callback","callbackSymbol","start","end","dataCallback","markSymbol","_lookbehind","_fileName","headerValue","m","match","filename","code","toFormData","Body","ct","parser","headerField","entryValue","entryName","contentType","entryChunks","formData","FormData","onPartData","decoder","appendToFile","appendFileToFormData","file","file_default","appendEntryToFormData","chunk"],"mappings":"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","file":"multipart-parser-QRVESOG6.js","sourcesContent":["import {File} from 'fetch-blob/from.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\n\nlet s = 0;\nconst S = {\n\tSTART_BOUNDARY: s++,\n\tHEADER_FIELD_START: s++,\n\tHEADER_FIELD: s++,\n\tHEADER_VALUE_START: s++,\n\tHEADER_VALUE: s++,\n\tHEADER_VALUE_ALMOST_DONE: s++,\n\tHEADERS_ALMOST_DONE: s++,\n\tPART_DATA_START: s++,\n\tPART_DATA: s++,\n\tEND: s++\n};\n\nlet f = 1;\nconst F = {\n\tPART_BOUNDARY: f,\n\tLAST_BOUNDARY: f *= 2\n};\n\nconst LF = 10;\nconst CR = 13;\nconst SPACE = 32;\nconst HYPHEN = 45;\nconst COLON = 58;\nconst A = 97;\nconst Z = 122;\n\nconst lower = c => c | 0x20;\n\nconst noop = () => {};\n\nclass MultipartParser {\n\t/**\n\t * @param {string} boundary\n\t */\n\tconstructor(boundary) {\n\t\tthis.index = 0;\n\t\tthis.flags = 0;\n\n\t\tthis.onHeaderEnd = noop;\n\t\tthis.onHeaderField = noop;\n\t\tthis.onHeadersEnd = noop;\n\t\tthis.onHeaderValue = noop;\n\t\tthis.onPartBegin = noop;\n\t\tthis.onPartData = noop;\n\t\tthis.onPartEnd = noop;\n\n\t\tthis.boundaryChars = {};\n\n\t\tboundary = '\\r\\n--' + boundary;\n\t\tconst ui8a = new Uint8Array(boundary.length);\n\t\tfor (let i = 0; i < boundary.length; i++) {\n\t\t\tui8a[i] = boundary.charCodeAt(i);\n\t\t\tthis.boundaryChars[ui8a[i]] = true;\n\t\t}\n\n\t\tthis.boundary = ui8a;\n\t\tthis.lookbehind = new Uint8Array(this.boundary.length + 8);\n\t\tthis.state = S.START_BOUNDARY;\n\t}\n\n\t/**\n\t * @param {Uint8Array} data\n\t */\n\twrite(data) {\n\t\tlet i = 0;\n\t\tconst length_ = data.length;\n\t\tlet previousIndex = this.index;\n\t\tlet {lookbehind, boundary, boundaryChars, index, state, flags} = this;\n\t\tconst boundaryLength = this.boundary.length;\n\t\tconst boundaryEnd = boundaryLength - 1;\n\t\tconst bufferLength = data.length;\n\t\tlet c;\n\t\tlet cl;\n\n\t\tconst mark = name => {\n\t\t\tthis[name + 'Mark'] = i;\n\t\t};\n\n\t\tconst clear = name => {\n\t\t\tdelete this[name + 'Mark'];\n\t\t};\n\n\t\tconst callback = (callbackSymbol, start, end, ui8a) => {\n\t\t\tif (start === undefined || start !== end) {\n\t\t\t\tthis[callbackSymbol](ui8a && ui8a.subarray(start, end));\n\t\t\t}\n\t\t};\n\n\t\tconst dataCallback = (name, clear) => {\n\t\t\tconst markSymbol = name + 'Mark';\n\t\t\tif (!(markSymbol in this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (clear) {\n\t\t\t\tcallback(name, this[markSymbol], i, data);\n\t\t\t\tdelete this[markSymbol];\n\t\t\t} else {\n\t\t\t\tcallback(name, this[markSymbol], data.length, data);\n\t\t\t\tthis[markSymbol] = 0;\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < length_; i++) {\n\t\t\tc = data[i];\n\n\t\t\tswitch (state) {\n\t\t\t\tcase S.START_BOUNDARY:\n\t\t\t\t\tif (index === boundary.length - 2) {\n\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else if (c !== CR) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (index - 1 === boundary.length - 2) {\n\t\t\t\t\t\tif (flags & F.LAST_BOUNDARY && c === HYPHEN) {\n\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t} else if (!(flags & F.LAST_BOUNDARY) && c === LF) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c !== boundary[index + 2]) {\n\t\t\t\t\t\tindex = -2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === boundary[index + 2]) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_FIELD_START:\n\t\t\t\t\tstate = S.HEADER_FIELD;\n\t\t\t\t\tmark('onHeaderField');\n\t\t\t\t\tindex = 0;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_FIELD:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tclear('onHeaderField');\n\t\t\t\t\t\tstate = S.HEADERS_ALMOST_DONE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex++;\n\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === COLON) {\n\t\t\t\t\t\tif (index === 1) {\n\t\t\t\t\t\t\t// empty header field\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataCallback('onHeaderField', true);\n\t\t\t\t\t\tstate = S.HEADER_VALUE_START;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcl = lower(c);\n\t\t\t\t\tif (cl < A || cl > Z) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_START:\n\t\t\t\t\tif (c === SPACE) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tmark('onHeaderValue');\n\t\t\t\t\tstate = S.HEADER_VALUE;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_VALUE:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tdataCallback('onHeaderValue', true);\n\t\t\t\t\t\tcallback('onHeaderEnd');\n\t\t\t\t\t\tstate = S.HEADER_VALUE_ALMOST_DONE;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADERS_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('onHeadersEnd');\n\t\t\t\t\tstate = S.PART_DATA_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.PART_DATA_START:\n\t\t\t\t\tstate = S.PART_DATA;\n\t\t\t\t\tmark('onPartData');\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.PART_DATA:\n\t\t\t\t\tpreviousIndex = index;\n\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// boyer-moore derrived algorithm to safely skip non-boundary data\n\t\t\t\t\t\ti += boundaryEnd;\n\t\t\t\t\t\twhile (i < bufferLength && !(data[i] in boundaryChars)) {\n\t\t\t\t\t\t\ti += boundaryLength;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti -= boundaryEnd;\n\t\t\t\t\t\tc = data[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < boundary.length) {\n\t\t\t\t\t\tif (boundary[index] === c) {\n\t\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\t\tdataCallback('onPartData', true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index === boundary.length) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\t\t// CR = part boundary\n\t\t\t\t\t\t\tflags |= F.PART_BOUNDARY;\n\t\t\t\t\t\t} else if (c === HYPHEN) {\n\t\t\t\t\t\t\t// HYPHEN = end boundary\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index - 1 === boundary.length) {\n\t\t\t\t\t\tif (flags & F.PART_BOUNDARY) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tif (c === LF) {\n\t\t\t\t\t\t\t\t// unset the PART_BOUNDARY flag\n\t\t\t\t\t\t\t\tflags &= ~F.PART_BOUNDARY;\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (flags & F.LAST_BOUNDARY) {\n\t\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t// when matching a possible boundary, keep a lookbehind reference\n\t\t\t\t\t\t// in case it turns out to be a false lead\n\t\t\t\t\t\tlookbehind[index - 1] = c;\n\t\t\t\t\t} else if (previousIndex > 0) {\n\t\t\t\t\t\t// if our boundary turned out to be rubbish, the captured lookbehind\n\t\t\t\t\t\t// belongs to partData\n\t\t\t\t\t\tconst _lookbehind = new Uint8Array(lookbehind.buffer, lookbehind.byteOffset, lookbehind.byteLength);\n\t\t\t\t\t\tcallback('onPartData', 0, previousIndex, _lookbehind);\n\t\t\t\t\t\tpreviousIndex = 0;\n\t\t\t\t\t\tmark('onPartData');\n\n\t\t\t\t\t\t// reconsider the current character even so it interrupted the sequence\n\t\t\t\t\t\t// it could be the beginning of a new sequence\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.END:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unexpected state entered: ${state}`);\n\t\t\t}\n\t\t}\n\n\t\tdataCallback('onHeaderField');\n\t\tdataCallback('onHeaderValue');\n\t\tdataCallback('onPartData');\n\n\t\t// Update properties for the next call\n\t\tthis.index = index;\n\t\tthis.state = state;\n\t\tthis.flags = flags;\n\t}\n\n\tend() {\n\t\tif ((this.state === S.HEADER_FIELD_START && this.index === 0) ||\n\t\t\t(this.state === S.PART_DATA && this.index === this.boundary.length)) {\n\t\t\tthis.onPartEnd();\n\t\t} else if (this.state !== S.END) {\n\t\t\tthrow new Error('MultipartParser.end(): stream ended unexpectedly');\n\t\t}\n\t}\n}\n\nfunction _fileName(headerValue) {\n\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\tconst m = headerValue.match(/\\bfilename=(\"(.*?)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))($|;\\s)/i);\n\tif (!m) {\n\t\treturn;\n\t}\n\n\tconst match = m[2] || m[3] || '';\n\tlet filename = match.slice(match.lastIndexOf('\\\\') + 1);\n\tfilename = filename.replace(/%22/g, '\"');\n\tfilename = filename.replace(/&#(\\d{4});/g, (m, code) => {\n\t\treturn String.fromCharCode(code);\n\t});\n\treturn filename;\n}\n\nexport async function toFormData(Body, ct) {\n\tif (!/multipart/i.test(ct)) {\n\t\tthrow new TypeError('Failed to fetch');\n\t}\n\n\tconst m = ct.match(/boundary=(?:\"([^\"]+)\"|([^;]+))/i);\n\n\tif (!m) {\n\t\tthrow new TypeError('no or bad content-type header, no multipart boundary');\n\t}\n\n\tconst parser = new MultipartParser(m[1] || m[2]);\n\n\tlet headerField;\n\tlet headerValue;\n\tlet entryValue;\n\tlet entryName;\n\tlet contentType;\n\tlet filename;\n\tconst entryChunks = [];\n\tconst formData = new FormData();\n\n\tconst onPartData = ui8a => {\n\t\tentryValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tconst appendToFile = ui8a => {\n\t\tentryChunks.push(ui8a);\n\t};\n\n\tconst appendFileToFormData = () => {\n\t\tconst file = new File(entryChunks, filename, {type: contentType});\n\t\tformData.append(entryName, file);\n\t};\n\n\tconst appendEntryToFormData = () => {\n\t\tformData.append(entryName, entryValue);\n\t};\n\n\tconst decoder = new TextDecoder('utf-8');\n\tdecoder.decode();\n\n\tparser.onPartBegin = function () {\n\t\tparser.onPartData = onPartData;\n\t\tparser.onPartEnd = appendEntryToFormData;\n\n\t\theaderField = '';\n\t\theaderValue = '';\n\t\tentryValue = '';\n\t\tentryName = '';\n\t\tcontentType = '';\n\t\tfilename = null;\n\t\tentryChunks.length = 0;\n\t};\n\n\tparser.onHeaderField = function (ui8a) {\n\t\theaderField += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderValue = function (ui8a) {\n\t\theaderValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderEnd = function () {\n\t\theaderValue += decoder.decode();\n\t\theaderField = headerField.toLowerCase();\n\n\t\tif (headerField === 'content-disposition') {\n\t\t\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\t\t\tconst m = headerValue.match(/\\bname=(\"([^\"]*)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))/i);\n\n\t\t\tif (m) {\n\t\t\t\tentryName = m[2] || m[3] || '';\n\t\t\t}\n\n\t\t\tfilename = _fileName(headerValue);\n\n\t\t\tif (filename) {\n\t\t\t\tparser.onPartData = appendToFile;\n\t\t\t\tparser.onPartEnd = appendFileToFormData;\n\t\t\t}\n\t\t} else if (headerField === 'content-type') {\n\t\t\tcontentType = headerValue;\n\t\t}\n\n\t\theaderValue = '';\n\t\theaderField = '';\n\t};\n\n\tfor await (const chunk of Body) {\n\t\tparser.write(chunk);\n\t}\n\n\tparser.end();\n\n\treturn formData;\n}\n"]}